{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Plugins","url":"/packer/plugins"},{"title":"Builders"},{"title":"Anka","key":"veertuinc/packer-plugin-veertu-anka"},{"title":"VM Clone","url":"/packer/plugins/builders/anka/vm-clone","isCurrentPage":true}],"githubFileUrl":"https://github.com/veertuinc/packer-plugin-veertu-anka/blob/master/docs/builders/vm-clone.mdx","sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Packer Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Packer","fullPath":"/packer","theme":"packer"},{"title":"Install","fullPath":"/packer/install"},{"title":"Tutorials","fullPath":"/packer/tutorials"},{"title":"Documentation","fullPath":"/packer/docs"},{"title":"Guides","fullPath":"/packer/guides"},{"title":"Plugins","fullPath":"/packer/plugins"},{"title":"Integrations","fullPath":"/packer/integrations"}],"showFilterInput":false,"title":"Packer","visuallyHideTitle":true},{"backToLinkProps":{"text":"Packer Home","href":"/packer"},"levelButtonProps":{"levelUpButtonText":"Packer Home"},"menuItems":[{"title":"Plugins","fullPath":"/packer/plugins","theme":"packer"},{"divider":true,"id":"sidebar-nav-item-2"},{"title":"Anka","routes":[{"title":"Post-Processors","routes":[{"title":"Anka Registry Push","path":"post-processors/anka","remoteFile":{"filePath":"docs/post-processors/anka-registry-push.mdx"},"pluginData":{"title":"Anka","path":"anka","repo":"veertuinc/packer-plugin-veertu-anka","pluginTier":"community","sourceBranch":"master","version":"latest","files":[]},"fullPath":"/packer/plugins/post-processors/anka","id":"sidebar-nav-item-5"}],"id":"sidebar-nav-item-4"},{"title":"Builders","routes":[{"title":"VM Clone","path":"builders/anka/vm-clone","remoteFile":{"filePath":"docs/builders/vm-clone.mdx","fileString":"---\ndescription: |\n  The veertu-anka-vm-clone Packer builder is able to clone existing Anka VM Templates for use with Anka Virtualization and the Anka Build Cloud. The builder takes a source VM name, clones it, and then runs any provisioning necessary on the new VM Template before stopping or suspending it.\npage_title: Anka VM Clone - Builders\nnav_title: VM Clone\n---\n\n# Anka VM Clone Builder\n\nType: `veertu-anka-vm-clone`\n\nThe `veertu-anka-vm-clone` Packer builder is able to clone existing Anka VM Templates for use with the [Anka Virtualization](https://veertu.com/technology/) package and the [Anka Build Cloud](https://veertu.com/anka-build/). The builder takes a source VM name, clones it, and then runs any provisioning necessary on the new VM Template before stopping or suspending it.\n\nThe builder does _not_ manage templates. Once a template is created, it is up\nto you to use it or delete it.\n\nThis builder is part of the [Veertu Anka plugin](https://github.com/veertuinc/packer-plugin-veertu-anka). To install this plugin using `packer init`, add the following Packer block to your hcl template:\n\n```hcl\npacker {\n  required_plugins {\n    veertu-anka = {\n      version = \"= 3.2.0\"\n      source  = \"github.com/veertuinc/veertu-anka\"\n    }\n  }\n}\n```\n\n## Important Notes\n\n**In Anka 3.0** we now require a tagged source VM before cloning in order to share the underlying .ank image and optimize disk space. If your source VM is not tagged yet, we will assign one . **We highly recommend pushing this VM Template/Tag to your registry so [disk usage is optimized](https://docs.veertu.com/anka/apple/getting-started/creating-your-first-vm/#disk-optimization).**\n\n## Configuration Reference\n\nThere are many configuration options available for the builder. They are segmented below into two categories: required and optional parameters.\n\n#### _**Required Configuration**_\n\n* `source_vm_name` (String) The VM to clone for provisioning, either stopped or suspended.\n\n* `type` (String) Must be `veertu-anka-vm-clone`.\n\n#### _**Optional Configuration**_\n\n* `vm_name` (String) The name for the VM that is created.\n\n  > Generated using the source_vm_name if not provided: (`{{ source_vm_name }}-{10RandomChars}`).\n\n* `vcpu_count` (String) The number of vCPU cores, defaults to `2`.\n\n* `ram_size` (String) The size in \"[0-9]+G\" format, defaults to `2G`.\n\n* `disk_size` (String) The size in \"[0-9]+G\" format, defaults to `25G`.\n\n  > We will automatically resize the internal disk for you by executing `diskutil apfs resizeContainer disk0s2 0` inside of the VM.\n\n* `stop_vm` (Boolean) Whether or not to stop the vm after it has been created, defaults to false.\n\n* `display_controller` (string) The display controller to set (run `anka modify VMNAME set display --help` to see available options).\n\n* `always_fetch` (Boolean) Always pull the source VM from the registry. Defaults to false.\n\n* `boot_delay` (String) The time to wait before running packer provisioner commands, defaults to `7s`.\n\n* `cacert` (String) Path to a CA Root certificate.\n\n* `cert` (String) Path to your node's client certificate to use for registry communication (if certificate authorization is enabled).\n\n* `insecure` (Boolean) Skip TLS verification.\n\n* `key` (String) Path to your node's client certificate key, if the `cert` certificate doesn't contain one, to use for registry communication (if certificate authorization is enabled).\n\n* `hw_uuid` (String) (Anka 2 only) The Hardware UUID you wish to set (usually generated with `uuidgen`).\n\n* `port_forwarding_rules` (Struct) \n\n  > If port forwarding rules are already set and you want to not have them fail the packer build, use `packer build --force`.\n  \n  * `port_forwarding_guest_port` (Int)\n  * `port_forwarding_host_port` (Int)\n  * `port_forwarding_rule_name` (String)\n\n* `registry-path` (String) The registry URL (will use your default configuration if not set).\n\n* `remote` (String) The registry name (will use your default configuration if not set).\n  \n  > This takes priority in Anka 3 and `registry-path` will be ignored.\n\n* `source_vm_tag` (String) Specify the tag of the VM we want to clone instead of using the default.\n\n* `update_addons` (Boolean) (Anka 2 only) Update the vm addons. Defaults to false.\n\n* `use_anka_cp` (Boolean) Use built in anka cp command. Defaults to false.\n\n## Example\n\nHere is an example that uses the file and shell provisioners.\n\n```hcl\n\nvariable \"source_vm_name\" {\n  type = string\n  default = \"anka-packer-base-macos\"\n}\n\nvariable \"vm_name\" {\n  type = string\n  default = \"anka-packer-from-source\"\n}\n\nsource \"veertu-anka-vm-clone\" \"clone\" {\n  vm_name = \"${var.vm_name}\"\n  source_vm_name = \"${var.source_vm_name}\"\n}\n\nbuild {\n  sources = [\n    \"source.veertu-anka-vm-clone.clone\",\n  ]\n  provisioner \"file\" {\n    destination = \"/private/tmp/\"\n    source      = \"./examples/ansible\"\n  }\n  provisioner \"shell\" {\n    inline = [\n      \"[[ ! -d /tmp/ansible ]] && exit 100\",\n      \"touch /tmp/ansible/test1\"\n    ]\n  }\n  provisioner \"file\" {\n    destination = \"./\"\n    direction   = \"download\"\n    source      = \"/private/tmp/ansible/test1\"\n  }\n  provisioner \"shell-local\" {\n    inline = [\n      \"[[ ! -f ./test1 ]] && exit 200\",\n      \"rm -f ./test1\"\n    ]\n  }\n}\n\n```\n","sourceUrl":"https://github.com/veertuinc/packer-plugin-veertu-anka/blob/master/docs/builders/vm-clone.mdx"},"pluginData":{"title":"Anka","path":"anka","repo":"veertuinc/packer-plugin-veertu-anka","pluginTier":"community","sourceBranch":"master","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/anka/vm-clone","id":"sidebar-nav-item-7"},{"title":"VM Create","path":"builders/anka/vm-create","remoteFile":{"filePath":"docs/builders/vm-create.mdx"},"pluginData":{"title":"Anka","path":"anka","repo":"veertuinc/packer-plugin-veertu-anka","pluginTier":"community","sourceBranch":"master","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/anka/vm-create","id":"sidebar-nav-item-8"}],"id":"sidebar-nav-item-6"}],"id":"sidebar-nav-item-3"},{"title":"DigitalOcean","routes":[{"title":"Builders","routes":[{"title":"digitalocean","path":"builders/digitalocean","remoteFile":{"filePath":"docs/builders/digitalocean.mdx"},"pluginData":{"title":"DigitalOcean","path":"digitalocean","repo":"digitalocean/packer-plugin-digitalocean","pluginTier":"verified","version":"latest","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/builders/digitalocean","id":"sidebar-nav-item-11"}],"id":"sidebar-nav-item-10"},{"title":"Data Sources","routes":[{"title":"digitalocean-image","path":"datasources/digitalocean","remoteFile":{"filePath":"docs/datasources/digitalocen-image.mdx"},"pluginData":{"title":"DigitalOcean","path":"digitalocean","repo":"digitalocean/packer-plugin-digitalocean","pluginTier":"verified","version":"latest","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/datasources/digitalocean","id":"sidebar-nav-item-13"}],"id":"sidebar-nav-item-12"},{"title":"Post-Processors","routes":[{"title":"digitalocean-import","path":"post-processors/digitalocean","remoteFile":{"filePath":"docs/post-processors/digitalocean-import.mdx"},"pluginData":{"title":"DigitalOcean","path":"digitalocean","repo":"digitalocean/packer-plugin-digitalocean","pluginTier":"verified","version":"latest","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/post-processors/digitalocean","id":"sidebar-nav-item-15"}],"id":"sidebar-nav-item-14"}],"id":"sidebar-nav-item-9"},{"title":"External","routes":[{"title":"Data Sources","routes":[{"title":"Overview","path":"datasources/external","remoteFile":{"filePath":"docs/datasources/index.mdx"},"pluginData":{"title":"External","path":"external","repo":"joomcode/packer-plugin-external","version":"latest","sourceBranch":"main","pluginTier":"community","files":[]},"fullPath":"/packer/plugins/datasources/external","id":"sidebar-nav-item-18"},{"title":"External","path":"datasources/external/external","remoteFile":{"filePath":"docs/datasources/external.mdx"},"pluginData":{"title":"External","path":"external","repo":"joomcode/packer-plugin-external","version":"latest","sourceBranch":"main","pluginTier":"community","files":[]},"fullPath":"/packer/plugins/datasources/external/external","id":"sidebar-nav-item-19"},{"title":"External Raw","path":"datasources/external/raw","remoteFile":{"filePath":"docs/datasources/raw.mdx"},"pluginData":{"title":"External","path":"external","repo":"joomcode/packer-plugin-external","version":"latest","sourceBranch":"main","pluginTier":"community","files":[]},"fullPath":"/packer/plugins/datasources/external/raw","id":"sidebar-nav-item-20"}],"id":"sidebar-nav-item-17"}],"id":"sidebar-nav-item-16"},{"title":"Gridscale","routes":[{"title":"Builders","routes":[{"title":"gridscale","path":"builders/gridscale","remoteFile":{"filePath":"docs/builders/gridscale.mdx"},"pluginData":{"title":"Gridscale","path":"gridscale","repo":"gridscale/packer-plugin-gridscale","version":"latest","pluginTier":"verified","isHcpPackerReady":false,"files":[]},"fullPath":"/packer/plugins/builders/gridscale","id":"sidebar-nav-item-23"}],"id":"sidebar-nav-item-22"}],"id":"sidebar-nav-item-21"},{"title":"IPSW","routes":[{"title":"Data Sources","routes":[{"title":"IPSW","path":"datasources/ipsw","remoteFile":{"filePath":"docs/datasources/ipsw.mdx"},"pluginData":{"title":"IPSW","path":"ipsw","repo":"torarnv/packer-plugin-ipsw","version":"latest","sourceBranch":"main","pluginTier":"community","files":[]},"fullPath":"/packer/plugins/datasources/ipsw","id":"sidebar-nav-item-26"}],"id":"sidebar-nav-item-25"}],"id":"sidebar-nav-item-24"},{"title":"Kamatera","routes":[{"title":"Builders","routes":[{"title":"Kamatera","path":"builders/kamatera","remoteFile":{"filePath":"docs/builders/kamatera.mdx"},"pluginData":{"title":"Kamatera","path":"kamatera","repo":"kamatera/packer-plugin-kamatera","pluginTier":"community","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/kamatera","id":"sidebar-nav-item-29"}],"id":"sidebar-nav-item-28"}],"id":"sidebar-nav-item-27"},{"title":"Libvirt","routes":[{"title":"Builders","routes":[{"title":"Libvirt","path":"builders/libvirt","remoteFile":{"filePath":"docs/builders/libvirt.mdx"},"pluginData":{"title":"Libvirt","path":"libvirt","repo":"thomasklein94/packer-plugin-libvirt","pluginTier":"community","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/libvirt","id":"sidebar-nav-item-32"}],"id":"sidebar-nav-item-31"}],"id":"sidebar-nav-item-30"},{"title":"Nutanix","routes":[{"title":"Builders","routes":[{"title":"Overview","path":"builders/nutanix","remoteFile":{"filePath":"docs/builders/index.mdx"},"pluginData":{"title":"Nutanix","path":"nutanix","repo":"nutanix-cloud-native/packer-plugin-nutanix","version":"latest","pluginTier":"verified","sourceBranch":"main","files":[]},"fullPath":"/packer/plugins/builders/nutanix","id":"sidebar-nav-item-35"},{"title":"Nutanix","path":"builders/nutanix/nutanix","remoteFile":{"filePath":"docs/builders/nutanix.mdx"},"pluginData":{"title":"Nutanix","path":"nutanix","repo":"nutanix-cloud-native/packer-plugin-nutanix","version":"latest","pluginTier":"verified","sourceBranch":"main","files":[]},"fullPath":"/packer/plugins/builders/nutanix/nutanix","id":"sidebar-nav-item-36"}],"id":"sidebar-nav-item-34"}],"id":"sidebar-nav-item-33"},{"title":"Outscale","routes":[{"title":"Builders","routes":[{"title":"Overview","path":"builders/outscale","remoteFile":{"filePath":"docs/builders/index.mdx"},"pluginData":{"title":"Outscale","path":"outscale","repo":"outscale/packer-plugin-outscale","version":"latest","pluginTier":"verified","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/builders/outscale","id":"sidebar-nav-item-39"},{"title":"BSU","path":"builders/outscale/outscale-bsu","remoteFile":{"filePath":"docs/builders/outscale-bsu.mdx"},"pluginData":{"title":"Outscale","path":"outscale","repo":"outscale/packer-plugin-outscale","version":"latest","pluginTier":"verified","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/builders/outscale/outscale-bsu","id":"sidebar-nav-item-40"},{"title":"BSU Surrogate","path":"builders/outscale/outscale-bsusurrogate","remoteFile":{"filePath":"docs/builders/outscale-bsusurrogate.mdx"},"pluginData":{"title":"Outscale","path":"outscale","repo":"outscale/packer-plugin-outscale","version":"latest","pluginTier":"verified","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/builders/outscale/outscale-bsusurrogate","id":"sidebar-nav-item-41"},{"title":"BSU Volume","path":"builders/outscale/outscale-bsuvolume","remoteFile":{"filePath":"docs/builders/outscale-bsuvolume.mdx"},"pluginData":{"title":"Outscale","path":"outscale","repo":"outscale/packer-plugin-outscale","version":"latest","pluginTier":"verified","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/builders/outscale/outscale-bsuvolume","id":"sidebar-nav-item-42"},{"title":"chroot","path":"builders/outscale/outscale-chroot","remoteFile":{"filePath":"docs/builders/outscale-chroot.mdx"},"pluginData":{"title":"Outscale","path":"outscale","repo":"outscale/packer-plugin-outscale","version":"latest","pluginTier":"verified","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/builders/outscale/outscale-chroot","id":"sidebar-nav-item-43"}],"id":"sidebar-nav-item-38"},{"title":"Data Sources","routes":[{"title":"Outscale OMI","path":"datasources/outscale","remoteFile":{"filePath":"docs/datasources/omi.mdx"},"pluginData":{"title":"Outscale","path":"outscale","repo":"outscale/packer-plugin-outscale","version":"latest","pluginTier":"verified","isHcpPackerReady":true,"files":[]},"fullPath":"/packer/plugins/datasources/outscale","id":"sidebar-nav-item-45"}],"id":"sidebar-nav-item-44"}],"id":"sidebar-nav-item-37"},{"title":"UCloud","routes":[{"title":"Builders","routes":[{"title":"UCloud","path":"builders/ucloud","remoteFile":{"filePath":"docs/builders/uhost.mdx"},"pluginData":{"title":"UCloud","path":"ucloud","repo":"ucloud/packer-plugin-ucloud","version":"latest","pluginTier":"community","files":[]},"fullPath":"/packer/plugins/builders/ucloud","id":"sidebar-nav-item-48"}],"id":"sidebar-nav-item-47"},{"title":"Post-Processors","routes":[{"title":"UCloud Import","path":"post-processors/ucloud","remoteFile":{"filePath":"docs/post-processors/import.mdx"},"pluginData":{"title":"UCloud","path":"ucloud","repo":"ucloud/packer-plugin-ucloud","version":"latest","pluginTier":"community","files":[]},"fullPath":"/packer/plugins/post-processors/ucloud","id":"sidebar-nav-item-50"}],"id":"sidebar-nav-item-49"}],"id":"sidebar-nav-item-46"},{"title":"Volcengine","routes":[{"title":"Builders","routes":[{"title":"Volcengine ECS","path":"builders/volcengine","remoteFile":{"filePath":"docs/builders/volcengine-ecs.mdx"},"pluginData":{"title":"Volcengine","path":"volcengine","repo":"volcengine/packer-plugin-volcengine","pluginTier":"community","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/volcengine","id":"sidebar-nav-item-53"}],"id":"sidebar-nav-item-52"}],"id":"sidebar-nav-item-51"},{"title":"Vultr","routes":[{"title":"Builders","routes":[{"title":"Vultr","path":"builders/vultr","remoteFile":{"filePath":"docs/builders/vultr.mdx"},"pluginData":{"title":"Vultr","path":"vultr","repo":"vultr/packer-plugin-vultr","pluginTier":"community","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/vultr","id":"sidebar-nav-item-56"}],"id":"sidebar-nav-item-55"}],"id":"sidebar-nav-item-54"},{"title":"Ksyun","routes":[{"title":"Builders","routes":[{"title":"Epc","path":"builders/ksyun/epc","remoteFile":{"filePath":"docs/builders/epc.mdx"},"pluginData":{"title":"Ksyun","path":"ksyun","repo":"kingsoftcloud/packer-plugin-ksyun","pluginTier":"community","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/ksyun/epc","id":"sidebar-nav-item-59"},{"title":"Instance(KEC)","path":"builders/ksyun/kec","remoteFile":{"filePath":"docs/builders/kec.mdx"},"pluginData":{"title":"Ksyun","path":"ksyun","repo":"kingsoftcloud/packer-plugin-ksyun","pluginTier":"community","version":"latest","files":[]},"fullPath":"/packer/plugins/builders/ksyun/kec","id":"sidebar-nav-item-60"}],"id":"sidebar-nav-item-58"},{"title":"Data Sources","routes":[{"title":"Ksyun KMI","path":"datasources/ksyun","remoteFile":{"filePath":"docs/datasources/kmi.mdx"},"pluginData":{"title":"Ksyun","path":"ksyun","repo":"kingsoftcloud/packer-plugin-ksyun","pluginTier":"community","version":"latest","files":[]},"fullPath":"/packer/plugins/datasources/ksyun","id":"sidebar-nav-item-62"}],"id":"sidebar-nav-item-61"}],"id":"sidebar-nav-item-57"}],"title":"Plugins","visuallyHideTitle":true}],"mainWidth":"narrow"},"outlineItems":[{"title":"Anka VM Clone Builder","url":"#anka-vm-clone-builder","dataHeapTrack":"toc-list-item-index-0"},{"title":"Important Notes","url":"#important-notes","dataHeapTrack":"toc-list-item-index-1"},{"title":"Configuration Reference","url":"#configuration-reference","dataHeapTrack":"toc-list-item-index-2"},{"title":"Example","url":"#example","dataHeapTrack":"toc-list-item-index-3"}],"metadata":{"title":"Anka VM Clone - Builders","description":"The veertu-anka-vm-clone Packer builder is able to clone existing Anka VM Templates for use with Anka Virtualization and the Anka Build Cloud. The builder takes a source VM name, clones it, and then runs any provisioning necessary on the new VM Template before stopping or suspending it.\n"},"mdxSource":{"compiledSource":"var c=Object.defineProperty,N=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var l=(e,n,t)=>n in e?c(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,a=(e,n)=>{for(var t in n||(n={}))r.call(n,t)&&l(e,t,n[t]);if(s)for(var t of s(n))i.call(n,t)&&l(e,t,n[t]);return e},o=(e,n)=>N(e,d(n));var m=(e,n)=>{var t={};for(var p in e)r.call(e,p)&&n.indexOf(p)<0&&(t[p]=e[p]);if(e!=null&&s)for(var p of s(e))n.indexOf(p)<0&&i.call(e,p)&&(t[p]=e[p]);return t};const makeShortcode=e=>function(t){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",a({},t))},BadgesHeader=makeShortcode(\"BadgesHeader\"),PluginBadge=makeShortcode(\"PluginBadge\"),Badge=makeShortcode(\"Badge\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var p=t,{components:e}=p,n=m(p,[\"components\"]);return mdx(MDXLayout,o(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(BadgesHeader,{mdxType:\"BadgesHeader\"},mdx(PluginBadge,{type:\"community\",mdxType:\"PluginBadge\"}),mdx(Badge,{href:\"https://github.com/veertuinc/packer-plugin-veertu-anka/releases/tag/v3.2.1\",label:\"v3.2.1\",theme:\"light-gray\",mdxType:\"Badge\"})),mdx(\"h1\",a({},{className:\"g-type-display-2\",id:\"anka-vm-clone-builder\"}),mdx(\"a\",a({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#anka-vm-clone-builder\",\"aria-label\":\"anka vm clone builder permalink\"}),\"\\xBB\"),\"Anka VM Clone Builder\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Type: \",mdx(\"inlineCode\",{parentName:\"p\"},\"veertu-anka-vm-clone\")),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"veertu-anka-vm-clone\"),\" Packer builder is able to clone existing Anka VM Templates for use with the \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://veertu.com/technology/\"}),\"Anka Virtualization\"),\" package and the \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://veertu.com/anka-build/\"}),\"Anka Build Cloud\"),\". The builder takes a source VM name, clones it, and then runs any provisioning necessary on the new VM Template before stopping or suspending it.\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The builder does \",mdx(\"em\",{parentName:\"p\"},\"not\"),` manage templates. Once a template is created, it is up\nto you to use it or delete it.`),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"This builder is part of the \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://github.com/veertuinc/packer-plugin-veertu-anka\"}),\"Veertu Anka plugin\"),\". To install this plugin using \",mdx(\"inlineCode\",{parentName:\"p\"},\"packer init\"),\", add the following Packer block to your hcl template:\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"packer\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"required_plugins\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"veertu-anka\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"version\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"= 3.2.0\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"github.com/veertuinc/veertu-anka\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h2\",a({},{className:\"g-type-display-3\",id:\"important-notes\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#important-notes\",\"aria-label\":\"important notes permalink\"}),\"\\xBB\"),\"Important Notes\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"In Anka 3.0\"),\" we now require a tagged source VM before cloning in order to share the underlying .ank image and optimize disk space. If your source VM is not tagged yet, we will assign one . \",mdx(\"strong\",{parentName:\"p\"},\"We highly recommend pushing this VM Template/Tag to your registry so \",mdx(\"a\",a({parentName:\"strong\"},{href:\"https://docs.veertu.com/anka/apple/getting-started/creating-your-first-vm/#disk-optimization\"}),\"disk usage is optimized\"),\".\")),mdx(\"h2\",a({},{className:\"g-type-display-3\",id:\"configuration-reference\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#configuration-reference\",\"aria-label\":\"configuration reference permalink\"}),\"\\xBB\"),\"Configuration Reference\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"There are many configuration options available for the builder. They are segmented below into two categories: required and optional parameters.\"),mdx(\"h4\",a({},{className:\"g-type-display-5\",id:\"required-configuration\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#required-configuration\",\"aria-label\":\"required configuration permalink\"}),\"\\xBB\"),mdx(\"em\",{parentName:\"h4\"},mdx(\"strong\",{parentName:\"em\"},\"Required Configuration\"))),mdx(\"ul\",null,mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"source_vm_name\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#source_vm_name\",\"aria-label\":\"source_vm_name permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"source_vm_name\")),\" (String) The VM to clone for provisioning, either stopped or suspended.\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"type\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#type\",\"aria-label\":\"type permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"type\")),\" (String) Must be \",mdx(\"inlineCode\",{parentName:\"p\"},\"veertu-anka-vm-clone\"),\".\"))),mdx(\"h4\",a({},{className:\"g-type-display-5\",id:\"optional-configuration\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#optional-configuration\",\"aria-label\":\"optional configuration permalink\"}),\"\\xBB\"),mdx(\"em\",{parentName:\"h4\"},mdx(\"strong\",{parentName:\"em\"},\"Optional Configuration\"))),mdx(\"ul\",null,mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"vm_name\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#vm_name\",\"aria-label\":\"vm_name permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"vm_name\")),\" (String) The name for the VM that is created.\"),mdx(\"blockquote\",{parentName:\"li\"},mdx(\"p\",a({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),\"Generated using the source_vm_name if not provided: (\",mdx(\"inlineCode\",{parentName:\"p\"},\"{{ source_vm_name }}-{10RandomChars}\"),\").\"))),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"vcpu_count\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#vcpu_count\",\"aria-label\":\"vcpu_count permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"vcpu_count\")),\" (String) The number of vCPU cores, defaults to \",mdx(\"inlineCode\",{parentName:\"p\"},\"2\"),\".\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"ram_size\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#ram_size\",\"aria-label\":\"ram_size permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"ram_size\")),' (String) The size in \"',\"[0-9]\",'+G\" format, defaults to ',mdx(\"inlineCode\",{parentName:\"p\"},\"2G\"),\".\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"disk_size\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#disk_size\",\"aria-label\":\"disk_size permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"disk_size\")),' (String) The size in \"',\"[0-9]\",'+G\" format, defaults to ',mdx(\"inlineCode\",{parentName:\"p\"},\"25G\"),\".\"),mdx(\"blockquote\",{parentName:\"li\"},mdx(\"p\",a({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),\"We will automatically resize the internal disk for you by executing \",mdx(\"inlineCode\",{parentName:\"p\"},\"diskutil apfs resizeContainer disk0s2 0\"),\" inside of the VM.\"))),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"stop_vm\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#stop_vm\",\"aria-label\":\"stop_vm permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"stop_vm\")),\" (Boolean) Whether or not to stop the vm after it has been created, defaults to false.\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"display_controller\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#display_controller\",\"aria-label\":\"display_controller permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"display_controller\")),\" (string) The display controller to set (run \",mdx(\"inlineCode\",{parentName:\"p\"},\"anka modify VMNAME set display --help\"),\" to see available options).\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"always_fetch\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#always_fetch\",\"aria-label\":\"always_fetch permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"always_fetch\")),\" (Boolean) Always pull the source VM from the registry. Defaults to false.\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"boot_delay\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#boot_delay\",\"aria-label\":\"boot_delay permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"boot_delay\")),\" (String) The time to wait before running packer provisioner commands, defaults to \",mdx(\"inlineCode\",{parentName:\"p\"},\"7s\"),\".\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"cacert\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#cacert\",\"aria-label\":\"cacert permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"cacert\")),\" (String) Path to a CA Root certificate.\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"cert\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#cert\",\"aria-label\":\"cert permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"cert\")),\" (String) Path to your node's client certificate to use for registry communication (if certificate authorization is enabled).\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"insecure\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#insecure\",\"aria-label\":\"insecure permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"insecure\")),\" (Boolean) Skip TLS verification.\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"key\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#key\",\"aria-label\":\"key permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"key\")),\" (String) Path to your node's client certificate key, if the \",mdx(\"inlineCode\",{parentName:\"p\"},\"cert\"),\" certificate doesn't contain one, to use for registry communication (if certificate authorization is enabled).\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"hw_uuid\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#hw_uuid\",\"aria-label\":\"hw_uuid permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"hw_uuid\")),\" (String) (Anka 2 only) The Hardware UUID you wish to set (usually generated with \",mdx(\"inlineCode\",{parentName:\"p\"},\"uuidgen\"),\").\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"port_forwarding_rules\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#port_forwarding_rules\",\"aria-label\":\"port_forwarding_rules permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"port_forwarding_rules\")),\" (Struct) \"),mdx(\"blockquote\",{parentName:\"li\"},mdx(\"p\",a({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),\"If port forwarding rules are already set and you want to not have them fail the packer build, use \",mdx(\"inlineCode\",{parentName:\"p\"},\"packer build --force\"),\".\")),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"port_forwarding_guest_port\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",a({parentName:\"li\"},{href:\"#port_forwarding_guest_port\",\"aria-label\":\"port_forwarding_guest_port permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"port_forwarding_guest_port\")),\" (Int)\"),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"port_forwarding_host_port\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",a({parentName:\"li\"},{href:\"#port_forwarding_host_port\",\"aria-label\":\"port_forwarding_host_port permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"port_forwarding_host_port\")),\" (Int)\"),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"port_forwarding_rule_name\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"a\",a({parentName:\"li\"},{href:\"#port_forwarding_rule_name\",\"aria-label\":\"port_forwarding_rule_name permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"port_forwarding_rule_name\")),\" (String)\"))),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"registry-path\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#registry-path\",\"aria-label\":\"registry path permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"registry-path\")),\" (String) The registry URL (will use your default configuration if not set).\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"remote\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#remote\",\"aria-label\":\"remote permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"remote\")),\" (String) The registry name (will use your default configuration if not set).\"),mdx(\"blockquote\",{parentName:\"li\"},mdx(\"p\",a({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),\"This takes priority in Anka 3 and \",mdx(\"inlineCode\",{parentName:\"p\"},\"registry-path\"),\" will be ignored.\"))),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"source_vm_tag\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#source_vm_tag\",\"aria-label\":\"source_vm_tag permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"source_vm_tag\")),\" (String) Specify the tag of the VM we want to clone instead of using the default.\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"update_addons\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#update_addons\",\"aria-label\":\"update_addons permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"update_addons\")),\" (Boolean) (Anka 2 only) Update the vm addons. Defaults to false.\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{id:\"use_anka_cp\",className:\"__target-lic\",\"aria-hidden\":\"true\"})),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"p\"},{href:\"#use_anka_cp\",\"aria-label\":\"use_anka_cp permalink\",className:\"__permalink-lic\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"use_anka_cp\")),\" (Boolean) Use built in anka cp command. Defaults to false.\"))),mdx(\"h2\",a({},{className:\"g-type-display-3\",id:\"example\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#example\",\"aria-label\":\"example permalink\"}),\"\\xBB\"),\"Example\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Here is an example that uses the file and shell provisioners.\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"source_vm_name\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"anka-packer-base-macos\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"vm_name\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"anka-packer-from-source\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"source \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"veertu-anka-vm-clone\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"clone\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"vm_name\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"vm_name\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source_vm_name\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"source_vm_name\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"source.veertu-anka-vm-clone.clone\"'),\",\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"file\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"destination\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"/private/tmp/\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"./examples/ansible\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"[[ ! -d /tmp/ansible ]] && exit 100\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"touch /tmp/ansible/test1\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"file\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"destination\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"./\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"direction\"),\"   \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"download\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"/private/tmp/ansible/test1\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell-local\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"[[ ! -f ./test1 ]] && exit 200\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"rm -f ./test1\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"},{"iconName":"plug","name":"Plugins","path":"plugins"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."},"currentRootDocsPath":{"iconName":"plug","name":"Plugins","path":"plugins"}}},"__N_SSG":true}