{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Guides","url":"/packer/guides","isCurrentPage":false},{"title":"Build Immutable Infrastructure with Packer in CI/CD","url":"/packer/guides/packer-on-cicd"},{"title":"Upload a VirtualBox Image to S3","url":"/packer/guides/packer-on-cicd/upload-images-to-artifact","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Packer Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Packer","fullPath":"/packer","theme":"packer"},{"title":"Install","fullPath":"/packer/install"},{"title":"Tutorials","fullPath":"/packer/tutorials"},{"title":"Documentation","fullPath":"/packer/docs"},{"title":"Guides","fullPath":"/packer/guides"},{"title":"Integrations","fullPath":"/packer/integrations"}],"showFilterInput":false,"title":"Packer","visuallyHideTitle":true},{"backToLinkProps":{"text":"Packer Home","href":"/packer"},"levelButtonProps":{"levelUpButtonText":"Packer Home"},"menuItems":[{"title":"Guides","fullPath":"/packer/guides","theme":"packer"},{"title":"Upgrade Your Plugin to use the Packer plugin sdk","path":"1.7-plugin-upgrade","filePath":"../content/guides/1.7-plugin-upgrade.mdx","fullPath":"/packer/guides/1.7-plugin-upgrade","id":"sidebar-nav-item-0"},{"title":"Upgrade Your Template to use Packer init","path":"1.7-template-upgrade","filePath":"../content/guides/1.7-template-upgrade.mdx","fullPath":"/packer/guides/1.7-template-upgrade","id":"sidebar-nav-item-1"},{"title":"HCL guides","routes":[{"title":"Overview","path":"hcl","filePath":"../content/guides/hcl/index.mdx","fullPath":"/packer/guides/hcl","id":"sidebar-nav-item-3"},{"title":"Variables","path":"hcl/variables","filePath":"../content/guides/hcl/variables.mdx","fullPath":"/packer/guides/hcl/variables","id":"sidebar-nav-item-4"},{"title":"Upgrade Packer JSON Template to HCL2","href":"/packer/tutorials/configuration-language/hcl2-upgrade","id":"sidebar-nav-item-5"},{"title":"Making a plugin HCL2 enabled","path":"hcl/component-object-spec","filePath":"../content/guides/hcl/component-object-spec.mdx","fullPath":"/packer/guides/hcl/component-object-spec","id":"sidebar-nav-item-6"}],"id":"sidebar-nav-item-2"},{"title":"Automatic OS Installs","routes":[{"title":"Overview","path":"automatic-operating-system-installs","filePath":"../content/guides/automatic-operating-system-installs/index.mdx","fullPath":"/packer/guides/automatic-operating-system-installs","id":"sidebar-nav-item-8"},{"title":"Unattended Installation for Windows","path":"automatic-operating-system-installs/autounattend_windows","filePath":"../content/guides/automatic-operating-system-installs/autounattend_windows.mdx","fullPath":"/packer/guides/automatic-operating-system-installs/autounattend_windows","id":"sidebar-nav-item-9"},{"title":"Unattended Installation for Debian","path":"automatic-operating-system-installs/preseed_ubuntu","filePath":"../content/guides/automatic-operating-system-installs/preseed_ubuntu.mdx","fullPath":"/packer/guides/automatic-operating-system-installs/preseed_ubuntu","id":"sidebar-nav-item-10"}],"id":"sidebar-nav-item-7"},{"title":"Build Immutable Infrastructure with Packer in CI/CD","routes":[{"title":"Overview","path":"packer-on-cicd","filePath":"../content/guides/packer-on-cicd/index.mdx","fullPath":"/packer/guides/packer-on-cicd","id":"sidebar-nav-item-12"},{"title":"Build Images in CI/CD","path":"packer-on-cicd/build-image-in-cicd","filePath":"../content/guides/packer-on-cicd/build-image-in-cicd.mdx","fullPath":"/packer/guides/packer-on-cicd/build-image-in-cicd","id":"sidebar-nav-item-13"},{"title":"Build a VirtualBox Image with Packer in TeamCity","path":"packer-on-cicd/build-virtualbox-image","filePath":"../content/guides/packer-on-cicd/build-virtualbox-image.mdx","fullPath":"/packer/guides/packer-on-cicd/build-virtualbox-image","id":"sidebar-nav-item-14"},{"title":"Pipelineing Builds","path":"packer-on-cicd/pipelineing-builds","filePath":"../content/guides/packer-on-cicd/pipelineing-builds.mdx","fullPath":"/packer/guides/packer-on-cicd/pipelineing-builds","id":"sidebar-nav-item-15"},{"title":"Trigger Terraform Enterprise runs","path":"packer-on-cicd/trigger-tfe","filePath":"../content/guides/packer-on-cicd/trigger-tfe.mdx","fullPath":"/packer/guides/packer-on-cicd/trigger-tfe","id":"sidebar-nav-item-16"},{"title":"Upload a VirtualBox Image to S3","path":"packer-on-cicd/upload-images-to-artifact","filePath":"../content/guides/packer-on-cicd/upload-images-to-artifact.mdx","fullPath":"/packer/guides/packer-on-cicd/upload-images-to-artifact","id":"sidebar-nav-item-17"}],"id":"sidebar-nav-item-11"}],"title":"Guides","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/packer/blob/main/website/../content/guides/packer-on-cicd/upload-images-to-artifact.mdx"},"metadata":{"title":"Upload VirtualBox Image to S3","description":"Learn how to upload a VirtualBox image built with Packer to S3 within a TeamCity build.","layout":null},"outlineItems":[{"title":"Upload VirtualBox Image to S3","url":"#upload-virtualbox-image-to-s3","dataHeapTrack":"toc-list-item-index-0"},{"title":"Example: Uploading to S3 in a TeamCity Build","url":"#example-uploading-to-s3-in-a-teamcity-build","dataHeapTrack":"toc-list-item-index-1"}],"pageHeading":{"id":"upload-virtualbox-image-to-s3","title":"Upload VirtualBox Image to S3"},"mdxSource":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`Once the image is generated it will be used by other parts of your operations\nworkflow. For example, it is common to build VirtualBox images with Packer to\nbe used as base boxes in Vagrant.`),mdx(\"p\",null,`The exact process for uploading images depends on the artifact store and CI\nsystem you use. TeamCity provides a `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://confluence.jetbrains.com/display/TCD9/Build+Artifact\"},`Build\nArtifacts`),`\nfeature which can be used to store the newly generated image. Other CI/CD\nservices also have similar build artifacts features built in, like `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://circleci.com/docs/2.0/artifacts/\"},`Circle CI\nBuild Artifacts`),`. In addition to the\nbuilt in artifact stores in CI/CD tools, there are also dedicated universal\nartifact storage services like\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://confluence.jetbrains.com/display/TCD9/Build+Artifact\"},`Artifactory`),`.\nAll of these are great options for image artifact storage.`),mdx(\"p\",null,`The following example uses TeamCity and Amazon S3.`),mdx(\"h2\",{\"id\":\"example-uploading-to-s3-in-a-teamcity-build\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#example-uploading-to-s3-in-a-teamcity-build\",\"aria-label\":\"example uploading to s3 in a teamcity build permalink\"},`\\xbb`),`Example: Uploading to S3 in a TeamCity Build`),mdx(\"p\",null,`On the agent machine responsible for building images, install the `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://aws.amazon.com/cli/\"},`AWS Command\nLine Tool`),`. Since this is a one-time operation,\nthis can be incorporated into the initial agent provisioning step when\ninstalling other dependencies. The AWS Command Line tool may require installing\nadditional\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"http://docs.aws.amazon.com/cli/latest/userguide/installing.html\"},`dependencies`),`\nprior.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`pip `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`install`),` awscli`)),`\n`)),mdx(\"p\",null,`In your build configuration in TeamCity Server, add an additional `,mdx(\"strong\",{parentName:\"p\"},`Build Step:\nCommand Line`),` and set the `,mdx(\"strong\",{parentName:\"p\"},`Script content`),` field to the following:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`awscli s3 `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`cp`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`.`),` s3://bucket/ --exclude “*” --include “*.ovf`)),mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`\"`),`\n`)))};MDXContent.isMDXComponent=true;","scope":{"version":"latest"}},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."},"currentRootDocsPath":{"iconName":"guide","name":"Guides","path":"guides"}},"projectName":null,"versions":null},"__N_SSG":true}