<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Getting Started with AWS | Packer | HashiCorp Developer</title><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="article:publisher" content="https://www.facebook.com/HashiCorp/"/><meta name="twitter:site" content="@HashiCorp"/><meta name="twitter:card" content="summary_large_image"/><meta name="theme-color" content="#000"/><meta name="description" property="og:description" content="Explore Packer product documentation, tutorials, and examples."/><meta name="twitter:description" content="Explore Packer product documentation, tutorials, and examples."/><meta property="og:site_name" content="Getting Started with AWS | Packer | HashiCorp Developer"/><meta property="og:title" content="Getting Started with AWS | Packer | HashiCorp Developer"/><meta property="og:image" content="https://developer.hashicorp.com/og-image/packer.jpg"/><link rel="canonical" href="https://developer.hashicorp.com/packer/docs/aws-get-started"/><link rel="icon" href="/favicon.ico" sizes="any"/><link rel="icon" href="/icon.svg" type="image/svg+xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="google-site-verification" content="zRQZqfAsOX-ypXfU0mzAIzb5rUvj5fA4Zw2jWJRN-JI"/><meta name="zd-site-verification" content="xnvnvv1i0wl4tf0pzaymb" data-product="hcp"/><meta name="zd-site-verification" content="36fp2i1pj67d8cjtzf4fi9" data-product="terraform"/><meta name="zd-site-verification" content="nbe87kfyp1sck7b13vj1i" data-product="packer"/><meta name="zd-site-verification" content="wvsmmqa1cfb9am9zlwfj" data-product="consul"/><meta name="zd-site-verification" content="cw22oopfwr68ujj0n5pn9i" data-product="boundary"/><meta name="zd-site-verification" content="lkslvganwfgfqfwpdeicgh" data-product="vault"/><meta name="zd-site-verification" content="jl2wp2hoej9rz6c8rmqdns" data-product="nomad"/><meta name="zd-site-verification" content="2eb0cu6xceo73t0038m0tb" data-product="waypoint"/><meta name="zd-site-verification" content="n52xisxdf3higs2q9kuogd" data-product="vagrant"/><meta name="twitter:image" content="https://developer.hashicorp.com/og-image/packer.jpg"/><link rel="prefetch" href="https://www.datadoghq-browser-agent.com/datadog-rum-v4.js"/><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developer","item":"https://developer.hashicorp.com/"},{"@type":"ListItem","position":2,"name":"Packer","item":"https://developer.hashicorp.com/packer"},{"@type":"ListItem","position":3,"name":"Documentation","item":"https://developer.hashicorp.com/packer/docs"},{"@type":"ListItem","position":4,"name":"Getting Started with AWS","item":"https://developer.hashicorp.com/packer/docs/aws-get-started"}]}]</script><meta name="next-head-count" content="31"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/62f3294bfc989add.css" as="style"/><link rel="stylesheet" href="/_next/static/css/62f3294bfc989add.css" data-n-g=""/><link rel="preload" href="/_next/static/css/dcb6e784b5764eb2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/dcb6e784b5764eb2.css" data-n-p=""/><link rel="preload" href="/_next/static/css/18ed324149c36ad6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/18ed324149c36ad6.css" data-n-p=""/><link rel="preload" href="/_next/static/css/fc1808d4a21f9a59.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fc1808d4a21f9a59.css" data-n-p=""/><link rel="preload" href="/_next/static/css/91dca0714ee7c672.css" as="style"/><link rel="stylesheet" href="/_next/static/css/91dca0714ee7c672.css" data-n-p=""/><link rel="preload" href="/_next/static/css/5fa2b4dd18e20c37.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5fa2b4dd18e20c37.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-f861fd4ab584f5dc.js" defer=""></script><script src="/_next/static/chunks/framework-56eb74ff06128874.js" defer=""></script><script src="/_next/static/chunks/main-0785f91db64576b8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-49535d849d7ff472.js" defer=""></script><script src="/_next/static/chunks/832-1733acefac904547.js" defer=""></script><script src="/_next/static/chunks/1122-3f2be94f653ef8d7.js" defer=""></script><script src="/_next/static/chunks/5973-f4f8c1167cd72fd3.js" defer=""></script><script src="/_next/static/chunks/1306-699e21fe04afb846.js" defer=""></script><script src="/_next/static/chunks/5888-731e387770363bca.js" defer=""></script><script src="/_next/static/chunks/6010-8790d8642bb38cba.js" defer=""></script><script src="/_next/static/chunks/7963-cdf3ff11e5b4f7ec.js" defer=""></script><script src="/_next/static/chunks/9325-e0903af1b37d2118.js" defer=""></script><script src="/_next/static/chunks/2291-52f1771184c676af.js" defer=""></script><script src="/_next/static/chunks/1825-58a66b9e99dc9bcd.js" defer=""></script><script src="/_next/static/chunks/7775-e851d12df43ee2d5.js" defer=""></script><script src="/_next/static/chunks/6075-8fa8c2611ee20dbb.js" defer=""></script><script src="/_next/static/chunks/7709-8138af14dcab3e76.js" defer=""></script><script src="/_next/static/chunks/pages/packer/docs/%5B...page%5D-18f749436321fb97.js" defer=""></script><script src="/_next/static/nncsJPkcjBBboMigFclSM/_buildManifest.js" defer=""></script><script src="/_next/static/nncsJPkcjBBboMigFclSM/_ssgManifest.js" defer=""></script></head><body><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://artemis.hashicorp.com/script/"+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics._cdn="https://artemis.hashicorp.com";analytics.SNIPPET_VERSION="4.1.0";}}();</script><div id="__next"><div class="style_root__dZhZu style_vagrant__u39kD style_isShown__D4mb6"><a href="https://www.hashicorp.com/blog/hashicorp-joins-ibm" class="style_linkElem__hCESK"><span class="style_textContainer__6CuI7 g-grid-container"><span class="style_tag__jbHGz g-type-body-small-x-strong">News<!-- --> </span><span class="style_text__rwS0u g-type-body-small">HashiCorp to join IBM to accelerate multi-cloud automation.<span class="style_linkText__E8GJf g-type-body-small-x-strong"> <!-- -->Read the blog â†’</span></span></span></a><button class="style_closeButton__57J9w"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 5 5 15M5 5l10 10"/></svg></div><span style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal">Dismiss alert</span></button></div><script type="text/javascript">
(function checkDismissAlertBanner() {
  try {
    if (document.cookie.includes('banner_hashicorp-to-join-ibm-to-accelerate-multi-cloud-automation.=1')) {
      const element = document.querySelector('.style_root__dZhZu')
      element.classList.remove('style_isShown__D4mb6')
    }
  } catch (_) {
    // do nothing
  }
})()
</script><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="core-dev-dot-layout_root__MT1PZ"><div class="base-layout_root___qiZs" data-layout="base-new"><div class="base-layout_header__XhkxS"><header class="navigation-header_root__oE_HT"><div class="navigation-header_leftSide__V0xlc"><div class="product-page-content_productsDropdown__haUyw"><div class="dropdown-menu_root__Hwy5S"><div class="dropdown-menu_activatorWrapper__LxPRt"><button aria-controls="navigation-header-menu-react-aria-1" aria-expanded="false" aria-label="Main menu" class="dropdown-menu_activator__xXb00 g-focus-ring-from-box-shadow-dark product-page-content_productsDropdownButton__bnKKs" data-heap-track="navigation-header-dropdown-menu-activator"><span class="dropdown-menu_activatorLeadingIcon__YQQlH"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true" class="product-page-content_productsDropdownIcon__gXtly"><g fill="currentColor"><path d="M10.336 1.5L2 6.268v11.456l3.131 1.793V8.061l5.205-2.979V1.5z"></path><path d="M13.664 1.5v9.123h-3.328V7.219L7.203 9.012V20.7l3.133 1.796V13.4h3.328v3.381l3.131-1.793V3.293L13.664 1.5z"></path><path d="M22 17.732L13.664 22.5v-3.582l5.203-2.98V4.484L22 6.276v11.456z"></path></g></svg></span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="dropdown-menu_activatorTrailingIcon__r_cCd"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button></div><div class="dropdown-menu_dropdownContainer__AZWxN product-page-content_productsDropdownPane__bcdWz" id="navigation-header-menu-react-aria-1" style="display:none"><ul class="dropdown-menu_itemGroup__GEq4r"><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M7.846 2.574a.25.25 0 01.308 0l5.25 4.12a.25.25 0 01.096.196v7.36a.75.75 0 001.5 0V6.89a1.75 1.75 0 00-.67-1.377L9.08 1.394a1.75 1.75 0 00-2.16 0l-5.25 4.12A1.75 1.75 0 001 6.89v7.36a.75.75 0 001.5 0V6.89a.25.25 0 01.096-.196l5.25-4.12z"></path><path d="M6.5 14.25V10.5h3v3.75a.75.75 0 001.5 0v-4C11 9.56 10.44 9 9.75 9h-3.5C5.56 9 5 9.56 5 10.25v4a.75.75 0 001.5 0z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">HashiCorp Developer</span></div></div></a></li></ul><hr class="dropdown-menu_itemGroupDivider__X38aR"/><ul class="dropdown-menu_itemGroup__GEq4r"><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/hcp"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M6.835.6L1 3.96v8.074l2.192 1.264V5.224l3.643-2.1V.6z"></path><path d="M9.165.6v6.43h-2.33v-2.4L4.642 5.894v8.237l2.193 1.266v-6.41h2.33v2.383l2.192-1.264V1.864L9.165.6z"></path><path d="M15 12.04L9.165 15.4v-2.525l3.642-2.1V2.703L15 3.966v8.073z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">HashiCorp Cloud Platform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/terraform"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-terraform-brand)"><path d="M1 0v5.05l4.349 2.527V2.526L1 0zM10.175 5.344l-4.35-2.525v5.05l4.35 2.527V5.344zM10.651 10.396V5.344L15 2.819v5.05l-4.349 2.527zM10.174 16l-4.349-2.526v-5.05l4.349 2.525V16z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Terraform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/packer"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Packer</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/consul"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Consul</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/vault"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-vault-brand)" d="M0 0l7.971 15.516L16 0H0zm6.732 6.16h-1.27V4.89h1.27v1.27zm0-1.906h-1.27V2.985h1.27v1.269zm1.904 3.81h-1.27v-1.27h1.27v1.27zm0-1.905h-1.27V4.89h1.27v1.27zm0-1.905h-1.27V2.985h1.27v1.269zm1.894 1.905H9.26V4.89h1.27v1.27zM9.26 4.254V2.985h1.27v1.269H9.26z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Vault</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/boundary"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-boundary-brand)"><path d="M4.81 15v-1.085h2.25v-.67H5.968v-1.093h5.149L8.726 8l2.392-4.154H5.84v5.76H3V1h9.775l1.631 2.832L12.006 8l2.448 4.252L12.872 15H4.81z"></path><path d="M5.248 12.152h-1.09v1.092h1.09v-1.092zM3 13.907h1.09v1.092H3v-1.092z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Boundary</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/nomad"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-nomad-brand)" d="M8 0L1 4v8l7 4 7-4V4L8 0zm3.119 8.797L9.254 9.863 7.001 8.65v2.549l-2.118 1.33v-5.33l1.68-1.018 2.332 1.216V4.794l2.23-1.322-.006 5.325z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Nomad</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/waypoint"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-waypoint-brand)"><path d="M4 5.312h1.334L10 13.4l3.334-5.777L10.666 3H8l2.666 4.623L10 8.778 6.667 3H0l6 10.4 1.333-2.31L4 5.311zM14.002 6.463L16 3h-3.996l1.998 3.463z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Waypoint</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" data-heap-track="navigation-header-dropdown-menu-link" aria-describedby="" href="/vagrant"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="#1868F2" d="M13.08.75L9.924 2.58v1.123L8 8.245 6.076 3.703V2.58L2.92.75 1 1.864v1.293l4.276 10.514L8 15.25l2.724-1.579L15 3.157V1.864L13.08.75z"></path><path fill="#0850C5" d="M15 1.865l-3.157 1.829v1.124L9.28 10.57 8 11.312v3.939l2.724-1.579L15 3.158V1.865zM6.076 3.703V2.58l-1.92 1.113v1.125l2.564 5.751L8 9.827V8.245L6.076 3.703z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Vagrant</span></div></div></a></li></ul></div></div></div><div class="product-page-content_productLinkAndNav__YTzcr"><a aria-label="Packer home" class="product-icon-text-link_root__bNTSz g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-product-logo-link" aria-describedby="" href="/packer"><div class="product-icon-text-lockup_root__358wV"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="product-icon-text-lockup_icon__Zp_5o"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg><span class="product-icon-text-lockup_text__nHTL7 hds-typography-body-200">Packer</span></div></a><nav class="nav-bar-list-container_nav__C_i0_"><ul class="nav-bar-list-container_ul___04HI"><li><a aria-label="Packer Install" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/packer/install"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Install</span></a></li><li><a aria-label="Packer Tutorials" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/packer/tutorials"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Tutorials</span></a></li><li><a aria-label="Packer Documentation" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/packer/docs"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Documentation</span></a></li><li><a aria-label="Packer Guides" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/packer/guides"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Guides</span></a></li><li><a aria-label="Packer Integrations" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="" href="/packer/integrations"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Integrations</span></a></li><li><a aria-label="Packer Try Cloud" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" data-heap-track="navigation-header-primary-nav-link" aria-describedby="opens-in-new-tab-label-react-aria-18" target="_blank" href="https://portal.cloud.hashicorp.com/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Try Cloud</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-18">(opens in new tab)</span></li></ul></nav></div></div><div class="navigation-header_rightSide___Vvh_"><button aria-label="Search" class="command-bar-activator_root__qgVMy g-focus-ring-from-box-shadow-dark"><span class="command-bar-activator_left__ATQTg"><span class="command-bar-activator_leadingIcon__jECP5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M7.25 2a5.25 5.25 0 103.144 9.455l2.326 2.325a.75.75 0 101.06-1.06l-2.325-2.326A5.25 5.25 0 007.25 2zM3.5 7.25a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0z" clip-rule="evenodd"></path></svg></span><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular command-bar-activator_text__pTZN_">Search</span></span><span class="command-bar-activator_right__XejfJ"><span class="g-screen-reader-only">Command or control key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="cmd-ctrl-icon_root___TToz"><svg xmlns="http://www.w3.org/2000/svg" width="41" height="11" fill="none" viewBox="0 0 41 11"><path fill="#fff" fill-rule="evenodd" d="M4.125 2.063V3h2.25v-.937a2.062 2.062 0 1 1 2.063 2.062H7.5v2.25h.938a2.062 2.062 0 1 1-2.063 2.063V7.5h-2.25v.938a2.062 2.062 0 1 1-2.062-2.063H3v-2.25h-.937a2.062 2.062 0 1 1 2.062-2.062m-2.062-.938a.937.937 0 1 0 0 1.875H3v-.937a.937.937 0 0 0-.937-.938M7.5 7.5v.938a.937.937 0 1 0 .938-.938zM6.375 6.375v-2.25h-2.25v2.25zM2.063 7.5H3v.938a.937.937 0 1 1-.937-.938M7.5 3h.938a.937.937 0 1 0-.938-.937z" clip-rule="evenodd"/><path fill="#fff" d="M15.09 10.5 18.085 0h-1.097L14 10.5zM26.387 5.308c-.183-1.445-1.263-2.534-3.05-2.534C21.264 2.774 20 4.247 20 6.61c0 2.41 1.27 3.89 3.344 3.89 1.76 0 2.86-1.034 3.043-2.5H25.02c-.184.808-.792 1.247-1.682 1.247-1.172 0-1.898-.994-1.898-2.637 0-1.61.72-2.583 1.898-2.583.942 0 1.518.555 1.681 1.281zM28.6 1.041v1.897h-1.133v1.178H28.6v4.281c0 1.432.622 2.007 2.186 2.007.275 0 .537-.034.766-.075V9.158c-.196.02-.32.034-.537.034-.7 0-1.008-.35-1.008-1.15V4.115h1.545V2.938h-1.545V1.041zM33.207 10.356h1.407V5.911c0-1.048.752-1.767 1.819-1.767.249 0 .667.048.785.082V2.842a3.372 3.372 0 0 0-.628-.054c-.93 0-1.721.527-1.924 1.26h-.105v-1.13h-1.354zM38.638 10.356h1.407V0h-1.407z"/></svg></div></span><span class="g-screen-reader-only">K key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="k-icon_root__a_5pR"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="10" fill="none" viewBox="0 0 8 10"><path fill="#fff" d="M1.512 9.84v-3l.986-1.147L5.445 9.84h1.704L3.46 4.745 6.857.84H5.244L1.61 5.094h-.098V.84H.15v9z"/></svg></div></span></span></button><div class="navigation-header_authenticationControls__EP1LY"><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj"><button aria-controls="disclosure-react-aria-19-content" aria-expanded="false" aria-label="User menu" class="disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo navigation-header_userDropdownDisclosureActivator__RayIV g-focus-ring-from-box-shadow-dark activator_hasIcon__5HO6W g-focus-ring-from-box-shadow"><span class="activator_childrenWrapper__kaK0w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M12 3a5 5 0 100 10 5 5 0 000-10zM8.5 8a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0z" clip-rule="evenodd"></path><path d="M7.75 14.5A4.75 4.75 0 003 19.25v1a.75.75 0 001.5 0v-1A3.25 3.25 0 017.75 16h8.5a3.25 3.25 0 013.25 3.25v1a.75.75 0 001.5 0v-1a4.75 4.75 0 00-4.75-4.75h-8.5z"></path></g></svg></span><span class="activator_chevronWrapper__4_AVG"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></span></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-19-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><button class="list-item_button__nXy5K g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign in</span></button></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" aria-describedby="" href="/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign up</span></a></li><li class="list-item_root__ZdUej"><hr class="list-item_separator__cBVLs"/></li><li class="list-item_root__ZdUej user-dropdown-switcher_listItem__Q_GIj hds-font-weight-medium"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-21">Theme</label></li></ul></div></div></div><button aria-label="Open navigation menu" class="navigation-header_mobileMenuButton__74S4w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path d="M2 5.75A.75.75 0 012.75 5h18.5a.75.75 0 010 1.5H2.75A.75.75 0 012 5.75zM2 11.75a.75.75 0 01.75-.75h18.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2.75 17a.75.75 0 000 1.5h18.5a.75.75 0 000-1.5H2.75z"></path></g></svg></button></div></header></div><div class="base-layout_contentArea__BMvQn"><div class="sidebar-sidecar-layout_root__h5rD8 sidebar-sidecar-layout_mainWidth-narrow__FhCbs"><div class="mobile-menu-container_root__fPUFu sidebar-sidecar-layout_sidebarContainer__4fcF8"><div class="sidebar-sidecar-layout_sidebarContentWrapper__ftn5q"><div class="sidebar_sidebar___fTlC"><div class="sidebar_backToLinkWrapper__F6iLs"><div class="sidebar-back-to-link_root__z_Hj1"><a class="standalone-link_standaloneLink__ahuej g-focus-ring-from-box-shadow standalone-link_primary__ESNCA" data-heap-track="standalone-link sidebar-back-to-link" aria-describedby="" href="/packer"><div class="standalone-link_standaloneLinkContents__4I2XN standalone-link_medium__J2yVM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M10.795 3.235a.75.75 0 01-.03 1.06L6.842 8l3.923 3.705a.75.75 0 01-1.03 1.09l-4.5-4.25a.75.75 0 010-1.09l4.5-4.25a.75.75 0 011.06.03z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__7GEyG">Packer Home</span></div></a></div></div><div class="sidebar_filterInputWrapper__0_l_Y"><div class="filter-input_filterInputContainer__thZt3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="filter-input_filterIcon__UET0p filter-input_sharedIconColorAndPositioning__hXPit"><g fill="currentColor"><path d="M1 3.75A.75.75 0 011.75 3h12.5a.75.75 0 010 1.5H1.75A.75.75 0 011 3.75zM3.5 7.75A.75.75 0 014.25 7h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM6.75 11a.75.75 0 000 1.5h2.5a.75.75 0 000-1.5h-2.5z"></path></g></svg><input class="filter-input_filterInput__hga4N g-focus-ring-from-box-shadow" placeholder="Filter sidebar" autoComplete="off" autoCorrect="off" autoCapitalize="none" spellcheck="false" value=""/></div></div><nav aria-labelledby="sidebar-label" class="sidebar_nav__IworY" id="sidebar-nav"><div class="g-screen-reader-only"><h2 class="sidebar-headings_root__tGfxC" id="sidebar-label">Documentation</h2></div><ul class="sidebar_navList__4Rg4g"><li><a class="sidebar-nav-highlight-item_root___pPhp g-focus-ring-from-box-shadow sidebar-nav-highlight-item_theme-packer__I5KHY" aria-describedby="" href="/packer/docs"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="sidebar-nav-highlight-item_icon__G8JxG"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg><span class="sidebar-nav-highlight-item_text__VORFJ hds-typography-body-200">Documentation</span></a></li><li id="sidebar-nav-item-0"><button aria-controls="sidebar-nav-item-0-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-0-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">What is Packer?</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-4"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/hcp"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">HCP Packer</span></a></li><li id="sidebar-nav-item-5"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-6"><a aria-current="page" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/aws-get-started"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Getting Started with AWS</span></a></li><li id="sidebar-nav-item-7"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-8"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/terminology"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Terminology</span></a></li><li id="sidebar-nav-item-9"><button aria-controls="sidebar-nav-item-9-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-9-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Commands (CLI)</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-25"><button aria-controls="sidebar-nav-item-25-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-25-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Templates</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-165"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-166"><button aria-controls="sidebar-nav-item-166-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-166-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Communicators</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-170"><button aria-controls="sidebar-nav-item-170-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-170-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Builders</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-176"><button aria-controls="sidebar-nav-item-176-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-176-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Data Sources</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-185"><button aria-controls="sidebar-nav-item-185-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-185-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Provisioners</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-196"><button aria-controls="sidebar-nav-item-196-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-196-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Post-Processors</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-204"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-205"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/install"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Installing Packer</span></a></li><li id="sidebar-nav-item-206"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/configure"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Configuring Packer</span></a></li><li id="sidebar-nav-item-207"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-208"><button aria-controls="sidebar-nav-item-208-list" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="sidebar-nav-item-208-button" data-heap-track="sidebar-nav-submenu-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Plugins</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button></li><li id="sidebar-nav-item-218"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/partnerships"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Integration Program</span></a></li><li id="sidebar-nav-item-219"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/community-tools"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Community Tools</span></a></li><li id="sidebar-nav-item-220"><hr class="sidebar-horizontal-rule_root__UY7oh"/></li><li id="sidebar-nav-item-221"><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/packer/docs/debugging"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Debugging</span></a></li></ul><hr class="sidebar-horizontal-rule_root__UY7oh"/><ul class="sidebar_navList__4Rg4g"><li><h3 class="sidebar-headings_root__tGfxC">Resources</h3></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" aria-describedby="" href="/tutorials/library?product=packer"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Tutorial Library</span></a></li><li><a aria-label="Community Forum. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-33" target="_blank" href="https://discuss.hashicorp.com/c/packer/23"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Community Forum</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-33">(opens in new tab)</span></li><li><a aria-label="Support. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-34" target="_blank" href="https://www.hashicorp.com/customer-success"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Support</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-34">(opens in new tab)</span></li><li><a aria-label="GitHub. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" data-heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-35" target="_blank" href="https://github.com/hashicorp/packer"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">GitHub</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-35">(opens in new tab)</span></li></ul></nav></div></div></div><div class="sidebar-sidecar-layout_contentWrapper__Z5BK4"><div class="sidebar-sidecar-layout_paddedAreaWrapper___S_Ff"><div class="sidebar-sidecar-layout_breadcrumbContainer__3uz7P"><div class="sidebar-sidecar-layout_breadcrumbMaxWidth__coOcu"><nav aria-label="Breadcrumb" class="breadcrumb-bar_root__wd_C5"><ol class="breadcrumb-bar_listRoot__8eupO"><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/">Developer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/packer">Packer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" data-heap-track="breadcrumb-bar-item" aria-describedby="" href="/packer/docs">Documentation</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><span class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" aria-current="page" data-heap-track="breadcrumb-bar-item">Getting Started with AWS</span></li></ol></nav></div></div><div class="sidebar-sidecar-layout_mainAndSidecar__UDm3Z"><main id="main" class="sidebar-sidecar-layout_main__0SN51"><div class="docs-page-heading_root__QuBg_ docs-view_docsPageHeading___xkrK"><div class="docs-page-heading_pageHeadingWrapper__LEMQ7"><h1 class="hds-typography-display-600 hds-font-weight-bold docs-plain-page-heading_root__HzRuX g-offset-scroll-margin-top" id="aws-get-started">aws-get-started</h1></div></div><div class="dev-dot-content_root__UJDct hds-typography-body-300"><div class="docs-view_mdxContent___uMnx"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This post is the alternative of
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://qubitpi.github.io/hashicorp-packer/packer/tutorials/aws-get-started">Getting Started with AWS</a> and
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/terraform/tutorials/provision/packer#build-your-packer-image">Provision Infrastructure with Packer</a>, whose contents
have been closed sourced by HashiCorp.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">HashiCorp Packer automates the creation of any type of machine image, including AWS AMIs. You&#x27;ll build an Ubuntu
machine image on AWS in this tutorial.</p><h2 id="install-packer" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="install packer permalink" href="/packer/docs/aws-get-started#install-packer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Install Packer</h2><h3 id="macos" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="macos permalink" href="/packer/docs/aws-get-started#macos"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>macOS</h3><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">brew tap hashicorp/tap</span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">brew <span class="token function">install</span> hashicorp/tap/packer</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h2 id="build-an-image" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="build an image permalink" href="/packer/docs/aws-get-started#build-an-image"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Build an Image</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">With Packer installed, it is time to build your first image. In this tutorial, we will build a <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">t2.micro</code>
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://aws.amazon.com/ec2/">Amazon EC2 AMI</a>.</p><blockquote class="mdx-blockquote_blockquote__h7k9H"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note</strong>: This tutorial will provision resources that qualify under the AWS free-tier. If our account doesn&#x27;t qualify
under the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://aws.amazon.com/free/">AWS free-tier</a>, Packer is not responsible for any charges that may incur.</p></blockquote><h3 id="write-packer-template" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="write packer template permalink" href="/packer/docs/aws-get-started#write-packer-template"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Write Packer Template</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">A <strong>Packer template</strong> is a configuration file that defines the image we want to build and how to build it. Packer
templates use the <strong>Hashicorp Configuration Language</strong> (<strong>HCL</strong>).</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">HashiCorp has a comprehensive <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/terraform/tutorials/provision/packer">tutorial</a> on how
to build an image and deploys an instance of that image to AWS. The tutorial introduces a standard directory structure
for storing HashiCorp related files. This structure can be found in their
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/stealth-tech-startup/learn-terraform-provisioning">tutorial code repo</a>. We will be using that as
our reference file structure:</p><div class="g-code-block style_root__i1k0c mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">.<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">â””â”€â”€ my-app/<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”œâ”€â”€ hashicorp/<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”‚   â”œâ”€â”€ images/<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”‚   â”‚   â”œâ”€â”€ aws-my-app.pkr.hcl<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”‚   â”‚   â””â”€â”€ variables.pkr.hcl<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”‚   â”œâ”€â”€ instances/<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”‚   â”‚   â””â”€â”€ main.tf<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”‚   â””â”€â”€ scripts/<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”‚       â””â”€â”€ script.sh<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â”œâ”€â”€ src<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    â””â”€â”€ ...<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <strong>images/</strong> contains Packer related files</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">The <strong>scripts/</strong> directory has the post-build script for the AMI image, which we will cover later</li></ul></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <strong>instances/</strong> contains Terraform related files</p></li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Create the file <strong>aws-my-ami.pkr.hcl</strong> and add the following HCL block to it, and save the file.</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">packer</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token keyword">required_plugins</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">amazon</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;&gt;= 0.0.2&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">&quot;github.com/hashicorp/amazon&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">source <span class="token string">&quot;amazon-ebs&quot;</span> <span class="token string">&quot;my-ami&quot;</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">ami_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;my-ami&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">force_deregister</span> <span class="token punctuation">=</span> <span class="token string">&quot;true&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">force_delete_snapshot</span> <span class="token punctuation">=</span> <span class="token string">&quot;true&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">instance_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;t2.micro&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">&quot;us-west-1&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token keyword">source_ami_filter</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">filters</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;ubuntu/images/*ubuntu-*-20.04-amd64-server-*&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">root-device-type</span> <span class="token punctuation">=</span> <span class="token string">&quot;ebs&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">virtualization-type</span> <span class="token punctuation">=</span> <span class="token string">&quot;hvm&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">most_recent</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">owners</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;099720109477&quot;</span><span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">ssh_username</span> <span class="token punctuation">=</span> <span class="token string">&quot;ubuntu&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">build</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;install-my-ami&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">sources</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token string">&quot;source.amazon-ebs.my-ami&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token keyword">provisioner<span class="token type variable"> &quot;shell&quot; </span></span><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">environment_vars</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token string">&quot;GH_PAT_READ=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">gh_pat_read</span><span class="token punctuation">}</span></span>&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">script</span> <span class="token punctuation">=</span> <span class="token string">&quot;../scripts/setup.sh&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This is a complete Packer template that we will use to build an AWS Ubuntu AMI in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">us-west-1</code> region. In the
following sections, we will review each block of this template in more detail.</p><h4 id="packer-block" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="packer block permalink" href="/packer/docs/aws-get-started#packer-block"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Packer Block</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The `packer {} block contains Packer settings, including specifying a required Packer version.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In addition, we will find <strong>required_plugins</strong> block in the Packer block, which specifies all the plugins required by
the template to build our image. Even though Packer is packaged into a single binary, it depends on plugins for much of
its functionality. Some of these plugins, like the Amazon AMI Builder (AMI builder) which we will to use, are built,
maintained, and distributed by HashiCorp; but anyone can write and use plugins.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Each plugin block contains a <strong>version</strong> and <strong>source</strong> attribute. Packer will use these attributes to download the
appropriate plugin(s).</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">The <em>source</em> attribute is only necessary when requiring a plugin outside the HashiCorp domain. We can find the full
list of HashiCorp and community maintained builders plugins in the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/builders">Packer Builders</a> documentation
page.</li><li class="mdx-lists_listItem__nkqhg">The <em>version</em> attribute is optional, but we recommend using it to constrain the plugin version so that Packer does
not install a version of the plugin that does not work with our template. If we do not specify a plugin version,
Packer will automatically download the most recent version during initialization.</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In the example template above, Packer will use the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/index.mdx">Packer Amazon AMI builder plugin</a>
that is greater than version 0.0.2.</p><h4 id="source-block" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="source block permalink" href="/packer/docs/aws-get-started#source-block"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Source Block</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <strong>source</strong> block configures a specific builder plugin, which is then invoked by a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/aws-get-started#packer-block">build block</a>.
Source blocks use <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/builders">builders</a> and <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/communicators">communicators</a> to define what kind of
virtualization to use, how to launch the image we want to provision, and how to connect to it. Builders and
communicators are bundled together and configured side-by-side in a source block. A <em>source</em> can be reused across
multiple <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/aws-get-started#the-build-block">builds</a>, and we can use multiple sources in a single build. A builder plugin is a component
of Packer that is responsible for creating a machine and turning that machine into an image.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">A source block has two important labels: a builder type and a name. These two labels together will allow us to uniquely
reference sources later on when we define build runs. In the example template above, the builder type is <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">amazon-ebs</code>
and the name is <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">my-ami</code>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Each builder has its own unique set of configuration attributes. The
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/ebs.mdx">amazon-ebs</a> builder
launches the source AMI, runs provisioners within this instance, then repackages it into an EBS-backed AMI.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In the example template, the <em>amazon-ebs</em> builder configuration launches a <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">t2.micro</code> AMI in the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">us-west-1</code> region
using an <em>ubuntu:20.04</em> AMI as the base image, then creates an image named &quot;my-ami&quot; from that instance. The builder
will create all the temporary resources necessary (for example, keypairs, security group rules, etc..) to temporarily
access the instance while the image is being created.</p><blockquote class="mdx-blockquote_blockquote__h7k9H"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note that the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">owners      = [&quot;099720109477&quot;]</code> is the &quot;owner&quot; who publishes the Ubuntu AMI image, not the image ID</p></blockquote><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This example template also uses the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/communicators/ssh">SSH communicator</a>. By specifying the <strong>ssh_username</strong>
attribute, Packer is able to SSH into EC2 instance using a temporary keypair and security group to provision our
instances.</p><blockquote class="mdx-blockquote_blockquote__h7k9H"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>About <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">force_deregister = &quot;true&quot;</code> &amp; <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">force_delete_snapshot = &quot;true&quot;</code></strong></p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Force Packer to first deregister an existing AMI if one with the same name already exists; then delete snapshots
associated with AMIs, which have been deregistered by <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">force_deregister</code>. This is very important because otherwise
Packer fails by complaining that AMI with the same name is already there. In addition, we don&#x27;t have to worry about
cleaning up AMI on AWS; we simply keep AMI version controlled as code rather than a hard-to-main AMI infrastructures.
See <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://awsbloglink.wordpress.com/2017/12/11/how-to-overwrite-aws-ec2-ami-with-packer/">this post</a> and
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/ebs.mdx">Packer doc</a> for more
info</p></blockquote><h4 id="the-build-block" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="the build block permalink" href="/packer/docs/aws-get-started#the-build-block"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>The Build Block</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <strong>build block</strong> defines what Packer should do with the EC2 instance after it launches.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In the example template, the build block references the AMI defined by the source block above
(<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">source.amazon-ebs.my-ami</code>).</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">build</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">sources</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token string">&quot;source.amazon-ebs.ubuntu&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h5 id="provisioners" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h5__d2ufM"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="provisioners permalink" href="/packer/docs/aws-get-started#provisioners"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Provisioners</h5><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Historically, pre-baked images have been frowned upon because changing them was so tedious and slow. Because Packer is
completely automated (including provisioning) images can be changed quickly and integrated with modern configuration
management tools such as Chef or Puppet. Using provisioners allow us to do exactly for that</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Notice that the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">source.amazon-ebs.my-ami</code> uses the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/communicators/ssh">SSH communicator</a>. By specifying the
<em>ssh_username</em> attribute, Packer is able to SSH into EC2 instance using a temporary keypair and security group to
provision our instances.</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">source <span class="token string">&quot;amazon-ebs&quot;</span> <span class="token string">&quot;my-ami&quot;</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token comment">## ...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">ssh_username</span> <span class="token punctuation">=</span> <span class="token string">&quot;ubuntu&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Our provisioner block is in our Packer template, inside the build block and underneath the <em>sources</em> assignment:</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">build</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  ...<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token keyword">provisioner<span class="token type variable"> &quot;shell&quot; </span></span><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">environment_vars</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token string">&quot;GH_PAT_READ=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">gh_pat_read</span><span class="token punctuation">}</span></span>&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">script</span> <span class="token punctuation">=</span> <span class="token string">&quot;../scripts/setup.sh&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This block defines a <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/docs/provisioners/shell">shell provisioner</a> which sets an environment variable named GH_PAT_READ
in the shell execution environment and runs the script at a specified relative path. The
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://qubitpi.github.io/hashicorp-packer/packer/docs/provisioners/shell#environment_vars"><strong>environment_vars</strong></a>
option is used to pass argument into the provisioner script so that the script can reference it via <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">$GH_PAT_READ</code>:</p><div class="g-code-block style_root__i1k0c language-bash mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token shebang important">#!/bin/bash</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token builtin class-name">set</span> -x<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> upgrade -y<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common -y<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">sudo</span> add-apt-repository ppa:deadsnakes/ppa<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3.10 -y<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3-pip -y<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">git</span> clone https://<span class="token variable">$GH_PAT_READ</span>@github.com/MyGitHub/my-app.git<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token builtin class-name">cd</span> /home/ubuntu/my-app<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">sudo</span> pip3 <span class="token function">install</span> <span class="token builtin class-name">.</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The script, when IAM image is up for customization, installs some system dependencies, clones some repositories, and
setup the app in the script. Note that the repository clone uses the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://stackoverflow.com/a/70320541">GitHub PAT token</a>, which we pass in</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We&#x27;ve passed dynamic data from Template file into our provisioner script. However, our Packer template is usually run
in some CI/CD process and those dynamic data usually originate from the CI/CD configurations. How do we pass those
configurations into the Packer build/template then?</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We can use input variables to serve as parameters for a Packer build, allowing aspects of the build to be customized
without altering Packer template. In addition, Packer variables are useful when we want to reference a specific value
throughout our template. To do that, we have the following variable block in our
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/guides/hcl/variables"><strong>hashicorp/images/variables.pkr.hcl file</strong></a>::</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">variable<span class="token type variable"> &quot;gh_pat_read&quot; </span></span><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">type</span> <span class="token punctuation">=</span>  string<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">sensitive</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h2 id="authenticating-to-aws" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="authenticating to aws permalink" href="/packer/docs/aws-get-started#authenticating-to-aws"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Authenticating to AWS</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Before we can build the AMI, we need to provide our AWS credentials to Packer. These credentials have permissions to
create, modify and delete EC2 instances. Refer to the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/index.mdx#iam-task-or-instance-role">documentation</a>
to find the full list IAM permissions required to run the <em>amazon-ebs</em> builder.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To allow Packer to access our IAM user credentials, set our AWS access key ID as an environment variable.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">AWS_ACCESS_KEY_ID</span><span class="token operator">=</span><span class="token string">&quot;&lt;YOUR_AWS_ACCESS_KEY_ID&gt;&quot;</span></span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">AWS_SECRET_ACCESS_KEY</span><span class="token operator">=</span><span class="token string">&quot;&lt;YOUR_AWS_SECRET_ACCESS_KEY&gt;&quot;</span></span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="alert alert-warning g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Note</strong>: If we don&#x27;t have access to IAM user credentials, use another authentication method described in the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/index.mdx#authentication">Packer documentation</a>.</p></div><h2 id="initialize-packer-configuration" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="initialize packer configuration permalink" href="/packer/docs/aws-get-started#initialize-packer-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Initialize Packer Configuration</h2><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">packer init <span class="token builtin class-name">.</span></span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Installed plugin github.com/hashicorp/amazon v0.0.2 in &quot;/Users/youruser/.packer.d/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v0.0.2_x5.0_darwin_amd64&quot;</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Packer will download the plugin we&#x27;ve defined above. In this case, Packer will download the Packer Amazon plugin that
is greater than version 0.0.2. We can run packer init as many times as you&#x27;d like. If we already have the plugins we
need, Packer will exit without an output.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Packer has now downloaded and installed the Amazon plugin. It is ready to build the AMI!</p><h2 id="formatting-and-validating-packer-template" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="formatting and validating packer template permalink" href="/packer/docs/aws-get-started#formatting-and-validating-packer-template"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Formatting and Validating Packer Template</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We recommend using consistent formatting in all template files. The packer <strong>fmt command</strong> updates templates in the
current directory for readability and consistency.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">By formatting our template. Packer will print out the names of the files it modified, if any. In this case, our
template file was already formatted correctly, so Packer won&#x27;t return any file names.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">packer <span class="token function">fmt</span> <span class="token builtin class-name">.</span></span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We can also make sure our configuration is syntactically valid and internally consistent by using the packer <strong>validate
command</strong>. If Packer detects any invalid configuration, Packer will print out the file name, the error type and line
number of the invalid configuration. The example configuration provided above is valid, so Packer will return nothing.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">packer validate <span class="token builtin class-name">.</span></span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h2 id="building-packer-image" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="building packer image permalink" href="/packer/docs/aws-get-started#building-packer-image"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Building Packer Image</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Build the image with the <strong>packer build</strong> command. Packer will print output similar to what is shown below.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">packer build aws-my-ami.pkr.hcl</span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  learn-packer.amazon-ebs.ubuntu: output will be in this color.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Prevalidating any provided VPC information</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Prevalidating AMI Name: learn-packer-linux-aws</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">      learn-packer.amazon-ebs.ubuntu: Found Image ID: ami-0dd273d94ed0540c0</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Creating temporary keypair: packer_608a6435-e0b2-c633-95f0-bf168f01e891</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Creating temporary security group for this instance: packer_608a6437-6b48-288e-6d5e-c085366a5541</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Authorizing access to port 22 from [0.0.0.0/0] in the temporary security groups...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Launching a source AWS instance...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Adding tags to source instance</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">      learn-packer.amazon-ebs.ubuntu: Adding tag: &quot;Name&quot;: &quot;Packer Builder&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">      learn-packer.amazon-ebs.ubuntu: Instance ID: i-023d696a318e9594c</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Waiting for instance (i-023d696a318e9594c) to become ready...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Using ssh communicator to connect: 35.166.142.55</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Waiting for SSH to become available...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Connected to SSH!</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Stopping the source instance...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">      learn-packer.amazon-ebs.ubuntu: Stopping instance</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Waiting for the instance to stop...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Creating AMI learn-packer-linux-aws from instance i-023d696a318e9594c</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">      learn-packer.amazon-ebs.ubuntu: AMI: ami-0703a21445140541e</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Waiting for AMI to become ready...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Terminating the source AWS instance...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Cleaning up any extra volumes...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: No volumes to clean up, skipping</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Deleting temporary security group...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; learn-packer.amazon-ebs.ubuntu: Deleting temporary keypair...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  Build &#x27;learn-packer.amazon-ebs.ubuntu&#x27; finished after 3 minutes 5 seconds.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; Wait completed after 3 minutes 5 seconds</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  ==&gt; Builds finished. The artifacts of successful builds are:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  --&gt; learn-packer.amazon-ebs.my-ami: AMIs were created:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  us-west-2: ami-0703a21445140541e</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Now visit the AWS AMI page to verify that Packer successfully built your AMI.</p><h2 id="managing-the-image" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="managing the image permalink" href="/packer/docs/aws-get-started#managing-the-image"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Managing the Image</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Packer only builds images. It does not attempt to manage them in any way. After they&#x27;re built, it is up to us to launch
or destroy them as we see fit.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">After running the example above, our AWS account now has an AMI associated with it. AMIs are stored in S3 by Amazon so
we may be charged.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We can remove the AMI by first deregistering it on the AWS AMI management page. Next, delete the associated snapshot on
the AWS snapshot management page.</p><h2 id="deploying-packer-image-with-terraform" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="deploying packer image with terraform permalink" href="/packer/docs/aws-get-started#deploying-packer-image-with-terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Deploying Packer Image with Terraform</h2><h3 id="install-terraform" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="install terraform permalink" href="/packer/docs/aws-get-started#install-terraform"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Install Terraform</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We have seen Packer as HashiCorp&#x27;s open-source tool for creating machine images from source configuration. We can
configure Packer images with an operating system and software for our specific use-case.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://qubitpi.github.io/hashicorp-terraform/terraform/docs">Terraform</a> configuration for a compute instance can use
a Packer image to provision our instance without manual configuration.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In this section, we will deploy the AMI image we just created using Terraform.</p><h4 id="macos-1" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="macos permalink" href="/packer/docs/aws-get-started#macos-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>macOS</h4><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">brew tap hashicorp/tap</span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">brew <span class="token function">install</span> hashicorp/tap/terraform</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h3 id="building-infrastructure" class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="building infrastructure permalink" href="/packer/docs/aws-get-started#building-infrastructure"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Building Infrastructure</h3><h4 id="writing-configuration" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="writing configuration permalink" href="/packer/docs/aws-get-started#writing-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Writing Configuration</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To use the AMI in our Terraform environment, navigate to the instances directory (Each Terraform configuration must be
in its own working directory. Create a directory for your configuration).</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">cd</span> hashicorp/instances</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Create a <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">main.tf</code> file with the following contents:</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">terraform</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token keyword">required_providers</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">aws</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">&quot;hashicorp/aws&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;~&gt; 4.42.0&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">required_version</span> <span class="token punctuation">=</span> <span class="token string">&quot;&gt;= 0.14.5&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">provider<span class="token type variable"> &quot;aws&quot; </span></span><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">&quot;us-west-1&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">data <span class="token type variable">&quot;aws_ami&quot;</span></span> <span class="token string">&quot;latest-my-ami&quot;</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">most_recent</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">owners</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;255643778305&quot;</span><span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token keyword">filter</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">name</span>   <span class="token punctuation">=</span> <span class="token string">&quot;name&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">values</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;my-ami&quot;</span><span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token keyword">filter</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">name</span>   <span class="token punctuation">=</span> <span class="token string">&quot;virtualization-type&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token property">values</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;hvm&quot;</span><span class="token punctuation">]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">resource <span class="token type variable">&quot;aws_instance&quot;</span></span> <span class="token string">&quot;my-ami-instance&quot;</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">ami</span> <span class="token punctuation">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">data</span><span class="token punctuation">.</span><span class="token type variable">aws_ami</span><span class="token punctuation">.</span>latest-my-ami<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">instance_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;t2.micro&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">user_data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    #!/bin/bash</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    cd /home/ubuntu/my-ami</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    # command that starts app, e.g. flask --app server run --host=0.0.0.0</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">  EOF</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The file above in Terraform is known as a <strong>Terraform configuration</strong>. The following sections review each block of this
configuration in more detail.</p><blockquote class="mdx-blockquote_blockquote__h7k9H"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Hands-on:</strong> Getting the Latest AWS AMI ID with Terraform using <strong>data block</strong> and AWS API</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This is a great time saver, it stops us from having to hard code any AMI IDs within Terraform. This solution will
also enable us to get the latest AMIs in the region we are working in by dynamically querying the AWS API. Good
stuff!</p></blockquote><h5 id="terraform-block" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h5__d2ufM"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="terraform block permalink" href="/packer/docs/aws-get-started#terraform-block"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Terraform Block</h5><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <strong>terraform {}</strong> block contains Terraform settings, including the required providers Terraform will use to
provision our infrastructure. For each provider, the source attribute defines an optional hostname, a namespace, and
the provider type. Terraform installs providers from the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://registry.terraform.io/">Terraform Registry</a> by
default. In this example configuration, the aws provider&#x27;s source is defined as <em>hashicorp/aws</em>, which is shorthand for
<em>registry.terraform.io/hashicorp/aws</em>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We can also set a version constraint for each provider defined in the <em>required_providers</em> block. The version attribute
is optional, but we recommend using it to constrain the provider version so that Terraform does not install a version
of the provider that does not work with our configuration. If we do not specify a provider version, Terraform will
automatically download the most recent version during initialization.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To learn more, please reference the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://qubitpi.github.io/hashicorp-terraform/terraform/language/providers/requirements">provider source documentation</a>.</p><h5 id="providers" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h5__d2ufM"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="providers permalink" href="/packer/docs/aws-get-started#providers"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Providers</h5><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <strong>provider block</strong> configures the specified provider, in this case <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws</code>. A provider is a plugin that Terraform
uses to create and manage our resources.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We can use multiple provider blocks in our Terraform configuration to manage resources from different providers. We can
even use different providers together. For example, we could pass the IP address of our AWS EC2 instance to a
monitoring resource from DataDog.</p><h5 id="resources" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h5__d2ufM"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="resources permalink" href="/packer/docs/aws-get-started#resources"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Resources</h5><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Use <strong>resource blocks</strong> to define components of our infrastructure. A resource might be a physical or virtual component
such as an EC2 instance, or it can be a logical resource such as a Heroku application.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Resource blocks have two strings before the block: the resource type and the resource name. In this example, the
resource type is <em>aws_instance</em> and the name is <em>my-ami-instance</em>. The prefix of the type maps to the name of the
provider. In the example configuration, Terraform manages the aws<em>instance resource with the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws</code> provider. Together,
the resource type and resource name form a unique ID for the resource. For example, the ID for your EC2 instance is
_aws<!-- -->_<!-- -->instance.my-ami-instance</em>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Resource blocks contain arguments which we use to configure the resource. Arguments can include things like machine
sizes, disk image names, or VPC IDs. HashiCorp&#x27;s
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://qubitpi.github.io/hashicorp-terraform/terraform/language/providers">providers reference</a> lists the required
and optional arguments for each resource. For our EC2 instance, the example configuration sets the AMI ID to our
<em>my-ami</em> image we created above, and the instance type to <em>t2.micro</em>, which qualifies for AWS&#x27; free tier. It also sets
a tag to give the instance a name.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We are also baking a startup script directly into the creation of our EC2 instance using Terraform. We do that using an
inline bash script specified in the <strong>user_data</strong> parameter that, for example, starts a web server.</p><h4 id="initializing-the-directory" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="initializing the directory permalink" href="/packer/docs/aws-get-started#initializing-the-directory"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Initializing the Directory</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">When we create a new configuration - or check out an existing configuration from version control - we need to
initialize the directory with terraform init.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Initializing a configuration directory downloads and installs the providers defined in the configuration, which in this
case is the aws provider.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform init</span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Initializing the backend...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Initializing provider plugins...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">- Finding hashicorp/aws versions matching &quot;~&gt; 4.16&quot;...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">- Installing hashicorp/aws v4.17.0...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">- Installed hashicorp/aws v4.17.0 (signed by HashiCorp)</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Terraform has created a lock file .terraform.lock.hcl to record the provider</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">selections it made above. Include this file in your version control repository</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">so that Terraform can guarantee to make the same selections by default when</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">you run &quot;terraform init&quot; in the future.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Terraform has been successfully initialized!</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">You may now begin working with Terraform. Try running &quot;terraform plan&quot; to see</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">any changes that are required for your infrastructure. All Terraform commands</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">should now work.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">If you ever set or change modules or backend configuration for Terraform,</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">rerun this command to reinitialize your working directory. If you forget, other</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">commands will detect it and remind you to do so if necessary.</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Terraform downloads the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws</code> provider and installs it in a hidden subdirectory of our current working directory, named
<em>.terraform</em>. The terraform init command prints out which version of the provider was installed. Terraform also creates
a lock file named <em>.terraform.lock.hcl</em> which specifies the exact provider versions used, so that we can control when
we want to update the providers used for our project.</p><h4 id="formatting-and-validating-the-configuration" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="formatting and validating the configuration permalink" href="/packer/docs/aws-get-started#formatting-and-validating-the-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Formatting and validating the Configuration</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We recommend using consistent formatting in all configuration files. The terraform <strong>fmt command</strong> automatically
updates configurations in the current directory for readability and consistency.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">By formatting our configuration, terraform will print out the names of the files it modified, if any. In this case, our
configuration file was already formatted correctly, so Terraform won&#x27;t return any file names.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform <span class="token function">fmt</span></span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We can also make sure our configuration is syntactically valid and internally consistent by using the terraform
<strong>validate command</strong>:</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform validate</span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Success! The configuration is valid.</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h4 id="creating-infrastructure" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="creating infrastructure permalink" href="/packer/docs/aws-get-started#creating-infrastructure"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Creating Infrastructure</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Apply the configuration now with the <strong>terraform apply</strong> command. Terraform will print output similar to what is shown
below. We have truncated some of the output to save space.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output"> terraform apply</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Terraform used the selected providers to generate the following execution plan.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Resource actions are indicated with the following symbols:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  + create</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Terraform will perform the following actions:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">   aws_instance.app_server will be created</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  + resource &quot;aws_instance&quot; &quot;app_server&quot; {</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">      + ami                          = &quot;ami-830c94e3&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">      + arn                          = (known after apply)</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">#</span><span class="token bash language-bash"><span class="token punctuation">..</span>.</span></span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Plan: 1 to add, 0 to change, 0 to destroy.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Do you want to perform these actions?</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  Terraform will perform the actions described above.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  Only &#x27;yes&#x27; will be accepted to approve.</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  Enter a value:</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Before it applies any changes, Terraform prints out the execution plan which describes the actions Terraform will take
in order to change our infrastructure to match the configuration.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The output format is similar to the diff format generated by tools such as Git. The output has a <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">+</code> next to
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">aws_instance.my-ami-instance</code>, meaning that Terraform will create this resource. Beneath that, it shows the attributes
that will be set. When the value displayed is <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">(known after apply)</code>, it means that the value will not be known until
the resource is created. For example, AWS assigns Amazon Resource Names (ARNs) to instances upon creation, so Terraform
cannot know the value of the arn attribute until we apply the change and the AWS provider returns that value from the
AWS API.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Terraform will now pause and wait for your approval before proceeding. If anything in the plan seems incorrect or
dangerous, it is safe to abort here before Terraform modifies your infrastructure.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In this case the plan is acceptable, so type &quot;yes&quot; at the confirmation prompt to proceed. Executing the plan will take
a few minutes since Terraform waits for the EC2 instance to become available.</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">  Enter a value: yes</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">aws_instance.app_server: Creating...</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">aws_instance.app_server: Still creating... [10s elapsed]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">aws_instance.app_server: Still creating... [20s elapsed]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">aws_instance.app_server: Still creating... [30s elapsed]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">aws_instance.app_server: Creation complete after 36s [id=i-01e03375ba238b384]</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token output">Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><blockquote class="mdx-blockquote_blockquote__h7k9H"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Hands-on:</strong> To execute Terraform actions without the interactive prompt (for example, in a CI/CD environment), use
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://stackoverflow.com/a/59958372"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">terraform apply -auto-approve</code></a></p></blockquote><h4 id="initial-deployment-only-inspect-instance" class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="initial deployment only inspect instance permalink" href="/packer/docs/aws-get-started#initial-deployment-only-inspect-instance"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>(Initial Deployment Only) Inspect Instance</h4><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We would normally undergo lots of debugging and tuning for our first app deployment by ssh into the EC2 instance.
Terraform can generate SSL/SSH private keys using the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/private_key">tls_private_key resource</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">So if we wanted to generate SSH keys on the fly we could do something like this (this behavior is not in the example
configuration above):</p><div class="g-code-block style_root__i1k0c language-hcl mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-hcl mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">resource <span class="token type variable">&quot;tls_private_key&quot;</span></span> <span class="token string">&quot;example&quot;</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">algorithm</span> <span class="token punctuation">=</span> <span class="token string">&quot;RSA&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">rsa_bits</span>  <span class="token punctuation">=</span> <span class="token number">4096</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">resource <span class="token type variable">&quot;aws_key_pair&quot;</span></span> <span class="token string">&quot;generated_key&quot;</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">key_name</span>   <span class="token punctuation">=</span> <span class="token string">&quot;initial-deployment-tuning-ssh-key&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">public_key</span> <span class="token punctuation">=</span> tls_private_key.example.public_key_openssh<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">...<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">resource <span class="token type variable">&quot;aws_instance&quot;</span></span> <span class="token string">&quot;my-ami-instance&quot;</span> <span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">ami</span> <span class="token punctuation">=</span> <span class="token string">&quot;<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">data</span><span class="token punctuation">.</span><span class="token type variable">aws_ami</span><span class="token punctuation">.</span>latest-my-ami<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">instance_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;t2.micro&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">key_name</span>      <span class="token punctuation">=</span> aws_key_pair.generated_key.key_name<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">user_data</span> <span class="token punctuation">=</span> <span class="token heredoc string">&lt;&lt;-EOF</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    #!/bin/bash</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    cd /home/ubuntu/my-ami</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">    # command that starts app, e.g. flask --app server run --host=0.0.0.0</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token heredoc string">  EOF</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token keyword">output<span class="token type variable"> &quot;private_key&quot; </span></span><span class="token punctuation">{</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">value</span>     <span class="token punctuation">=</span> tls_private_key.example.private_key_pem<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token property">sensitive</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">}</span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This will create an SSH key pair that lives in the Terraform state (it is not written to disk in files other than what
might be done for the Terraform state itself when not using remote state), creates an AWS key pair based on the public
key and then creates an Ubuntu 20.04 instance where the ubuntu user is accessible with the private key that was
generated.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">We would then have to extract the private key from the state file for us to use in <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh</code> command. We could use an
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">output</code> to spit this straight out to stdout when Terraform is applied by</p><div class="g-code-block style_root__i1k0c language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-shell-session mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">terraform output -raw private_key</span></span>
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><div class="alert alert-info g-type-body"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>Security caveats:</strong> It should be pointed out here that passing private keys around is generally a bad idea and
we&#x27;d be much better having developers create their own key pairs and provide others with the public key that people (or
them) can use to generate an AWS key pair (potentially using the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/key_pair.html">aws_key_pair resource</a> as
used in the above example) that can then be specified when creating instances. In general we should only use something
like the above way of generating SSH keys for very temporary dev environments that we are controlling so we don&#x27;t need
to pass private keys to anyone. If we do need to pass private keys to people we will need to make sure that we do this
in a secure channel and that we make sure the Terraform state (which contains the private key in plain text) is also
secured appropriately.</p></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To Log in with the SSH private key we obtained above,</p><div class="g-code-block style_root__i1k0c language-bash mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">nano</span> private-key.pem<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Paste private key, such as the one in the following image, into the file. Be sure to include the BEGIN and END lines.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><span class="image_root__Kkwm7 image_noBorder__e_8et"><img src="https://d33wubrfki0l68.cloudfront.net/7a74a036032b0f73c7e4d2f1e2795ce698fb9456/edee6/how-to/logging-in-with-an-ssh-private-key-on-linuxmac/linux2.png"/></span></p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Run the following command to change the file permissions to 600 to secure the key. We can also set them to 400. This
step is required:</p><div class="g-code-block style_root__i1k0c language-bash mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">chmod</span> <span class="token number">600</span> private-key.pem<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Use the key to log in to the SSH client as shown in the following example, which loads the key in file
<em>private-key.pem</em>, and logs in as user<em>ubuntu</em> to IP 192.237.248.66:</p><div class="g-code-block style_root__i1k0c language-bash mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-bash mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token function">ssh</span> -i private-key.pem ubuntu@192.237.248.66<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><h2 id="github-actions" class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="github actions permalink" href="/packer/docs/aws-get-started#github-actions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>GitHub Actions</h2><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/hashicorp/setup-packer">GitHub Action setup-packer</a></li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="https://github.com/marketplace/actions/hashicorp-setup-terraform">GitHub Action setup-terraform</a></li><li class="mdx-lists_listItem__nkqhg"><a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" aria-describedby="" href="/packer/tutorials/cloud-production/github-actions">Setup AWS Access Key in GitHub Action</a></li></ul><div class="g-code-block style_root__i1k0c language-yml mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-yml mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-yml mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token punctuation">---</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token key atrule">name</span><span class="token punctuation">:</span> My App CI/CD<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token key atrule">on</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token key atrule">pull_request</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">-</span> master<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token key atrule">push</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token punctuation">-</span> master<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token key atrule">env</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token key atrule">HASHICORP_PRODUCT_VERSION</span><span class="token punctuation">:</span> <span class="token string">&quot;latest&quot;</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">  <span class="token key atrule">release</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token key atrule">name</span><span class="token punctuation">:</span> Release IAM image to AWS and Deploys instance to EC2<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token key atrule">defaults</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token key atrule">run</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> hashicorp<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Configure AWS credentials<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">if</span><span class="token punctuation">:</span> github.ref == &#x27;refs/heads/master&#x27;<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>actions/configure<span class="token punctuation">-</span>aws<span class="token punctuation">-</span>credentials@v1<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">with</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token key atrule">aws-access-key-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_ACCESS_KEY_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token key atrule">aws-secret-access-key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_SECRET_ACCESS_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token key atrule">aws-region</span><span class="token punctuation">:</span> us<span class="token punctuation">-</span>west<span class="token punctuation">-</span><span class="token number">1</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup HashiCorp Packer<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> hashicorp/setup<span class="token punctuation">-</span>packer@main<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">with</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token key atrule">version</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> env.HASHICORP_PRODUCT_VERSION <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Initialize Packer configuration<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">run</span><span class="token punctuation">:</span> packer init .<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> hashicorp/images<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Validate Packer template<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">run</span><span class="token punctuation">:</span> packer validate <span class="token punctuation">-</span>var &quot;gh_pat_read=$<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GH_PAT_READ <span class="token punctuation">}</span><span class="token punctuation">}</span>&quot; .<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> hashicorp/images<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build and release AMI image<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">if</span><span class="token punctuation">:</span> github.ref == &#x27;refs/heads/master&#x27;<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">run</span><span class="token punctuation">:</span> packer build <span class="token punctuation">-</span>var &quot;gh_pat_read=$<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GH_PAT_READ <span class="token punctuation">}</span><span class="token punctuation">}</span>&quot; .<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> hashicorp/images<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup HashiCorp Terraform<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> hashicorp/setup<span class="token punctuation">-</span>terraform@v2<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">with</span><span class="token punctuation">:</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">          <span class="token key atrule">terraform_version</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> env.HASHICORP_PRODUCT_VERSION <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Initialize Terraform configuration<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">run</span><span class="token punctuation">:</span> terraform init<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> hashicorp/instances<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Validate Terraform template<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">run</span><span class="token punctuation">:</span> terraform validate<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> hashicorp/instances<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create EC2 instance<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">if</span><span class="token punctuation">:</span> github.ref == &#x27;refs/heads/master&#x27;<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">run</span><span class="token punctuation">:</span> terraform apply <span class="token punctuation">-</span>auto<span class="token punctuation">-</span>approve<!-- -->
</span><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ">        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> hashicorp/instances<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note that to get the aforementioned debugging private key, we would change the last step from</p><div class="g-code-block style_root__i1k0c language-yml mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-yml mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-yml mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token key atrule">run</span><span class="token punctuation">:</span> terraform apply <span class="token punctuation">-</span>auto<span class="token punctuation">-</span>approve<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">to</p><div class="g-code-block style_root__i1k0c language-yml mdx-code-blocks_codeBlockMargin__xk4yr style_codeMargin__flyZr theme-dark_base__RNsat theme-dark_syntax__QCDzs" data-heap-track="code-block"><div class="style_linesContainer__4N_nq"><pre class="code-lines_pre__t8gY5 language-yml mdx-code-blocks_codeBlockMargin__xk4yr"><code class="code-lines_code__luWmT language-yml mdx-code-blocks_codeBlockMargin__xk4yr"><span class="code-lines_linesColumn__M9Wn1 code-lines_styledScrollbars__37_Kl"><span class="code-lines_linesScrollableContent__UNs3H"><span class="code-lines_LineOfCode__6Kf_L g-type-code code-lines_padRight__5afwQ"><span class="token key atrule">run</span><span class="token punctuation">:</span> terraform apply <span class="token punctuation">-</span>auto<span class="token punctuation">-</span>approve <span class="token important">&amp;&amp;</span> terraform output <span class="token punctuation">-</span>raw private_key<!-- -->
</span></span></span></code></pre><div class="style_copyButtonContainer__yxcuf"><button class="style_button__8j_Rk" data-heap-track="code-block-clipboard-icon" type="button">Copy<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="style_svg__gtvGZ"><g fill="currentColor"><path d="M2.25 0A2.25 2.25 0 000 2.25v7.5A2.25 2.25 0 002.25 12h.25a.75.75 0 000-1.5h-.25a.75.75 0 01-.75-.75v-7.5a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v.25a.75.75 0 001.5 0v-.25A2.25 2.25 0 009.75 0h-7.5z"></path><path fill-rule="evenodd" d="M6.25 4A2.25 2.25 0 004 6.25v7.5A2.25 2.25 0 006.25 16h7.5A2.25 2.25 0 0016 13.75v-7.5A2.25 2.25 0 0013.75 4h-7.5zM5.5 6.25a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75v7.5a.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75v-7.5z" clip-rule="evenodd"></path></g></svg></button></div></div></div></div></div><a href="https://github.com/hashicorp/packer/blob/main/website/../content/docs/aws-get-started.mdx" target="_blank" class="edit-on-github-link_editLink__AsG8Z sidebar-sidecar-layout_editOnGithubLink__SDraB" rel="noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="edit-on-github-link_editLinkIcon__wMtY9"><path fill="currentColor" fill-rule="evenodd" d="M8 1C4.133 1 1 4.13 1 7.993c0 3.09 2.006 5.71 4.787 6.635.35.064.478-.152.478-.337 0-.166-.006-.606-.01-1.19-1.947.423-2.357-.937-2.357-.937-.319-.808-.778-1.023-.778-1.023-.635-.434.048-.425.048-.425.703.05 1.073.72 1.073.72.624 1.07 1.638.76 2.037.582.063-.452.244-.76.444-.935-1.554-.176-3.188-.776-3.188-3.456 0-.763.273-1.388.72-1.876-.072-.177-.312-.888.07-1.85 0 0 .586-.189 1.924.716A6.711 6.711 0 018 4.381c.595.003 1.194.08 1.753.236 1.336-.905 1.923-.717 1.923-.717.382.963.142 1.674.07 1.85.448.49.72 1.114.72 1.877 0 2.686-1.638 3.278-3.197 3.45.251.216.475.643.475 1.296 0 .934-.009 1.688-.009 1.918 0 .187.127.404.482.336A6.996 6.996 0 0015 7.993 6.997 6.997 0 008 1z" clip-rule="evenodd"></path></svg>Edit this page on GitHub</a></main><div class="sidebar-sidecar-layout_sidecarPosition__WtTq0"><div class="sidebar-sidecar-layout_sidecarTopSlot__qRAEI"></div><div class="sidecar-scroll-container_root__a8nIj"><div class="sidecar-scroll-container_scrollContainer__Dw9id"><div><nav aria-labelledby="react-aria-72"><p id="react-aria-72" class="outline-nav_navLabel__HrjQb hds-typography-body-100">On this page:</p><ol class="outline-nav_listRoot__Sm1fr"><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-0" aria-describedby="" href="/packer/docs/aws-get-started#install-packer">Install Packer</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-1" aria-describedby="" href="/packer/docs/aws-get-started#build-an-image">Build an Image</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-2" aria-describedby="" href="/packer/docs/aws-get-started#authenticating-to-aws">Authenticating to AWS</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-3" aria-describedby="" href="/packer/docs/aws-get-started#initialize-packer-configuration">Initialize Packer Configuration</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-4" aria-describedby="" href="/packer/docs/aws-get-started#formatting-and-validating-packer-template">Formatting and Validating Packer Template</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-5" aria-describedby="" href="/packer/docs/aws-get-started#building-packer-image">Building Packer Image</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-6" aria-describedby="" href="/packer/docs/aws-get-started#managing-the-image">Managing the Image</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-7" aria-describedby="" href="/packer/docs/aws-get-started#deploying-packer-image-with-terraform">Deploying Packer Image with Terraform</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" data-heap-track="toc-list-item-index-8" aria-describedby="" href="/packer/docs/aws-get-started#github-actions">GitHub Actions</a></li></ol></nav></div></div></div></div></div></div></div></div></div><div class="base-layout_footer__HGqK8 base-layout_showFooterTopBorder__4_CwH"><footer class="footer_root__qJO_k"><span class="footer_logoAndSwitcher__CJkN3"><a href="https://www.hashicorp.com/" aria-label="Go to HashiCorp home page" class="footer_logo__pe9i3 g-focus-ring-from-box-shadow"><div><svg xmlns="http://www.w3.org/2000/svg" width="254" height="53" fill="none" viewBox="0 0 254 53"><g fill="#000" clip-path="url(#a)"><g><path d="M63.01 12.22h5.32v11.43h12.19V12.22h5.36V40.2h-5.36V28.45H68.33V40.2h-5.32zM89.28 34.77c0-4.2 2.96-5.6 6.56-6.44l6.079-1.4v-.48c0-2.04-1.32-3.32-3.44-3.32s-3.36 1.16-3.76 3.08l-4.56-.52c.68-3.84 3.92-6.32 8.52-6.32 5.08 0 8.4 3.2 8.4 7.88v8.2c0 .52.16.68.52.68h1.12v4.08h-3.12c-1.96 0-2.84-.64-2.84-2.24 0-.48.08-1.04.28-1.76l-.44-.16c-1.44 3.12-3.56 4.48-6.56 4.48-4.12 0-6.76-2.28-6.76-5.76m8.12 2c2.639 0 4.519-1.92 4.519-4.96v-1.6l-4.36 1.04c-2.2.52-3.12 1.28-3.12 2.96s1.16 2.56 2.96 2.56M110.59 34.69l4.88-.96c.52 2.16 2.24 3.24 4.52 3.24 2.28 0 3.56-.92 3.56-2.48s-1.52-1.88-4.4-2.4c-3.64-.56-8.35-1.24-8.35-6.28 0-3.8 3.24-6.44 8.52-6.44 4.68 0 8.32 1.96 9.15 5.92l-4.92.8c-.44-2-2.08-3.04-4.24-3.04-2.36 0-3.48 1-3.48 2.36 0 1.56 1.56 1.88 4.44 2.4 3.6.56 8.32 1.24 8.32 6.28 0 3.96-3.2 6.6-8.6 6.6-4.88 0-8.52-2-9.4-6M136.94 40.21h-5.2V11.42h5.2v8.96c0 1.04-.2 2.04-.48 3.52l.48.16c1.24-2.96 3.12-4.68 6.6-4.68 4.44 0 6.8 2.8 6.8 7.56v13.27h-5.2V27.1c0-2.32-1.16-3.6-3.48-3.6-2.64 0-4.72 2-4.72 5.52zM161.01 35.05c0 .8.28 1.04.88 1.04h2.28v4.12h-4.72c-2.36 0-3.64-1.32-3.64-3.76V23.98h-2.88v-4.12h8.08zm-5.92-20.63c0-1.76 1.44-3.2 3.16-3.2 1.72 0 3.16 1.44 3.16 3.2 0 1.76-1.4 3.16-3.16 3.16-1.76 0-3.16-1.4-3.16-3.16M165.89 26.22c0-8.4 5.52-14.47 13.51-14.47 6.72 0 11.31 3.88 12.55 9.15l-5.28 1.28c-1-3.68-3.44-5.76-7.28-5.76-4.88 0-7.96 4.04-7.96 9.79 0 5.75 3.2 9.79 8.16 9.79 3.92 0 6.32-2.12 7.32-6.04l5 .56c-1.2 6.28-5.84 10.15-12.39 10.15-8.08 0-13.63-6.08-13.63-14.47zM194.08 30.01c0-6.2 4.36-10.63 10.39-10.63s10.39 4.44 10.39 10.63-4.36 10.67-10.39 10.67-10.39-4.48-10.39-10.67m15.59 0c0-3.84-2.04-6.4-5.2-6.4s-5.2 2.56-5.2 6.4c0 3.84 2.08 6.44 5.2 6.44s5.2-2.56 5.2-6.44M218.149 19.86h4.8v.8c0 1.08-.04 1.96-.36 3.6l.48.12c.76-2.68 2.16-4.52 5.44-4.52h1.48v5.04h-2.12c-2.92 0-4.52 1.76-4.52 5v10.31h-5.2zM232.43 19.86h5.12v.92c0 .92-.08 1.64-.36 3.28l.48.12c1.24-3.24 3.56-4.8 6.56-4.8 4.96 0 8.88 4.08 8.88 10.63 0 6.55-3.92 10.67-8.88 10.67-3 0-5.2-1.56-6.48-4.84l-.44.16c.24 1.6.32 2.36.32 3.24v9.15h-5.2V19.85zm15.51 10.15c0-3.96-2.16-6.4-5.2-6.4s-5.2 2.44-5.2 6.4c0 3.96 2.16 6.44 5.2 6.44s5.2-2.44 5.2-6.44"/></g><g><path d="M20.79.01.07 11.97v28.71l7.78 4.5V16.46l12.94-7.47z"/><path d="M29.06.01v22.87h-8.27v-8.54L13 18.84v29.3l7.79 4.5v-22.8h8.27v8.48l7.79-4.49V4.51z"/><path d="M29.06 52.65 49.78 40.7V11.99L42 7.49V36.2l-12.94 7.47z"/></g></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h254v53H0z"/></clipPath></defs></svg></div></a><span class="footer_themeSwitcher__CPJxw hds-font-weight-regular"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-82">Theme</label></span></span><ul class="footer_links__t81SU"><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="/certifications"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Certifications</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://status.hashicorp.com"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">System Status</span></a></li><li><button class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Cookie Manager</span></button></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/terms-of-service"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Terms of Use</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/security"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Security</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/privacy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Privacy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/trademark-policy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trademark Policy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="" href="https://www.hashicorp.com/trade-controls"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trade Controls</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="opens-in-new-tab-label-react-aria-90" target="_blank" href="https://forms.gle/fnHLuNahLEhjuKvE6"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Give Feedback</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-90">(opens in new tab)</span></li></ul></footer></div></div></div><div class="style_root__owpNH"></div><div style="position:fixed;z-index:99;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none;inset:24px"></div><!--$--><!--/$--></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Documentation","url":"/packer/docs","isCurrentPage":false},{"title":"Getting Started with AWS","url":"/packer/docs/aws-get-started","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Packer Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Packer","fullPath":"/packer","theme":"packer"},{"title":"Install","fullPath":"/packer/install"},{"title":"Tutorials","fullPath":"/packer/tutorials"},{"title":"Documentation","fullPath":"/packer/docs"},{"title":"Guides","fullPath":"/packer/guides"},{"title":"Integrations","fullPath":"/packer/integrations"}],"showFilterInput":false,"title":"Packer","visuallyHideTitle":true},{"backToLinkProps":{"text":"Packer Home","href":"/packer"},"levelButtonProps":{"levelUpButtonText":"Packer Home"},"menuItems":[{"title":"Documentation","fullPath":"/packer/docs","theme":"packer"},{"title":"What is Packer?","routes":[{"title":"Overview","path":"intro","filePath":"../content/docs/intro/index.mdx","fullPath":"/packer/docs/intro","id":"sidebar-nav-item-1"},{"title":"Why Use Packer?","path":"intro/why","filePath":"../content/docs/intro/why.mdx","fullPath":"/packer/docs/intro/why","id":"sidebar-nav-item-2"},{"title":"Use Cases","path":"intro/use-cases","filePath":"../content/docs/intro/use-cases.mdx","fullPath":"/packer/docs/intro/use-cases","id":"sidebar-nav-item-3"}],"id":"sidebar-nav-item-0"},{"title":"HCP Packer","path":"hcp","filePath":"../content/docs/hcp/index.mdx","fullPath":"/packer/docs/hcp","id":"sidebar-nav-item-4"},{"divider":true,"id":"sidebar-nav-item-5"},{"title":"Getting Started with AWS","path":"aws-get-started","filePath":"../content/docs/aws-get-started.mdx","fullPath":"/packer/docs/aws-get-started","id":"sidebar-nav-item-6"},{"divider":true,"id":"sidebar-nav-item-7"},{"title":"Terminology","path":"terminology","filePath":"../content/docs/terminology.mdx","fullPath":"/packer/docs/terminology","id":"sidebar-nav-item-8"},{"title":"Commands (CLI)","routes":[{"title":"Overview","path":"commands","filePath":"../content/docs/commands/index.mdx","fullPath":"/packer/docs/commands","id":"sidebar-nav-item-10"},{"title":"\u003ccode\u003einit\u003c/code\u003e","path":"commands/init","filePath":"../content/docs/commands/init.mdx","fullPath":"/packer/docs/commands/init","id":"sidebar-nav-item-11"},{"title":"\u003ccode\u003eplugins\u003c/code\u003e","routes":[{"title":"Overview","path":"commands/plugins","filePath":"../content/docs/commands/plugins/index.mdx","fullPath":"/packer/docs/commands/plugins","id":"sidebar-nav-item-13"},{"title":"\u003ccode\u003einstall\u003c/code\u003e","path":"commands/plugins/install","filePath":"../content/docs/commands/plugins/install.mdx","fullPath":"/packer/docs/commands/plugins/install","id":"sidebar-nav-item-14"},{"title":"\u003ccode\u003einstalled\u003c/code\u003e","path":"commands/plugins/installed","filePath":"../content/docs/commands/plugins/installed.mdx","fullPath":"/packer/docs/commands/plugins/installed","id":"sidebar-nav-item-15"},{"title":"\u003ccode\u003eremove\u003c/code\u003e","path":"commands/plugins/remove","filePath":"../content/docs/commands/plugins/remove.mdx","fullPath":"/packer/docs/commands/plugins/remove","id":"sidebar-nav-item-16"},{"title":"\u003ccode\u003erequired\u003c/code\u003e","path":"commands/plugins/required","filePath":"../content/docs/commands/plugins/required.mdx","fullPath":"/packer/docs/commands/plugins/required","id":"sidebar-nav-item-17"}],"id":"sidebar-nav-item-12"},{"title":"\u003ccode\u003ebuild\u003c/code\u003e","path":"commands/build","filePath":"../content/docs/commands/build.mdx","fullPath":"/packer/docs/commands/build","id":"sidebar-nav-item-18"},{"title":"\u003ccode\u003econsole\u003c/code\u003e","path":"commands/console","filePath":"../content/docs/commands/console.mdx","fullPath":"/packer/docs/commands/console","id":"sidebar-nav-item-19"},{"title":"\u003ccode\u003efix\u003c/code\u003e","path":"commands/fix","filePath":"../content/docs/commands/fix.mdx","fullPath":"/packer/docs/commands/fix","id":"sidebar-nav-item-20"},{"title":"\u003ccode\u003efmt\u003c/code\u003e","path":"commands/fmt","filePath":"../content/docs/commands/fmt.mdx","fullPath":"/packer/docs/commands/fmt","id":"sidebar-nav-item-21"},{"title":"\u003ccode\u003einspect\u003c/code\u003e","path":"commands/inspect","filePath":"../content/docs/commands/inspect.mdx","fullPath":"/packer/docs/commands/inspect","id":"sidebar-nav-item-22"},{"title":"\u003ccode\u003evalidate\u003c/code\u003e","path":"commands/validate","filePath":"../content/docs/commands/validate.mdx","fullPath":"/packer/docs/commands/validate","id":"sidebar-nav-item-23"},{"title":"\u003ccode\u003ehcl2_upgrade\u003c/code\u003e","path":"commands/hcl2_upgrade","filePath":"../content/docs/commands/hcl2_upgrade.mdx","fullPath":"/packer/docs/commands/hcl2_upgrade","id":"sidebar-nav-item-24"}],"id":"sidebar-nav-item-9"},{"title":"Templates","routes":[{"title":"Overview","path":"templates","filePath":"../content/docs/templates/index.mdx","fullPath":"/packer/docs/templates","id":"sidebar-nav-item-26"},{"title":"JSON to HCL2","path":"templates/json_to_hcl","filePath":"../content/docs/templates/json_to_hcl.mdx","fullPath":"/packer/docs/templates/json_to_hcl","id":"sidebar-nav-item-27"},{"title":"HCL Templates","routes":[{"title":"Overview","path":"templates/hcl_templates","filePath":"../content/docs/templates/hcl_templates/index.mdx","fullPath":"/packer/docs/templates/hcl_templates","id":"sidebar-nav-item-29"},{"title":"Blocks","routes":[{"title":"Overview","path":"templates/hcl_templates/blocks","filePath":"../content/docs/templates/hcl_templates/blocks/index.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks","id":"sidebar-nav-item-31"},{"title":"\u003ccode\u003ebuild\u003c/code\u003e","routes":[{"title":"Overview","path":"templates/hcl_templates/blocks/build","filePath":"../content/docs/templates/hcl_templates/blocks/build/index.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/build","id":"sidebar-nav-item-33"},{"title":"\u003ccode\u003ehcp_packer_registry\u003c/code\u003e","path":"templates/hcl_templates/blocks/build/hcp_packer_registry","filePath":"../content/docs/templates/hcl_templates/blocks/build/hcp_packer_registry.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/build/hcp_packer_registry","id":"sidebar-nav-item-34"},{"title":"\u003ccode\u003esource\u003c/code\u003e","path":"templates/hcl_templates/blocks/build/source","filePath":"../content/docs/templates/hcl_templates/blocks/build/source.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/build/source","id":"sidebar-nav-item-35"},{"title":"\u003ccode\u003eprovisioner\u003c/code\u003e","path":"templates/hcl_templates/blocks/build/provisioner","filePath":"../content/docs/templates/hcl_templates/blocks/build/provisioner.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/build/provisioner","id":"sidebar-nav-item-36"},{"title":"\u003ccode\u003epost-processor\u003c/code\u003e","path":"templates/hcl_templates/blocks/build/post-processor","filePath":"../content/docs/templates/hcl_templates/blocks/build/post-processor.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/build/post-processor","id":"sidebar-nav-item-37"},{"title":"\u003ccode\u003epost-processors\u003c/code\u003e","path":"templates/hcl_templates/blocks/build/post-processors","filePath":"../content/docs/templates/hcl_templates/blocks/build/post-processors.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/build/post-processors","id":"sidebar-nav-item-38"}],"id":"sidebar-nav-item-32"},{"title":"\u003ccode\u003elocals\u003c/code\u003e","path":"templates/hcl_templates/blocks/locals","filePath":"../content/docs/templates/hcl_templates/blocks/locals.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/locals","id":"sidebar-nav-item-39"},{"title":"\u003ccode\u003esource\u003c/code\u003e","path":"templates/hcl_templates/blocks/source","filePath":"../content/docs/templates/hcl_templates/blocks/source.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/source","id":"sidebar-nav-item-40"},{"title":"\u003ccode\u003evariable\u003c/code\u003e","path":"templates/hcl_templates/blocks/variable","filePath":"../content/docs/templates/hcl_templates/blocks/variable.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/variable","id":"sidebar-nav-item-41"},{"title":"\u003ccode\u003epacker\u003c/code\u003e","path":"templates/hcl_templates/blocks/packer","filePath":"../content/docs/templates/hcl_templates/blocks/packer.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/packer","id":"sidebar-nav-item-42"},{"title":"\u003ccode\u003edata\u003c/code\u003e","path":"templates/hcl_templates/blocks/data","filePath":"../content/docs/templates/hcl_templates/blocks/data.mdx","fullPath":"/packer/docs/templates/hcl_templates/blocks/data","id":"sidebar-nav-item-43"}],"id":"sidebar-nav-item-30"},{"title":"Functions","routes":[{"title":"Overview","path":"templates/hcl_templates/functions","filePath":"../content/docs/templates/hcl_templates/functions/index.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions","id":"sidebar-nav-item-45"},{"title":"Contextual Functions","routes":[{"title":"aws_secretsmanager","path":"templates/hcl_templates/functions/contextual/aws_secretsmanager","filePath":"../content/docs/templates/hcl_templates/functions/contextual/aws_secretsmanager.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/contextual/aws_secretsmanager","id":"sidebar-nav-item-47"},{"title":"consul","path":"templates/hcl_templates/functions/contextual/consul","filePath":"../content/docs/templates/hcl_templates/functions/contextual/consul.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/contextual/consul","id":"sidebar-nav-item-48"},{"title":"env","path":"templates/hcl_templates/functions/contextual/env","filePath":"../content/docs/templates/hcl_templates/functions/contextual/env.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/contextual/env","id":"sidebar-nav-item-49"},{"title":"vault","path":"templates/hcl_templates/functions/contextual/vault","filePath":"../content/docs/templates/hcl_templates/functions/contextual/vault.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/contextual/vault","id":"sidebar-nav-item-50"}],"id":"sidebar-nav-item-46"},{"title":"Numeric Functions","routes":[{"title":"abs","path":"templates/hcl_templates/functions/numeric/abs","filePath":"../content/docs/templates/hcl_templates/functions/numeric/abs.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/abs","id":"sidebar-nav-item-52"},{"title":"ceil","path":"templates/hcl_templates/functions/numeric/ceil","filePath":"../content/docs/templates/hcl_templates/functions/numeric/ceil.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/ceil","id":"sidebar-nav-item-53"},{"title":"floor","path":"templates/hcl_templates/functions/numeric/floor","filePath":"../content/docs/templates/hcl_templates/functions/numeric/floor.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/floor","id":"sidebar-nav-item-54"},{"title":"log","path":"templates/hcl_templates/functions/numeric/log","filePath":"../content/docs/templates/hcl_templates/functions/numeric/log.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/log","id":"sidebar-nav-item-55"},{"title":"max","path":"templates/hcl_templates/functions/numeric/max","filePath":"../content/docs/templates/hcl_templates/functions/numeric/max.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/max","id":"sidebar-nav-item-56"},{"title":"min","path":"templates/hcl_templates/functions/numeric/min","filePath":"../content/docs/templates/hcl_templates/functions/numeric/min.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/min","id":"sidebar-nav-item-57"},{"title":"parseint","path":"templates/hcl_templates/functions/numeric/parseint","filePath":"../content/docs/templates/hcl_templates/functions/numeric/parseint.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/parseint","id":"sidebar-nav-item-58"},{"title":"pow","path":"templates/hcl_templates/functions/numeric/pow","filePath":"../content/docs/templates/hcl_templates/functions/numeric/pow.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/pow","id":"sidebar-nav-item-59"},{"title":"signum","path":"templates/hcl_templates/functions/numeric/signum","filePath":"../content/docs/templates/hcl_templates/functions/numeric/signum.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/numeric/signum","id":"sidebar-nav-item-60"}],"id":"sidebar-nav-item-51"},{"title":"String Functions","routes":[{"title":"chomp","path":"templates/hcl_templates/functions/string/chomp","filePath":"../content/docs/templates/hcl_templates/functions/string/chomp.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/chomp","id":"sidebar-nav-item-62"},{"title":"format","path":"templates/hcl_templates/functions/string/format","filePath":"../content/docs/templates/hcl_templates/functions/string/format.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/format","id":"sidebar-nav-item-63"},{"title":"formatlist","path":"templates/hcl_templates/functions/string/formatlist","filePath":"../content/docs/templates/hcl_templates/functions/string/formatlist.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/formatlist","id":"sidebar-nav-item-64"},{"title":"indent","path":"templates/hcl_templates/functions/string/indent","filePath":"../content/docs/templates/hcl_templates/functions/string/indent.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/indent","id":"sidebar-nav-item-65"},{"title":"join","path":"templates/hcl_templates/functions/string/join","filePath":"../content/docs/templates/hcl_templates/functions/string/join.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/join","id":"sidebar-nav-item-66"},{"title":"lower","path":"templates/hcl_templates/functions/string/lower","filePath":"../content/docs/templates/hcl_templates/functions/string/lower.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/lower","id":"sidebar-nav-item-67"},{"title":"replace","path":"templates/hcl_templates/functions/string/replace","filePath":"../content/docs/templates/hcl_templates/functions/string/replace.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/replace","id":"sidebar-nav-item-68"},{"title":"regex_replace","path":"templates/hcl_templates/functions/string/regex_replace","filePath":"../content/docs/templates/hcl_templates/functions/string/regex_replace.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/regex_replace","id":"sidebar-nav-item-69"},{"title":"regex","path":"templates/hcl_templates/functions/string/regex","filePath":"../content/docs/templates/hcl_templates/functions/string/regex.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/regex","id":"sidebar-nav-item-70"},{"title":"regexall","path":"templates/hcl_templates/functions/string/regexall","filePath":"../content/docs/templates/hcl_templates/functions/string/regexall.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/regexall","id":"sidebar-nav-item-71"},{"title":"split","path":"templates/hcl_templates/functions/string/split","filePath":"../content/docs/templates/hcl_templates/functions/string/split.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/split","id":"sidebar-nav-item-72"},{"title":"strrev","path":"templates/hcl_templates/functions/string/strrev","filePath":"../content/docs/templates/hcl_templates/functions/string/strrev.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/strrev","id":"sidebar-nav-item-73"},{"title":"substr","path":"templates/hcl_templates/functions/string/substr","filePath":"../content/docs/templates/hcl_templates/functions/string/substr.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/substr","id":"sidebar-nav-item-74"},{"title":"title","path":"templates/hcl_templates/functions/string/title","filePath":"../content/docs/templates/hcl_templates/functions/string/title.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/title","id":"sidebar-nav-item-75"},{"title":"trim","path":"templates/hcl_templates/functions/string/trim","filePath":"../content/docs/templates/hcl_templates/functions/string/trim.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/trim","id":"sidebar-nav-item-76"},{"title":"trimprefix","path":"templates/hcl_templates/functions/string/trimprefix","filePath":"../content/docs/templates/hcl_templates/functions/string/trimprefix.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/trimprefix","id":"sidebar-nav-item-77"},{"title":"trimsuffix","path":"templates/hcl_templates/functions/string/trimsuffix","filePath":"../content/docs/templates/hcl_templates/functions/string/trimsuffix.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/trimsuffix","id":"sidebar-nav-item-78"},{"title":"trimspace","path":"templates/hcl_templates/functions/string/trimspace","filePath":"../content/docs/templates/hcl_templates/functions/string/trimspace.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/trimspace","id":"sidebar-nav-item-79"},{"title":"upper","path":"templates/hcl_templates/functions/string/upper","filePath":"../content/docs/templates/hcl_templates/functions/string/upper.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/string/upper","id":"sidebar-nav-item-80"}],"id":"sidebar-nav-item-61"},{"title":"Collection Functions","routes":[{"title":"chunklist","path":"templates/hcl_templates/functions/collection/chunklist","filePath":"../content/docs/templates/hcl_templates/functions/collection/chunklist.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/chunklist","id":"sidebar-nav-item-82"},{"title":"coalesce","path":"templates/hcl_templates/functions/collection/coalesce","filePath":"../content/docs/templates/hcl_templates/functions/collection/coalesce.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/coalesce","id":"sidebar-nav-item-83"},{"title":"coalescelist","path":"templates/hcl_templates/functions/collection/coalescelist","filePath":"../content/docs/templates/hcl_templates/functions/collection/coalescelist.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/coalescelist","id":"sidebar-nav-item-84"},{"title":"compact","path":"templates/hcl_templates/functions/collection/compact","filePath":"../content/docs/templates/hcl_templates/functions/collection/compact.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/compact","id":"sidebar-nav-item-85"},{"title":"concat","path":"templates/hcl_templates/functions/collection/concat","filePath":"../content/docs/templates/hcl_templates/functions/collection/concat.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/concat","id":"sidebar-nav-item-86"},{"title":"contains","path":"templates/hcl_templates/functions/collection/contains","filePath":"../content/docs/templates/hcl_templates/functions/collection/contains.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/contains","id":"sidebar-nav-item-87"},{"title":"distinct","path":"templates/hcl_templates/functions/collection/distinct","filePath":"../content/docs/templates/hcl_templates/functions/collection/distinct.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/distinct","id":"sidebar-nav-item-88"},{"title":"element","path":"templates/hcl_templates/functions/collection/element","filePath":"../content/docs/templates/hcl_templates/functions/collection/element.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/element","id":"sidebar-nav-item-89"},{"title":"flatten","path":"templates/hcl_templates/functions/collection/flatten","filePath":"../content/docs/templates/hcl_templates/functions/collection/flatten.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/flatten","id":"sidebar-nav-item-90"},{"title":"index","path":"templates/hcl_templates/functions/collection/index-fn","filePath":"../content/docs/templates/hcl_templates/functions/collection/index-fn.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/index-fn","id":"sidebar-nav-item-91"},{"title":"keys","path":"templates/hcl_templates/functions/collection/keys","filePath":"../content/docs/templates/hcl_templates/functions/collection/keys.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/keys","id":"sidebar-nav-item-92"},{"title":"length","path":"templates/hcl_templates/functions/collection/length","filePath":"../content/docs/templates/hcl_templates/functions/collection/length.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/length","id":"sidebar-nav-item-93"},{"title":"lookup","path":"templates/hcl_templates/functions/collection/lookup","filePath":"../content/docs/templates/hcl_templates/functions/collection/lookup.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/lookup","id":"sidebar-nav-item-94"},{"title":"merge","path":"templates/hcl_templates/functions/collection/merge","filePath":"../content/docs/templates/hcl_templates/functions/collection/merge.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/merge","id":"sidebar-nav-item-95"},{"title":"range","path":"templates/hcl_templates/functions/collection/range","filePath":"../content/docs/templates/hcl_templates/functions/collection/range.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/range","id":"sidebar-nav-item-96"},{"title":"reverse","path":"templates/hcl_templates/functions/collection/reverse","filePath":"../content/docs/templates/hcl_templates/functions/collection/reverse.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/reverse","id":"sidebar-nav-item-97"},{"title":"setintersection","path":"templates/hcl_templates/functions/collection/setintersection","filePath":"../content/docs/templates/hcl_templates/functions/collection/setintersection.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/setintersection","id":"sidebar-nav-item-98"},{"title":"setproduct","path":"templates/hcl_templates/functions/collection/setproduct","filePath":"../content/docs/templates/hcl_templates/functions/collection/setproduct.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/setproduct","id":"sidebar-nav-item-99"},{"title":"setunion","path":"templates/hcl_templates/functions/collection/setunion","filePath":"../content/docs/templates/hcl_templates/functions/collection/setunion.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/setunion","id":"sidebar-nav-item-100"},{"title":"slice","path":"templates/hcl_templates/functions/collection/slice","filePath":"../content/docs/templates/hcl_templates/functions/collection/slice.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/slice","id":"sidebar-nav-item-101"},{"title":"sort","path":"templates/hcl_templates/functions/collection/sort","filePath":"../content/docs/templates/hcl_templates/functions/collection/sort.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/sort","id":"sidebar-nav-item-102"},{"title":"values","path":"templates/hcl_templates/functions/collection/values","filePath":"../content/docs/templates/hcl_templates/functions/collection/values.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/values","id":"sidebar-nav-item-103"},{"title":"zipmap","path":"templates/hcl_templates/functions/collection/zipmap","filePath":"../content/docs/templates/hcl_templates/functions/collection/zipmap.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/collection/zipmap","id":"sidebar-nav-item-104"}],"id":"sidebar-nav-item-81"},{"title":"Encoding Functions","routes":[{"title":"base64decode","path":"templates/hcl_templates/functions/encoding/base64decode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/base64decode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/base64decode","id":"sidebar-nav-item-106"},{"title":"base64encode","path":"templates/hcl_templates/functions/encoding/base64encode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/base64encode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/base64encode","id":"sidebar-nav-item-107"},{"title":"csvdecode","path":"templates/hcl_templates/functions/encoding/csvdecode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/csvdecode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/csvdecode","id":"sidebar-nav-item-108"},{"title":"jsondecode","path":"templates/hcl_templates/functions/encoding/jsondecode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/jsondecode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/jsondecode","id":"sidebar-nav-item-109"},{"title":"jsonencode","path":"templates/hcl_templates/functions/encoding/jsonencode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/jsonencode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/jsonencode","id":"sidebar-nav-item-110"},{"title":"urlencode","path":"templates/hcl_templates/functions/encoding/urlencode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/urlencode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/urlencode","id":"sidebar-nav-item-111"},{"title":"yamldecode","path":"templates/hcl_templates/functions/encoding/yamldecode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/yamldecode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/yamldecode","id":"sidebar-nav-item-112"},{"title":"yamlencode","path":"templates/hcl_templates/functions/encoding/yamlencode","filePath":"../content/docs/templates/hcl_templates/functions/encoding/yamlencode.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/encoding/yamlencode","id":"sidebar-nav-item-113"}],"id":"sidebar-nav-item-105"},{"title":"Filesystem Functions","routes":[{"title":"abspath","path":"templates/hcl_templates/functions/file/abspath","filePath":"../content/docs/templates/hcl_templates/functions/file/abspath.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/abspath","id":"sidebar-nav-item-115"},{"title":"basename","path":"templates/hcl_templates/functions/file/basename","filePath":"../content/docs/templates/hcl_templates/functions/file/basename.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/basename","id":"sidebar-nav-item-116"},{"title":"dirname","path":"templates/hcl_templates/functions/file/dirname","filePath":"../content/docs/templates/hcl_templates/functions/file/dirname.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/dirname","id":"sidebar-nav-item-117"},{"title":"file","path":"templates/hcl_templates/functions/file/file","filePath":"../content/docs/templates/hcl_templates/functions/file/file.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/file","id":"sidebar-nav-item-118"},{"title":"fileexists","path":"templates/hcl_templates/functions/file/fileexists","filePath":"../content/docs/templates/hcl_templates/functions/file/fileexists.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/fileexists","id":"sidebar-nav-item-119"},{"title":"fileset","path":"templates/hcl_templates/functions/file/fileset","filePath":"../content/docs/templates/hcl_templates/functions/file/fileset.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/fileset","id":"sidebar-nav-item-120"},{"title":"pathexpand","path":"templates/hcl_templates/functions/file/pathexpand","filePath":"../content/docs/templates/hcl_templates/functions/file/pathexpand.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/pathexpand","id":"sidebar-nav-item-121"},{"title":"templatefile","path":"templates/hcl_templates/functions/file/templatefile","filePath":"../content/docs/templates/hcl_templates/functions/file/templatefile.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/file/templatefile","id":"sidebar-nav-item-122"}],"id":"sidebar-nav-item-114"},{"title":"Date and Time Functions","routes":[{"title":"formatdate","path":"templates/hcl_templates/functions/datetime/formatdate","filePath":"../content/docs/templates/hcl_templates/functions/datetime/formatdate.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/datetime/formatdate","id":"sidebar-nav-item-124"},{"title":"timeadd","path":"templates/hcl_templates/functions/datetime/timeadd","filePath":"../content/docs/templates/hcl_templates/functions/datetime/timeadd.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/datetime/timeadd","id":"sidebar-nav-item-125"},{"title":"timestamp","path":"templates/hcl_templates/functions/datetime/timestamp","filePath":"../content/docs/templates/hcl_templates/functions/datetime/timestamp.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/datetime/timestamp","id":"sidebar-nav-item-126"},{"title":"legacy_isotime","path":"templates/hcl_templates/functions/datetime/legacy_isotime","filePath":"../content/docs/templates/hcl_templates/functions/datetime/legacy_isotime.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/datetime/legacy_isotime","id":"sidebar-nav-item-127"},{"title":"legacy_strftime","path":"templates/hcl_templates/functions/datetime/legacy_strftime","filePath":"../content/docs/templates/hcl_templates/functions/datetime/legacy_strftime.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/datetime/legacy_strftime","id":"sidebar-nav-item-128"}],"id":"sidebar-nav-item-123"},{"title":"Hash and Crypto Functions","routes":[{"title":"bcrypt","path":"templates/hcl_templates/functions/crypto/bcrypt","filePath":"../content/docs/templates/hcl_templates/functions/crypto/bcrypt.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/crypto/bcrypt","id":"sidebar-nav-item-130"},{"title":"md5","path":"templates/hcl_templates/functions/crypto/md5","filePath":"../content/docs/templates/hcl_templates/functions/crypto/md5.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/crypto/md5","id":"sidebar-nav-item-131"},{"title":"rsadecrypt","path":"templates/hcl_templates/functions/crypto/rsadecrypt","filePath":"../content/docs/templates/hcl_templates/functions/crypto/rsadecrypt.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/crypto/rsadecrypt","id":"sidebar-nav-item-132"},{"title":"sha1","path":"templates/hcl_templates/functions/crypto/sha1","filePath":"../content/docs/templates/hcl_templates/functions/crypto/sha1.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/crypto/sha1","id":"sidebar-nav-item-133"},{"title":"sha256","path":"templates/hcl_templates/functions/crypto/sha256","filePath":"../content/docs/templates/hcl_templates/functions/crypto/sha256.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/crypto/sha256","id":"sidebar-nav-item-134"},{"title":"sha512","path":"templates/hcl_templates/functions/crypto/sha512","filePath":"../content/docs/templates/hcl_templates/functions/crypto/sha512.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/crypto/sha512","id":"sidebar-nav-item-135"}],"id":"sidebar-nav-item-129"},{"title":"UUID Functions","routes":[{"title":"uuidv4","path":"templates/hcl_templates/functions/uuid/uuidv4","filePath":"../content/docs/templates/hcl_templates/functions/uuid/uuidv4.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/uuid/uuidv4","id":"sidebar-nav-item-137"},{"title":"uuidv5","path":"templates/hcl_templates/functions/uuid/uuidv5","filePath":"../content/docs/templates/hcl_templates/functions/uuid/uuidv5.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/uuid/uuidv5","id":"sidebar-nav-item-138"}],"id":"sidebar-nav-item-136"},{"title":"IP Network Functions","routes":[{"title":"cidrhost","path":"templates/hcl_templates/functions/ipnet/cidrhost","filePath":"../content/docs/templates/hcl_templates/functions/ipnet/cidrhost.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/ipnet/cidrhost","id":"sidebar-nav-item-140"},{"title":"cidrnetmask","path":"templates/hcl_templates/functions/ipnet/cidrnetmask","filePath":"../content/docs/templates/hcl_templates/functions/ipnet/cidrnetmask.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/ipnet/cidrnetmask","id":"sidebar-nav-item-141"},{"title":"cidrsubnet","path":"templates/hcl_templates/functions/ipnet/cidrsubnet","filePath":"../content/docs/templates/hcl_templates/functions/ipnet/cidrsubnet.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/ipnet/cidrsubnet","id":"sidebar-nav-item-142"},{"title":"cidrsubnets","path":"templates/hcl_templates/functions/ipnet/cidrsubnets","filePath":"../content/docs/templates/hcl_templates/functions/ipnet/cidrsubnets.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/ipnet/cidrsubnets","id":"sidebar-nav-item-143"}],"id":"sidebar-nav-item-139"},{"title":"Type Conversion Functions","routes":[{"title":"can","path":"templates/hcl_templates/functions/conversion/can","filePath":"../content/docs/templates/hcl_templates/functions/conversion/can.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/conversion/can","id":"sidebar-nav-item-145"},{"title":"convert","path":"templates/hcl_templates/functions/conversion/convert","filePath":"../content/docs/templates/hcl_templates/functions/conversion/convert.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/conversion/convert","id":"sidebar-nav-item-146"},{"title":"try","path":"templates/hcl_templates/functions/conversion/try","filePath":"../content/docs/templates/hcl_templates/functions/conversion/try.mdx","fullPath":"/packer/docs/templates/hcl_templates/functions/conversion/try","id":"sidebar-nav-item-147"}],"id":"sidebar-nav-item-144"}],"id":"sidebar-nav-item-44"},{"title":"Variables","path":"templates/hcl_templates/variables","filePath":"../content/docs/templates/hcl_templates/variables.mdx","fullPath":"/packer/docs/templates/hcl_templates/variables","id":"sidebar-nav-item-148"},{"title":"Locals","path":"templates/hcl_templates/locals","filePath":"../content/docs/templates/hcl_templates/locals.mdx","fullPath":"/packer/docs/templates/hcl_templates/locals","id":"sidebar-nav-item-149"},{"title":"Contextual Variables","path":"templates/hcl_templates/contextual-variables","filePath":"../content/docs/templates/hcl_templates/contextual-variables.mdx","fullPath":"/packer/docs/templates/hcl_templates/contextual-variables","id":"sidebar-nav-item-150"},{"title":"Data Sources","path":"templates/hcl_templates/datasources","filePath":"../content/docs/templates/hcl_templates/datasources.mdx","fullPath":"/packer/docs/templates/hcl_templates/datasources","id":"sidebar-nav-item-151"},{"title":"Path Variables","path":"templates/hcl_templates/path-variables","filePath":"../content/docs/templates/hcl_templates/path-variables.mdx","fullPath":"/packer/docs/templates/hcl_templates/path-variables","id":"sidebar-nav-item-152"},{"title":"Syntax","path":"templates/hcl_templates/syntax","filePath":"../content/docs/templates/hcl_templates/syntax.mdx","fullPath":"/packer/docs/templates/hcl_templates/syntax","id":"sidebar-nav-item-153"},{"title":"Only Except","path":"templates/hcl_templates/onlyexcept","filePath":"../content/docs/templates/hcl_templates/onlyexcept.mdx","fullPath":"/packer/docs/templates/hcl_templates/onlyexcept","id":"sidebar-nav-item-154"},{"title":"Expressions","path":"templates/hcl_templates/expressions","filePath":"../content/docs/templates/hcl_templates/expressions.mdx","fullPath":"/packer/docs/templates/hcl_templates/expressions","id":"sidebar-nav-item-155"},{"title":"JSON Syntax","path":"templates/hcl_templates/syntax-json","filePath":"../content/docs/templates/hcl_templates/syntax-json.mdx","fullPath":"/packer/docs/templates/hcl_templates/syntax-json","id":"sidebar-nav-item-156"}],"id":"sidebar-nav-item-28"},{"title":"JSON Templates","routes":[{"title":"Overview","path":"templates/legacy_json_templates","filePath":"../content/docs/templates/legacy_json_templates/index.mdx","fullPath":"/packer/docs/templates/legacy_json_templates","id":"sidebar-nav-item-158"},{"title":"Builders","path":"templates/legacy_json_templates/builders","filePath":"../content/docs/templates/legacy_json_templates/builders.mdx","fullPath":"/packer/docs/templates/legacy_json_templates/builders","id":"sidebar-nav-item-159"},{"title":"Communicators","path":"templates/legacy_json_templates/communicator","filePath":"../content/docs/templates/legacy_json_templates/communicator.mdx","fullPath":"/packer/docs/templates/legacy_json_templates/communicator","id":"sidebar-nav-item-160"},{"title":"Engine","path":"templates/legacy_json_templates/engine","filePath":"../content/docs/templates/legacy_json_templates/engine.mdx","fullPath":"/packer/docs/templates/legacy_json_templates/engine","id":"sidebar-nav-item-161"},{"title":"Post-Processors","path":"templates/legacy_json_templates/post-processors","filePath":"../content/docs/templates/legacy_json_templates/post-processors.mdx","fullPath":"/packer/docs/templates/legacy_json_templates/post-processors","id":"sidebar-nav-item-162"},{"title":"Provisioners","path":"templates/legacy_json_templates/provisioners","filePath":"../content/docs/templates/legacy_json_templates/provisioners.mdx","fullPath":"/packer/docs/templates/legacy_json_templates/provisioners","id":"sidebar-nav-item-163"},{"title":"User Variables","path":"templates/legacy_json_templates/user-variables","filePath":"../content/docs/templates/legacy_json_templates/user-variables.mdx","fullPath":"/packer/docs/templates/legacy_json_templates/user-variables","id":"sidebar-nav-item-164"}],"id":"sidebar-nav-item-157"}],"id":"sidebar-nav-item-25"},{"divider":true,"id":"sidebar-nav-item-165"},{"title":"Communicators","routes":[{"title":"Overview","path":"communicators","filePath":"../content/docs/communicators/index.mdx","fullPath":"/packer/docs/communicators","id":"sidebar-nav-item-167"},{"title":"SSH","path":"communicators/ssh","filePath":"../content/docs/communicators/ssh.mdx","fullPath":"/packer/docs/communicators/ssh","id":"sidebar-nav-item-168"},{"title":"WINRM","path":"communicators/winrm","filePath":"../content/docs/communicators/winrm.mdx","fullPath":"/packer/docs/communicators/winrm","id":"sidebar-nav-item-169"}],"id":"sidebar-nav-item-166"},{"title":"Builders","routes":[{"title":"Overview","path":"builders","filePath":"../content/docs/builders/index.mdx","fullPath":"/packer/docs/builders","id":"sidebar-nav-item-171"},{"title":"File","path":"builders/file","filePath":"../content/docs/builders/file.mdx","fullPath":"/packer/docs/builders/file","id":"sidebar-nav-item-172"},{"title":"Null","path":"builders/null","filePath":"../content/docs/builders/null.mdx","fullPath":"/packer/docs/builders/null","id":"sidebar-nav-item-173"},{"title":"Custom","path":"builders/custom","filePath":"../content/docs/builders/custom.mdx","fullPath":"/packer/docs/builders/custom","id":"sidebar-nav-item-174"},{"title":"Community-Supported","path":"builders/community-supported","filePath":"../content/docs/builders/community-supported.mdx","fullPath":"/packer/docs/builders/community-supported","id":"sidebar-nav-item-175"}],"id":"sidebar-nav-item-170"},{"title":"Data Sources","routes":[{"title":"Overview","path":"datasources","filePath":"../content/docs/datasources/index.mdx","fullPath":"/packer/docs/datasources","id":"sidebar-nav-item-177"},{"title":"HCP Packer","routes":[{"title":"Overview","path":"datasources/hcp","filePath":"../content/docs/datasources/hcp/index.mdx","fullPath":"/packer/docs/datasources/hcp","id":"sidebar-nav-item-179"},{"title":"Version","path":"datasources/hcp/hcp-packer-version","filePath":"../content/docs/datasources/hcp/hcp-packer-version.mdx","fullPath":"/packer/docs/datasources/hcp/hcp-packer-version","id":"sidebar-nav-item-180"},{"title":"Artifact","path":"datasources/hcp/hcp-packer-artifact","filePath":"../content/docs/datasources/hcp/hcp-packer-artifact.mdx","fullPath":"/packer/docs/datasources/hcp/hcp-packer-artifact","id":"sidebar-nav-item-181"},{"title":"Iteration","path":"datasources/hcp/hcp-packer-iteration","filePath":"../content/docs/datasources/hcp/hcp-packer-iteration.mdx","fullPath":"/packer/docs/datasources/hcp/hcp-packer-iteration","id":"sidebar-nav-item-182"},{"title":"Image","path":"datasources/hcp/hcp-packer-image","filePath":"../content/docs/datasources/hcp/hcp-packer-image.mdx","fullPath":"/packer/docs/datasources/hcp/hcp-packer-image","id":"sidebar-nav-item-183"}],"id":"sidebar-nav-item-178"},{"title":"HTTP","path":"datasources/http","filePath":"../content/docs/datasources/http.mdx","fullPath":"/packer/docs/datasources/http","id":"sidebar-nav-item-184"}],"id":"sidebar-nav-item-176"},{"title":"Provisioners","routes":[{"title":"Overview","path":"provisioners","filePath":"../content/docs/provisioners/index.mdx","fullPath":"/packer/docs/provisioners","id":"sidebar-nav-item-186"},{"title":"Breakpoint","path":"provisioners/breakpoint","filePath":"../content/docs/provisioners/breakpoint.mdx","fullPath":"/packer/docs/provisioners/breakpoint","id":"sidebar-nav-item-187"},{"title":"File","path":"provisioners/file","filePath":"../content/docs/provisioners/file.mdx","fullPath":"/packer/docs/provisioners/file","id":"sidebar-nav-item-188"},{"title":"PowerShell","path":"provisioners/powershell","filePath":"../content/docs/provisioners/powershell.mdx","fullPath":"/packer/docs/provisioners/powershell","id":"sidebar-nav-item-189"},{"title":"Shell","path":"provisioners/shell","filePath":"../content/docs/provisioners/shell.mdx","fullPath":"/packer/docs/provisioners/shell","id":"sidebar-nav-item-190"},{"title":"Shell (Local)","path":"provisioners/shell-local","filePath":"../content/docs/provisioners/shell-local.mdx","fullPath":"/packer/docs/provisioners/shell-local","id":"sidebar-nav-item-191"},{"title":"Windows Shell","path":"provisioners/windows-shell","filePath":"../content/docs/provisioners/windows-shell.mdx","fullPath":"/packer/docs/provisioners/windows-shell","id":"sidebar-nav-item-192"},{"title":"Windows Restart","path":"provisioners/windows-restart","filePath":"../content/docs/provisioners/windows-restart.mdx","fullPath":"/packer/docs/provisioners/windows-restart","id":"sidebar-nav-item-193"},{"title":"Custom","path":"provisioners/custom","filePath":"../content/docs/provisioners/custom.mdx","fullPath":"/packer/docs/provisioners/custom","id":"sidebar-nav-item-194"},{"title":"Community-Supported","path":"provisioners/community-supported","filePath":"../content/docs/provisioners/community-supported.mdx","fullPath":"/packer/docs/provisioners/community-supported","id":"sidebar-nav-item-195"}],"id":"sidebar-nav-item-185"},{"title":"Post-Processors","routes":[{"title":"Overview","path":"post-processors","filePath":"../content/docs/post-processors/index.mdx","fullPath":"/packer/docs/post-processors","id":"sidebar-nav-item-197"},{"title":"Artifice","path":"post-processors/artifice","filePath":"../content/docs/post-processors/artifice.mdx","fullPath":"/packer/docs/post-processors/artifice","id":"sidebar-nav-item-198"},{"title":"Compress","path":"post-processors/compress","filePath":"../content/docs/post-processors/compress.mdx","fullPath":"/packer/docs/post-processors/compress","id":"sidebar-nav-item-199"},{"title":"Checksum","path":"post-processors/checksum","filePath":"../content/docs/post-processors/checksum.mdx","fullPath":"/packer/docs/post-processors/checksum","id":"sidebar-nav-item-200"},{"title":"Manifest","path":"post-processors/manifest","filePath":"../content/docs/post-processors/manifest.mdx","fullPath":"/packer/docs/post-processors/manifest","id":"sidebar-nav-item-201"},{"title":"Shell (Local)","path":"post-processors/shell-local","filePath":"../content/docs/post-processors/shell-local.mdx","fullPath":"/packer/docs/post-processors/shell-local","id":"sidebar-nav-item-202"},{"title":"Community-Supported","path":"post-processors/community-supported","filePath":"../content/docs/post-processors/community-supported.mdx","fullPath":"/packer/docs/post-processors/community-supported","id":"sidebar-nav-item-203"}],"id":"sidebar-nav-item-196"},{"divider":true,"id":"sidebar-nav-item-204"},{"title":"Installing Packer","path":"install","filePath":"../content/docs/install.mdx","fullPath":"/packer/docs/install","id":"sidebar-nav-item-205"},{"title":"Configuring Packer","path":"configure","filePath":"../content/docs/configure.mdx","fullPath":"/packer/docs/configure","id":"sidebar-nav-item-206"},{"divider":true,"id":"sidebar-nav-item-207"},{"title":"Plugins","routes":[{"title":"Overview","path":"plugins","filePath":"../content/docs/plugins/index.mdx","fullPath":"/packer/docs/plugins","id":"sidebar-nav-item-209"},{"title":"Installing Plugins","path":"plugins/install-plugins","filePath":"../content/docs/plugins/install-plugins.mdx","fullPath":"/packer/docs/plugins/install-plugins","id":"sidebar-nav-item-210"},{"title":"Developing Plugins","routes":[{"title":"Overview","path":"plugins/creation","filePath":"../content/docs/plugins/creation/index.mdx","fullPath":"/packer/docs/plugins/creation","id":"sidebar-nav-item-212"},{"title":"Custom Builders","path":"plugins/creation/custom-builders","filePath":"../content/docs/plugins/creation/custom-builders.mdx","fullPath":"/packer/docs/plugins/creation/custom-builders","id":"sidebar-nav-item-213"},{"title":"Custom Post-Processors","path":"plugins/creation/custom-post-processors","filePath":"../content/docs/plugins/creation/custom-post-processors.mdx","fullPath":"/packer/docs/plugins/creation/custom-post-processors","id":"sidebar-nav-item-214"},{"title":"Custom Provisioners","path":"plugins/creation/custom-provisioners","filePath":"../content/docs/plugins/creation/custom-provisioners.mdx","fullPath":"/packer/docs/plugins/creation/custom-provisioners","id":"sidebar-nav-item-215"},{"title":"Custom Data Sources","path":"plugins/creation/custom-datasources","filePath":"../content/docs/plugins/creation/custom-datasources.mdx","fullPath":"/packer/docs/plugins/creation/custom-datasources","id":"sidebar-nav-item-216"},{"title":"HCP Packer Support","path":"plugins/creation/hcp-support","filePath":"../content/docs/plugins/creation/hcp-support.mdx","fullPath":"/packer/docs/plugins/creation/hcp-support","id":"sidebar-nav-item-217"}],"id":"sidebar-nav-item-211"}],"id":"sidebar-nav-item-208"},{"title":"Integration Program","path":"partnerships","filePath":"../content/docs/partnerships.mdx","fullPath":"/packer/docs/partnerships","id":"sidebar-nav-item-218"},{"title":"Community Tools","path":"community-tools","filePath":"../content/docs/community-tools.mdx","fullPath":"/packer/docs/community-tools","id":"sidebar-nav-item-219"},{"divider":true,"id":"sidebar-nav-item-220"},{"title":"Debugging","path":"debugging","filePath":"../content/docs/debugging.mdx","fullPath":"/packer/docs/debugging","id":"sidebar-nav-item-221"}],"title":"Documentation","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/packer/blob/main/website/../content/docs/aws-get-started.mdx"},"metadata":{"title":"Getting Started with AWS","description":null,"layout":null},"outlineItems":[{"title":"Install Packer","url":"#install-packer","dataHeapTrack":"toc-list-item-index-0"},{"title":"Build an Image","url":"#build-an-image","dataHeapTrack":"toc-list-item-index-1"},{"title":"Authenticating to AWS","url":"#authenticating-to-aws","dataHeapTrack":"toc-list-item-index-2"},{"title":"Initialize Packer Configuration","url":"#initialize-packer-configuration","dataHeapTrack":"toc-list-item-index-3"},{"title":"Formatting and Validating Packer Template","url":"#formatting-and-validating-packer-template","dataHeapTrack":"toc-list-item-index-4"},{"title":"Building Packer Image","url":"#building-packer-image","dataHeapTrack":"toc-list-item-index-5"},{"title":"Managing the Image","url":"#managing-the-image","dataHeapTrack":"toc-list-item-index-6"},{"title":"Deploying Packer Image with Terraform","url":"#deploying-packer-image-with-terraform","dataHeapTrack":"toc-list-item-index-7"},{"title":"GitHub Actions","url":"#github-actions","dataHeapTrack":"toc-list-item-index-8"}],"pageHeading":{"id":"aws-get-started","title":"aws-get-started"},"mdxSource":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",null,`This post is the alternative of\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://qubitpi.github.io/hashicorp-packer/packer/tutorials/aws-get-started\"},`Getting Started with AWS`),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/tutorials/provision/packer#build-your-packer-image\"},`Provision Infrastructure with Packer`),`, whose contents\nhave been closed sourced by HashiCorp.`),mdx(\"p\",null,`HashiCorp Packer automates the creation of any type of machine image, including AWS AMIs. You'll build an Ubuntu\nmachine image on AWS in this tutorial.`),mdx(\"h2\",{\"id\":\"install-packer\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#install-packer\",\"aria-label\":\"install packer permalink\"},`\\xbb`),`Install Packer`),mdx(\"h3\",{\"id\":\"macos\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#macos\",\"aria-label\":\"macos permalink\"},`\\xbb`),`macOS`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`brew tap hashicorp/tap`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`brew `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`install`),` hashicorp/tap/packer`)),`\n`)),mdx(\"h2\",{\"id\":\"build-an-image\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#build-an-image\",\"aria-label\":\"build an image permalink\"},`\\xbb`),`Build an Image`),mdx(\"p\",null,`With Packer installed, it is time to build your first image. In this tutorial, we will build a `,mdx(\"inlineCode\",{parentName:\"p\"},`t2.micro`),`\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://aws.amazon.com/ec2/\"},`Amazon EC2 AMI`),`.`),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},mdx(\"strong\",{parentName:\"p\"},`Note`),`: This tutorial will provision resources that qualify under the AWS free-tier. If our account doesn't qualify\nunder the `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://aws.amazon.com/free/\"},`AWS free-tier`),`, Packer is not responsible for any charges that may incur.`)),mdx(\"h3\",{\"id\":\"write-packer-template\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#write-packer-template\",\"aria-label\":\"write packer template permalink\"},`\\xbb`),`Write Packer Template`),mdx(\"p\",null,`A `,mdx(\"strong\",{parentName:\"p\"},`Packer template`),` is a configuration file that defines the image we want to build and how to build it. Packer\ntemplates use the `,mdx(\"strong\",{parentName:\"p\"},`Hashicorp Configuration Language`),` (`,mdx(\"strong\",{parentName:\"p\"},`HCL`),`).`),mdx(\"p\",null,`HashiCorp has a comprehensive `,mdx(\"a\",{parentName:\"p\",\"href\":\"/terraform/tutorials/provision/packer\"},`tutorial`),` on how\nto build an image and deploys an instance of that image to AWS. The tutorial introduces a standard directory structure\nfor storing HashiCorp related files. This structure can be found in their\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/stealth-tech-startup/learn-terraform-provisioning\"},`tutorial code repo`),`. We will be using that as\nour reference file structure:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},`.`,`\n`,`â””â”€â”€ my-app/`,`\n`,`    â”œâ”€â”€ hashicorp/`,`\n`,`    â”‚   â”œâ”€â”€ images/`,`\n`,`    â”‚   â”‚   â”œâ”€â”€ aws-my-app.pkr.hcl`,`\n`,`    â”‚   â”‚   â””â”€â”€ variables.pkr.hcl`,`\n`,`    â”‚   â”œâ”€â”€ instances/`,`\n`,`    â”‚   â”‚   â””â”€â”€ main.tf`,`\n`,`    â”‚   â””â”€â”€ scripts/`,`\n`,`    â”‚       â””â”€â”€ script.sh`,`\n`,`    â”œâ”€â”€ src`,`\n`,`    â””â”€â”€ ...`,`\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`The `,mdx(\"strong\",{parentName:\"p\"},`images/`),` contains Packer related files`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`The `,mdx(\"strong\",{parentName:\"li\"},`scripts/`),` directory has the post-build script for the AMI image, which we will cover later`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},`The `,mdx(\"strong\",{parentName:\"p\"},`instances/`),` contains Terraform related files`))),mdx(\"p\",null,`Create the file `,mdx(\"strong\",{parentName:\"p\"},`aws-my-ami.pkr.hcl`),` and add the following HCL block to it, and save the file.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`packer`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`required_plugins`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`amazon`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`version`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"\u003e= 0.0.2\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`source`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"github.com/hashicorp/amazon\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,`source `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"amazon-ebs\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-ami\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`ami_name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-ami\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`force_deregister`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"true\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`force_delete_snapshot`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"true\"`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`instance_type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"t2.micro\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`region`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"us-west-1\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`source_ami_filter`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`filters`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ubuntu/images/*ubuntu-*-20.04-amd64-server-*\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`root-device-type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ebs\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`virtualization-type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"hvm\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`most_recent`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`true`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`owners`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"099720109477\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`ssh_username`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ubuntu\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`build`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`name`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"install-my-ami\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`sources`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"source.amazon-ebs.my-ami\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`provisioner`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"shell\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`environment_vars`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"GH_PAT_READ=`,mdx(\"span\",{parentName:\"span\",\"className\":\"token interpolation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`$`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`var`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`gh_pat_read`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),`\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`script`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"../scripts/setup.sh\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`This is a complete Packer template that we will use to build an AWS Ubuntu AMI in the `,mdx(\"inlineCode\",{parentName:\"p\"},`us-west-1`),` region. In the\nfollowing sections, we will review each block of this template in more detail.`),mdx(\"h4\",{\"id\":\"packer-block\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#packer-block\",\"aria-label\":\"packer block permalink\"},`\\xbb`),`Packer Block`),mdx(\"p\",null,`The \\`packer {} block contains Packer settings, including specifying a required Packer version.`),mdx(\"p\",null,`In addition, we will find `,mdx(\"strong\",{parentName:\"p\"},`required_plugins`),` block in the Packer block, which specifies all the plugins required by\nthe template to build our image. Even though Packer is packaged into a single binary, it depends on plugins for much of\nits functionality. Some of these plugins, like the Amazon AMI Builder (AMI builder) which we will to use, are built,\nmaintained, and distributed by HashiCorp; but anyone can write and use plugins.`),mdx(\"p\",null,`Each plugin block contains a `,mdx(\"strong\",{parentName:\"p\"},`version`),` and `,mdx(\"strong\",{parentName:\"p\"},`source`),` attribute. Packer will use these attributes to download the\nappropriate plugin(s).`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},`The `,mdx(\"em\",{parentName:\"li\"},`source`),` attribute is only necessary when requiring a plugin outside the HashiCorp domain. We can find the full\nlist of HashiCorp and community maintained builders plugins in the `,mdx(\"a\",{parentName:\"li\",\"href\":\"/packer/docs/builders\"},`Packer Builders`),` documentation\npage.`),mdx(\"li\",{parentName:\"ul\"},`The `,mdx(\"em\",{parentName:\"li\"},`version`),` attribute is optional, but we recommend using it to constrain the plugin version so that Packer does\nnot install a version of the plugin that does not work with our template. If we do not specify a plugin version,\nPacker will automatically download the most recent version during initialization.`)),mdx(\"p\",null,`In the example template above, Packer will use the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/index.mdx\"},`Packer Amazon AMI builder plugin`),`\nthat is greater than version 0.0.2.`),mdx(\"h4\",{\"id\":\"source-block\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#source-block\",\"aria-label\":\"source block permalink\"},`\\xbb`),`Source Block`),mdx(\"p\",null,`The `,mdx(\"strong\",{parentName:\"p\"},`source`),` block configures a specific builder plugin, which is then invoked by a `,mdx(\"a\",{parentName:\"p\",\"href\":\"#packer-block\"},`build block`),`.\nSource blocks use `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/builders\"},`builders`),` and `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/communicators\"},`communicators`),` to define what kind of\nvirtualization to use, how to launch the image we want to provision, and how to connect to it. Builders and\ncommunicators are bundled together and configured side-by-side in a source block. A `,mdx(\"em\",{parentName:\"p\"},`source`),` can be reused across\nmultiple `,mdx(\"a\",{parentName:\"p\",\"href\":\"#the-build-block\"},`builds`),`, and we can use multiple sources in a single build. A builder plugin is a component\nof Packer that is responsible for creating a machine and turning that machine into an image.`),mdx(\"p\",null,`A source block has two important labels: a builder type and a name. These two labels together will allow us to uniquely\nreference sources later on when we define build runs. In the example template above, the builder type is `,mdx(\"inlineCode\",{parentName:\"p\"},`amazon-ebs`),`\nand the name is `,mdx(\"inlineCode\",{parentName:\"p\"},`my-ami`),`.`),mdx(\"p\",null,`Each builder has its own unique set of configuration attributes. The\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/ebs.mdx\"},`amazon-ebs`),` builder\nlaunches the source AMI, runs provisioners within this instance, then repackages it into an EBS-backed AMI.`),mdx(\"p\",null,`In the example template, the `,mdx(\"em\",{parentName:\"p\"},`amazon-ebs`),` builder configuration launches a `,mdx(\"inlineCode\",{parentName:\"p\"},`t2.micro`),` AMI in the `,mdx(\"inlineCode\",{parentName:\"p\"},`us-west-1`),` region\nusing an `,mdx(\"em\",{parentName:\"p\"},`ubuntu:20.04`),` AMI as the base image, then creates an image named \"my-ami\" from that instance. The builder\nwill create all the temporary resources necessary (for example, keypairs, security group rules, etc..) to temporarily\naccess the instance while the image is being created.`),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},`Note that the `,mdx(\"inlineCode\",{parentName:\"p\"},`owners      = [\"099720109477\"]`),` is the \"owner\" who publishes the Ubuntu AMI image, not the image ID`)),mdx(\"p\",null,`This example template also uses the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/communicators/ssh\"},`SSH communicator`),`. By specifying the `,mdx(\"strong\",{parentName:\"p\"},`ssh_username`),`\nattribute, Packer is able to SSH into EC2 instance using a temporary keypair and security group to provision our\ninstances.`),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},mdx(\"strong\",{parentName:\"p\"},`About `,mdx(\"inlineCode\",{parentName:\"strong\"},`force_deregister = \"true\"`),` \u0026 `,mdx(\"inlineCode\",{parentName:\"strong\"},`force_delete_snapshot = \"true\"`))),mdx(\"p\",{parentName:\"blockquote\"},`Force Packer to first deregister an existing AMI if one with the same name already exists; then delete snapshots\nassociated with AMIs, which have been deregistered by `,mdx(\"inlineCode\",{parentName:\"p\"},`force_deregister`),`. This is very important because otherwise\nPacker fails by complaining that AMI with the same name is already there. In addition, we don't have to worry about\ncleaning up AMI on AWS; we simply keep AMI version controlled as code rather than a hard-to-main AMI infrastructures.\nSee `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://awsbloglink.wordpress.com/2017/12/11/how-to-overwrite-aws-ec2-ami-with-packer/\"},`this post`),` and\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/ebs.mdx\"},`Packer doc`),` for more\ninfo`)),mdx(\"h4\",{\"id\":\"the-build-block\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#the-build-block\",\"aria-label\":\"the build block permalink\"},`\\xbb`),`The Build Block`),mdx(\"p\",null,`The `,mdx(\"strong\",{parentName:\"p\"},`build block`),` defines what Packer should do with the EC2 instance after it launches.`),mdx(\"p\",null,`In the example template, the build block references the AMI defined by the source block above\n(`,mdx(\"inlineCode\",{parentName:\"p\"},`source.amazon-ebs.my-ami`),`).`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`build`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`sources`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"source.amazon-ebs.ubuntu\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h5\",{\"id\":\"provisioners\"},mdx(\"a\",{parentName:\"h5\",\"className\":\"__permalink-h\",\"href\":\"#provisioners\",\"aria-label\":\"provisioners permalink\"},`\\xbb`),`Provisioners`),mdx(\"p\",null,`Historically, pre-baked images have been frowned upon because changing them was so tedious and slow. Because Packer is\ncompletely automated (including provisioning) images can be changed quickly and integrated with modern configuration\nmanagement tools such as Chef or Puppet. Using provisioners allow us to do exactly for that`),mdx(\"p\",null,`Notice that the `,mdx(\"inlineCode\",{parentName:\"p\"},`source.amazon-ebs.my-ami`),` uses the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/communicators/ssh\"},`SSH communicator`),`. By specifying the\n`,mdx(\"em\",{parentName:\"p\"},`ssh_username`),` attribute, Packer is able to SSH into EC2 instance using a temporary keypair and security group to\nprovision our instances.`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},`source `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"amazon-ebs\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-ami\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token comment\"},`## ...`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`ssh_username`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"ubuntu\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`Our provisioner block is in our Packer template, inside the build block and underneath the `,mdx(\"em\",{parentName:\"p\"},`sources`),` assignment:`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`build`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  ...`,`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`provisioner`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"shell\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`environment_vars`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"GH_PAT_READ=`,mdx(\"span\",{parentName:\"span\",\"className\":\"token interpolation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`$`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`var`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`gh_pat_read`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),`\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`script`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"../scripts/setup.sh\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`This block defines a `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/provisioners/shell\"},`shell provisioner`),` which sets an environment variable named GH_PAT_READ\nin the shell execution environment and runs the script at a specified relative path. The\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://qubitpi.github.io/hashicorp-packer/packer/docs/provisioners/shell#environment_vars\"},mdx(\"strong\",{parentName:\"a\"},`environment_vars`)),`\noption is used to pass argument into the provisioner script so that the script can reference it via `,mdx(\"inlineCode\",{parentName:\"p\"},`$GH_PAT_READ`),`:`),mdx(\"pre\",{\"className\":\"language-bash\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token shebang important\"},`#!/bin/bash`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token builtin class-name\"},`set`),` -x`,`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`sudo`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`apt`),` update `,mdx(\"span\",{parentName:\"code\",\"className\":\"token operator\"},`\u0026\u0026`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`sudo`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`apt`),` upgrade -y`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`sudo`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`apt`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`install`),` software-properties-common -y`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`sudo`),` add-apt-repository ppa:deadsnakes/ppa`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`sudo`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`apt`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`install`),` python3.10 -y`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`sudo`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`apt`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`install`),` python3-pip -y`,`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`git`),` clone https://`,mdx(\"span\",{parentName:\"code\",\"className\":\"token variable\"},`$GH_PAT_READ`),`@github.com/MyGitHub/my-app.git`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token builtin class-name\"},`cd`),` /home/ubuntu/my-app`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`sudo`),` pip3 `,mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`install`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token builtin class-name\"},`.`),`\n`)),mdx(\"p\",null,`The script, when IAM image is up for customization, installs some system dependencies, clones some repositories, and\nsetup the app in the script. Note that the repository clone uses the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://stackoverflow.com/a/70320541\"},`GitHub PAT token`),`, which we pass in`),mdx(\"p\",null,`We've passed dynamic data from Template file into our provisioner script. However, our Packer template is usually run\nin some CI/CD process and those dynamic data usually originate from the CI/CD configurations. How do we pass those\nconfigurations into the Packer build/template then?`),mdx(\"p\",null,`We can use input variables to serve as parameters for a Packer build, allowing aspects of the build to be customized\nwithout altering Packer template. In addition, Packer variables are useful when we want to reference a specific value\nthroughout our template. To do that, we have the following variable block in our\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/guides/hcl/variables\"},mdx(\"strong\",{parentName:\"a\"},`hashicorp/images/variables.pkr.hcl file`)),`::`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`variable`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"gh_pat_read\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),`  string`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`sensitive`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`true`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"h2\",{\"id\":\"authenticating-to-aws\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#authenticating-to-aws\",\"aria-label\":\"authenticating to aws permalink\"},`\\xbb`),`Authenticating to AWS`),mdx(\"p\",null,`Before we can build the AMI, we need to provide our AWS credentials to Packer. These credentials have permissions to\ncreate, modify and delete EC2 instances. Refer to the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/index.mdx#iam-task-or-instance-role\"},`documentation`),`\nto find the full list IAM permissions required to run the `,mdx(\"em\",{parentName:\"p\"},`amazon-ebs`),` builder.`),mdx(\"p\",null,`To allow Packer to access our IAM user credentials, set our AWS access key ID as an environment variable.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`export`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token assign-left variable\"},`AWS_ACCESS_KEY_ID`),mdx(\"span\",{parentName:\"span\",\"className\":\"token operator\"},`=`),mdx(\"span\",{parentName:\"span\",\"className\":\"token string\"},`\"\u003cYOUR_AWS_ACCESS_KEY_ID\u003e\"`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`export`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token assign-left variable\"},`AWS_SECRET_ACCESS_KEY`),mdx(\"span\",{parentName:\"span\",\"className\":\"token operator\"},`=`),mdx(\"span\",{parentName:\"span\",\"className\":\"token string\"},`\"\u003cYOUR_AWS_SECRET_ACCESS_KEY\u003e\"`))),`\n`)),mdx(\"div\",{\"className\":\"alert alert-warning g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Note`),`: If we don't have access to IAM user credentials, use another authentication method described in the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://github.com/stealth-tech-startup/packer-plugin-amazon/blob/main/docs/builders/index.mdx#authentication\"},`Packer documentation`),`.`)),mdx(\"h2\",{\"id\":\"initialize-packer-configuration\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#initialize-packer-configuration\",\"aria-label\":\"initialize packer configuration permalink\"},`\\xbb`),`Initialize Packer Configuration`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`packer init `,mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`.`))),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Installed plugin github.com/hashicorp/amazon v0.0.2 in \"/Users/youruser/.packer.d/plugins/github.com/hashicorp/amazon/packer-plugin-amazon_v0.0.2_x5.0_darwin_amd64\"`),`\n`)),mdx(\"p\",null,`Packer will download the plugin we've defined above. In this case, Packer will download the Packer Amazon plugin that\nis greater than version 0.0.2. We can run packer init as many times as you'd like. If we already have the plugins we\nneed, Packer will exit without an output.`),mdx(\"p\",null,`Packer has now downloaded and installed the Amazon plugin. It is ready to build the AMI!`),mdx(\"h2\",{\"id\":\"formatting-and-validating-packer-template\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#formatting-and-validating-packer-template\",\"aria-label\":\"formatting and validating packer template permalink\"},`\\xbb`),`Formatting and Validating Packer Template`),mdx(\"p\",null,`We recommend using consistent formatting in all template files. The packer `,mdx(\"strong\",{parentName:\"p\"},`fmt command`),` updates templates in the\ncurrent directory for readability and consistency.`),mdx(\"p\",null,`By formatting our template. Packer will print out the names of the files it modified, if any. In this case, our\ntemplate file was already formatted correctly, so Packer won't return any file names.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`packer `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`fmt`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`.`))),`\n`)),mdx(\"p\",null,`We can also make sure our configuration is syntactically valid and internally consistent by using the packer `,mdx(\"strong\",{parentName:\"p\"},`validate\ncommand`),`. If Packer detects any invalid configuration, Packer will print out the file name, the error type and line\nnumber of the invalid configuration. The example configuration provided above is valid, so Packer will return nothing.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`packer validate `,mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`.`))),`\n`)),mdx(\"h2\",{\"id\":\"building-packer-image\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#building-packer-image\",\"aria-label\":\"building packer image permalink\"},`\\xbb`),`Building Packer Image`),mdx(\"p\",null,`Build the image with the `,mdx(\"strong\",{parentName:\"p\"},`packer build`),` command. Packer will print output similar to what is shown below.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`packer build aws-my-ami.pkr.hcl`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  learn-packer.amazon-ebs.ubuntu: output will be in this color.`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Prevalidating any provided VPC information`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Prevalidating AMI Name: learn-packer-linux-aws`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      learn-packer.amazon-ebs.ubuntu: Found Image ID: ami-0dd273d94ed0540c0`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Creating temporary keypair: packer_608a6435-e0b2-c633-95f0-bf168f01e891`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Creating temporary security group for this instance: packer_608a6437-6b48-288e-6d5e-c085366a5541`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Authorizing access to port 22 from [0.0.0.0/0] in the temporary security groups...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Launching a source AWS instance...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Adding tags to source instance`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      learn-packer.amazon-ebs.ubuntu: Adding tag: \"Name\": \"Packer Builder\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      learn-packer.amazon-ebs.ubuntu: Instance ID: i-023d696a318e9594c`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Waiting for instance (i-023d696a318e9594c) to become ready...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Using ssh communicator to connect: 35.166.142.55`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Waiting for SSH to become available...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Connected to SSH!`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Stopping the source instance...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      learn-packer.amazon-ebs.ubuntu: Stopping instance`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Waiting for the instance to stop...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Creating AMI learn-packer-linux-aws from instance i-023d696a318e9594c`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      learn-packer.amazon-ebs.ubuntu: AMI: ami-0703a21445140541e`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Waiting for AMI to become ready...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Terminating the source AWS instance...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Cleaning up any extra volumes...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: No volumes to clean up, skipping`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Deleting temporary security group...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e learn-packer.amazon-ebs.ubuntu: Deleting temporary keypair...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  Build 'learn-packer.amazon-ebs.ubuntu' finished after 3 minutes 5 seconds.`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e Wait completed after 3 minutes 5 seconds`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  ==\u003e Builds finished. The artifacts of successful builds are:`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  --\u003e learn-packer.amazon-ebs.my-ami: AMIs were created:`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  us-west-2: ami-0703a21445140541e`),`\n`)),mdx(\"p\",null,`Now visit the AWS AMI page to verify that Packer successfully built your AMI.`),mdx(\"h2\",{\"id\":\"managing-the-image\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#managing-the-image\",\"aria-label\":\"managing the image permalink\"},`\\xbb`),`Managing the Image`),mdx(\"p\",null,`Packer only builds images. It does not attempt to manage them in any way. After they're built, it is up to us to launch\nor destroy them as we see fit.`),mdx(\"p\",null,`After running the example above, our AWS account now has an AMI associated with it. AMIs are stored in S3 by Amazon so\nwe may be charged.`),mdx(\"p\",null,`We can remove the AMI by first deregistering it on the AWS AMI management page. Next, delete the associated snapshot on\nthe AWS snapshot management page.`),mdx(\"h2\",{\"id\":\"deploying-packer-image-with-terraform\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#deploying-packer-image-with-terraform\",\"aria-label\":\"deploying packer image with terraform permalink\"},`\\xbb`),`Deploying Packer Image with Terraform`),mdx(\"h3\",{\"id\":\"install-terraform\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#install-terraform\",\"aria-label\":\"install terraform permalink\"},`\\xbb`),`Install Terraform`),mdx(\"p\",null,`We have seen Packer as HashiCorp's open-source tool for creating machine images from source configuration. We can\nconfigure Packer images with an operating system and software for our specific use-case.`),mdx(\"p\",null,mdx(\"a\",{parentName:\"p\",\"href\":\"https://qubitpi.github.io/hashicorp-terraform/terraform/docs\"},`Terraform`),` configuration for a compute instance can use\na Packer image to provision our instance without manual configuration.`),mdx(\"p\",null,`In this section, we will deploy the AMI image we just created using Terraform.`),mdx(\"h4\",{\"id\":\"macos-1\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#macos-1\",\"aria-label\":\"macos permalink\"},`\\xbb`),`macOS`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`brew tap hashicorp/tap`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`brew `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`install`),` hashicorp/tap/terraform`)),`\n`)),mdx(\"h3\",{\"id\":\"building-infrastructure\"},mdx(\"a\",{parentName:\"h3\",\"className\":\"__permalink-h\",\"href\":\"#building-infrastructure\",\"aria-label\":\"building infrastructure permalink\"},`\\xbb`),`Building Infrastructure`),mdx(\"h4\",{\"id\":\"writing-configuration\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#writing-configuration\",\"aria-label\":\"writing configuration permalink\"},`\\xbb`),`Writing Configuration`),mdx(\"p\",null,`To use the AMI in our Terraform environment, navigate to the instances directory (Each Terraform configuration must be\nin its own working directory. Create a directory for your configuration).`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token builtin class-name\"},`cd`),` hashicorp/instances`)),`\n`)),mdx(\"p\",null,`Create a `,mdx(\"inlineCode\",{parentName:\"p\"},`main.tf`),` file with the following contents:`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`terraform`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`required_providers`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`aws`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`source`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"hashicorp/aws\"`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`version`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"~\u003e 4.42.0\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`required_version`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"\u003e= 0.14.5\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`provider`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"aws\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`region`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"us-west-1\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`data `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_ami\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"latest-my-ami\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`most_recent`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`true`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`owners`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"255643778305\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`filter`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`name`),`   `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"name\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`values`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-ami\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`filter`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`name`),`   `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"virtualization-type\"`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`values`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`[`),mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"hvm\"`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`]`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`resource `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_instance\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-ami-instance\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`ami`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"`,mdx(\"span\",{parentName:\"span\",\"className\":\"token interpolation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`$`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`data`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`aws_ami`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`latest-my-ami`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`id`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),`\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`instance_type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"t2.micro\"`),`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`user_data`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`\u003c\u003c-EOF`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    #!/bin/bash`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    cd /home/ubuntu/my-ami`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    # command that starts app, e.g. flask --app server run --host=0.0.0.0`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`  EOF`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`The file above in Terraform is known as a `,mdx(\"strong\",{parentName:\"p\"},`Terraform configuration`),`. The following sections review each block of this\nconfiguration in more detail.`),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},mdx(\"strong\",{parentName:\"p\"},`Hands-on:`),` Getting the Latest AWS AMI ID with Terraform using `,mdx(\"strong\",{parentName:\"p\"},`data block`),` and AWS API`),mdx(\"p\",{parentName:\"blockquote\"},`This is a great time saver, it stops us from having to hard code any AMI IDs within Terraform. This solution will\nalso enable us to get the latest AMIs in the region we are working in by dynamically querying the AWS API. Good\nstuff!`)),mdx(\"h5\",{\"id\":\"terraform-block\"},mdx(\"a\",{parentName:\"h5\",\"className\":\"__permalink-h\",\"href\":\"#terraform-block\",\"aria-label\":\"terraform block permalink\"},`\\xbb`),`Terraform Block`),mdx(\"p\",null,`The `,mdx(\"strong\",{parentName:\"p\"},`terraform {}`),` block contains Terraform settings, including the required providers Terraform will use to\nprovision our infrastructure. For each provider, the source attribute defines an optional hostname, a namespace, and\nthe provider type. Terraform installs providers from the `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://registry.terraform.io/\"},`Terraform Registry`),` by\ndefault. In this example configuration, the aws provider's source is defined as `,mdx(\"em\",{parentName:\"p\"},`hashicorp/aws`),`, which is shorthand for\n`,mdx(\"em\",{parentName:\"p\"},`registry.terraform.io/hashicorp/aws`),`.`),mdx(\"p\",null,`We can also set a version constraint for each provider defined in the `,mdx(\"em\",{parentName:\"p\"},`required_providers`),` block. The version attribute\nis optional, but we recommend using it to constrain the provider version so that Terraform does not install a version\nof the provider that does not work with our configuration. If we do not specify a provider version, Terraform will\nautomatically download the most recent version during initialization.`),mdx(\"p\",null,`To learn more, please reference the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://qubitpi.github.io/hashicorp-terraform/terraform/language/providers/requirements\"},`provider source documentation`),`.`),mdx(\"h5\",{\"id\":\"providers\"},mdx(\"a\",{parentName:\"h5\",\"className\":\"__permalink-h\",\"href\":\"#providers\",\"aria-label\":\"providers permalink\"},`\\xbb`),`Providers`),mdx(\"p\",null,`The `,mdx(\"strong\",{parentName:\"p\"},`provider block`),` configures the specified provider, in this case `,mdx(\"inlineCode\",{parentName:\"p\"},`aws`),`. A provider is a plugin that Terraform\nuses to create and manage our resources.`),mdx(\"p\",null,`We can use multiple provider blocks in our Terraform configuration to manage resources from different providers. We can\neven use different providers together. For example, we could pass the IP address of our AWS EC2 instance to a\nmonitoring resource from DataDog.`),mdx(\"h5\",{\"id\":\"resources\"},mdx(\"a\",{parentName:\"h5\",\"className\":\"__permalink-h\",\"href\":\"#resources\",\"aria-label\":\"resources permalink\"},`\\xbb`),`Resources`),mdx(\"p\",null,`Use `,mdx(\"strong\",{parentName:\"p\"},`resource blocks`),` to define components of our infrastructure. A resource might be a physical or virtual component\nsuch as an EC2 instance, or it can be a logical resource such as a Heroku application.`),mdx(\"p\",null,`Resource blocks have two strings before the block: the resource type and the resource name. In this example, the\nresource type is `,mdx(\"em\",{parentName:\"p\"},`aws_instance`),` and the name is `,mdx(\"em\",{parentName:\"p\"},`my-ami-instance`),`. The prefix of the type maps to the name of the\nprovider. In the example configuration, Terraform manages the aws`,mdx(\"em\",{parentName:\"p\"},`instance resource with the `,mdx(\"inlineCode\",{parentName:\"em\"},`aws`),` provider. Together,\nthe resource type and resource name form a unique ID for the resource. For example, the ID for your EC2 instance is\n_aws`,`_`,`instance.my-ami-instance`),`.`),mdx(\"p\",null,`Resource blocks contain arguments which we use to configure the resource. Arguments can include things like machine\nsizes, disk image names, or VPC IDs. HashiCorp's\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://qubitpi.github.io/hashicorp-terraform/terraform/language/providers\"},`providers reference`),` lists the required\nand optional arguments for each resource. For our EC2 instance, the example configuration sets the AMI ID to our\n`,mdx(\"em\",{parentName:\"p\"},`my-ami`),` image we created above, and the instance type to `,mdx(\"em\",{parentName:\"p\"},`t2.micro`),`, which qualifies for AWS' free tier. It also sets\na tag to give the instance a name.`),mdx(\"p\",null,`We are also baking a startup script directly into the creation of our EC2 instance using Terraform. We do that using an\ninline bash script specified in the `,mdx(\"strong\",{parentName:\"p\"},`user_data`),` parameter that, for example, starts a web server.`),mdx(\"h4\",{\"id\":\"initializing-the-directory\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#initializing-the-directory\",\"aria-label\":\"initializing the directory permalink\"},`\\xbb`),`Initializing the Directory`),mdx(\"p\",null,`When we create a new configuration - or check out an existing configuration from version control - we need to\ninitialize the directory with terraform init.`),mdx(\"p\",null,`Initializing a configuration directory downloads and installs the providers defined in the configuration, which in this\ncase is the aws provider.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform init`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Initializing the backend...`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Initializing provider plugins...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`- Finding hashicorp/aws versions matching \"~\u003e 4.16\"...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`- Installing hashicorp/aws v4.17.0...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`- Installed hashicorp/aws v4.17.0 (signed by HashiCorp)`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Terraform has created a lock file .terraform.lock.hcl to record the provider`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`selections it made above. Include this file in your version control repository`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`so that Terraform can guarantee to make the same selections by default when`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`you run \"terraform init\" in the future.`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Terraform has been successfully initialized!`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`You may now begin working with Terraform. Try running \"terraform plan\" to see`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`any changes that are required for your infrastructure. All Terraform commands`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`should now work.`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`If you ever set or change modules or backend configuration for Terraform,`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`rerun this command to reinitialize your working directory. If you forget, other`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`commands will detect it and remind you to do so if necessary.`),`\n`)),mdx(\"p\",null,`Terraform downloads the `,mdx(\"inlineCode\",{parentName:\"p\"},`aws`),` provider and installs it in a hidden subdirectory of our current working directory, named\n`,mdx(\"em\",{parentName:\"p\"},`.terraform`),`. The terraform init command prints out which version of the provider was installed. Terraform also creates\na lock file named `,mdx(\"em\",{parentName:\"p\"},`.terraform.lock.hcl`),` which specifies the exact provider versions used, so that we can control when\nwe want to update the providers used for our project.`),mdx(\"h4\",{\"id\":\"formatting-and-validating-the-configuration\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#formatting-and-validating-the-configuration\",\"aria-label\":\"formatting and validating the configuration permalink\"},`\\xbb`),`Formatting and validating the Configuration`),mdx(\"p\",null,`We recommend using consistent formatting in all configuration files. The terraform `,mdx(\"strong\",{parentName:\"p\"},`fmt command`),` automatically\nupdates configurations in the current directory for readability and consistency.`),mdx(\"p\",null,`By formatting our configuration, terraform will print out the names of the files it modified, if any. In this case, our\nconfiguration file was already formatted correctly, so Terraform won't return any file names.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform `,mdx(\"span\",{parentName:\"span\",\"className\":\"token function\"},`fmt`))),`\n`)),mdx(\"p\",null,`We can also make sure our configuration is syntactically valid and internally consistent by using the terraform\n`,mdx(\"strong\",{parentName:\"p\"},`validate command`),`:`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform validate`)),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Success! The configuration is valid.`),`\n`)),mdx(\"h4\",{\"id\":\"creating-infrastructure\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#creating-infrastructure\",\"aria-label\":\"creating infrastructure permalink\"},`\\xbb`),`Creating Infrastructure`),mdx(\"p\",null,`Apply the configuration now with the `,mdx(\"strong\",{parentName:\"p\"},`terraform apply`),` command. Terraform will print output similar to what is shown\nbelow. We have truncated some of the output to save space.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},` terraform apply`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Terraform used the selected providers to generate the following execution plan.`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Resource actions are indicated with the following symbols:`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  + create`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Terraform will perform the following actions:`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`   aws_instance.app_server will be created`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  + resource \"aws_instance\" \"app_server\" {`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      + ami                          = \"ami-830c94e3\"`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`      + arn                          = (known after apply)`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`#`),mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`..`),`.`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Plan: 1 to add, 0 to change, 0 to destroy.`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Do you want to perform these actions?`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  Terraform will perform the actions described above.`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  Only 'yes' will be accepted to approve.`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  Enter a value:`),`\n`)),mdx(\"p\",null,`Before it applies any changes, Terraform prints out the execution plan which describes the actions Terraform will take\nin order to change our infrastructure to match the configuration.`),mdx(\"p\",null,`The output format is similar to the diff format generated by tools such as Git. The output has a `,mdx(\"inlineCode\",{parentName:\"p\"},`+`),` next to\n`,mdx(\"inlineCode\",{parentName:\"p\"},`aws_instance.my-ami-instance`),`, meaning that Terraform will create this resource. Beneath that, it shows the attributes\nthat will be set. When the value displayed is `,mdx(\"inlineCode\",{parentName:\"p\"},`(known after apply)`),`, it means that the value will not be known until\nthe resource is created. For example, AWS assigns Amazon Resource Names (ARNs) to instances upon creation, so Terraform\ncannot know the value of the arn attribute until we apply the change and the AWS provider returns that value from the\nAWS API.`),mdx(\"p\",null,`Terraform will now pause and wait for your approval before proceeding. If anything in the plan seems incorrect or\ndangerous, it is safe to abort here before Terraform modifies your infrastructure.`),mdx(\"p\",null,`In this case the plan is acceptable, so type \"yes\" at the confirmation prompt to proceed. Executing the plan will take\na few minutes since Terraform waits for the EC2 instance to become available.`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`  Enter a value: yes`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`aws_instance.app_server: Creating...`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`aws_instance.app_server: Still creating... [10s elapsed]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`aws_instance.app_server: Still creating... [20s elapsed]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`aws_instance.app_server: Still creating... [30s elapsed]`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`aws_instance.app_server: Creation complete after 36s [id=i-01e03375ba238b384]`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token output\"},`Apply complete! Resources: 1 added, 0 changed, 0 destroyed.`),`\n`)),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},mdx(\"strong\",{parentName:\"p\"},`Hands-on:`),` To execute Terraform actions without the interactive prompt (for example, in a CI/CD environment), use\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://stackoverflow.com/a/59958372\"},mdx(\"inlineCode\",{parentName:\"a\"},`terraform apply -auto-approve`)))),mdx(\"h4\",{\"id\":\"initial-deployment-only-inspect-instance\"},mdx(\"a\",{parentName:\"h4\",\"className\":\"__permalink-h\",\"href\":\"#initial-deployment-only-inspect-instance\",\"aria-label\":\"initial deployment only inspect instance permalink\"},`\\xbb`),`(Initial Deployment Only) Inspect Instance`),mdx(\"p\",null,`We would normally undergo lots of debugging and tuning for our first app deployment by ssh into the EC2 instance.\nTerraform can generate SSL/SSH private keys using the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/private_key\"},`tls_private_key resource`),`.`),mdx(\"p\",null,`So if we wanted to generate SSH keys on the fly we could do something like this (this behavior is not in the example\nconfiguration above):`),mdx(\"pre\",{\"className\":\"language-hcl\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-hcl\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`resource `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"tls_private_key\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"example\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`algorithm`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"RSA\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`rsa_bits`),`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`4096`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`resource `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_key_pair\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"generated_key\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`key_name`),`   `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"initial-deployment-tuning-ssh-key\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`public_key`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` tls_private_key.example.public_key_openssh`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,`...`,`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`resource `,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`\"aws_instance\"`)),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"my-ami-instance\"`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`ami`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"`,mdx(\"span\",{parentName:\"span\",\"className\":\"token interpolation\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`$`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"span\",\"className\":\"token keyword\"},`data`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},`aws_ami`),mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`latest-my-ami`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`.`),`id`,mdx(\"span\",{parentName:\"span\",\"className\":\"token punctuation\"},`}`)),`\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`instance_type`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"t2.micro\"`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`key_name`),`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` aws_key_pair.generated_key.key_name`,`\n`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`user_data`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`\u003c\u003c-EOF`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    #!/bin/bash`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    cd /home/ubuntu/my-ami`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`    # command that starts app, e.g. flask --app server run --host=0.0.0.0`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token heredoc string\"},`  EOF`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token keyword\"},`output`,mdx(\"span\",{parentName:\"span\",\"className\":\"token type variable\"},` \"private_key\" `)),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`value`),`     `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` tls_private_key.example.private_key_pem`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token property\"},`sensitive`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`=`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token boolean\"},`true`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`)),mdx(\"p\",null,`This will create an SSH key pair that lives in the Terraform state (it is not written to disk in files other than what\nmight be done for the Terraform state itself when not using remote state), creates an AWS key pair based on the public\nkey and then creates an Ubuntu 20.04 instance where the ubuntu user is accessible with the private key that was\ngenerated.`),mdx(\"p\",null,`We would then have to extract the private key from the state file for us to use in `,mdx(\"inlineCode\",{parentName:\"p\"},`ssh`),` command. We could use an\n`,mdx(\"inlineCode\",{parentName:\"p\"},`output`),` to spit this straight out to stdout when Terraform is applied by`),mdx(\"pre\",{\"className\":\"language-shell-session\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-shell-session\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token command\"},mdx(\"span\",{parentName:\"span\",\"className\":\"token shell-symbol important\"},`$`),` `,mdx(\"span\",{parentName:\"span\",\"className\":\"token bash language-bash\"},`terraform output -raw private_key`)),`\n`)),mdx(\"div\",{\"className\":\"alert alert-info g-type-body\"},mdx(\"p\",{parentName:\"div\"},``,mdx(\"strong\",{parentName:\"p\"},`Security caveats:`),` It should be pointed out here that passing private keys around is generally a bad idea and\nwe'd be much better having developers create their own key pairs and provide others with the public key that people (or\nthem) can use to generate an AWS key pair (potentially using the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/key_pair.html\"},`aws_key_pair resource`),` as\nused in the above example) that can then be specified when creating instances. In general we should only use something\nlike the above way of generating SSH keys for very temporary dev environments that we are controlling so we don't need\nto pass private keys to anyone. If we do need to pass private keys to people we will need to make sure that we do this\nin a secure channel and that we make sure the Terraform state (which contains the private key in plain text) is also\nsecured appropriately.`)),mdx(\"p\",null,`To Log in with the SSH private key we obtained above,`),mdx(\"pre\",{\"className\":\"language-bash\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`nano`),` private-key.pem`,`\n`)),mdx(\"p\",null,`Paste private key, such as the one in the following image, into the file. Be sure to include the BEGIN and END lines.`),mdx(\"p\",null,mdx(\"img\",{parentName:\"p\",\"src\":\"https://d33wubrfki0l68.cloudfront.net/7a74a036032b0f73c7e4d2f1e2795ce698fb9456/edee6/how-to/logging-in-with-an-ssh-private-key-on-linuxmac/linux2.png\",\"alt\":null})),mdx(\"p\",null,`Run the following command to change the file permissions to 600 to secure the key. We can also set them to 400. This\nstep is required:`),mdx(\"pre\",{\"className\":\"language-bash\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`chmod`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`600`),` private-key.pem`,`\n`)),mdx(\"p\",null,`Use the key to log in to the SSH client as shown in the following example, which loads the key in file\n`,mdx(\"em\",{parentName:\"p\"},`private-key.pem`),`, and logs in as user`,mdx(\"em\",{parentName:\"p\"},`ubuntu`),` to IP 192.237.248.66:`),mdx(\"pre\",{\"className\":\"language-bash\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-bash\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token function\"},`ssh`),` -i private-key.pem ubuntu@192.237.248.66`,`\n`)),mdx(\"h2\",{\"id\":\"github-actions\"},mdx(\"a\",{parentName:\"h2\",\"className\":\"__permalink-h\",\"href\":\"#github-actions\",\"aria-label\":\"github actions permalink\"},`\\xbb`),`GitHub Actions`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"https://github.com/hashicorp/setup-packer\"},`GitHub Action setup-packer`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"https://github.com/marketplace/actions/hashicorp-setup-terraform\"},`GitHub Action setup-terraform`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",{parentName:\"li\",\"href\":\"/packer/tutorials/cloud-production/github-actions\"},`Setup AWS Access Key in GitHub Action`))),mdx(\"pre\",{\"className\":\"language-yml\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-yml\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`---`),`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` My App CI/CD`,`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`on`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`pull_request`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`branches`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` master`,`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`push`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`branches`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` master`,`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`env`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`HASHICORP_PRODUCT_VERSION`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token string\"},`\"latest\"`),`\n`,`\n`,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`jobs`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`  `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`release`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Release IAM image to AWS and Deploys instance to EC2`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`runs-on`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` ubuntu`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`latest`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`defaults`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`working-directory`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp`,`\n`,`    `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`steps`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Checkout`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`uses`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` actions/checkout@v3`,`\n`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Configure AWS credentials`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`if`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` github.ref == 'refs/heads/master'`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`uses`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` aws`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`actions/configure`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`aws`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`credentials@v1`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`with`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`aws-access-key-id`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` $`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` secrets.AWS_ACCESS_KEY_ID `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`aws-secret-access-key`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` $`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` secrets.AWS_SECRET_ACCESS_KEY `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`aws-region`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` us`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`west`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),mdx(\"span\",{parentName:\"code\",\"className\":\"token number\"},`1`),`\n`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Setup HashiCorp Packer`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`uses`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/setup`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`packer@main`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`with`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`version`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` $`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` env.HASHICORP_PRODUCT_VERSION `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Initialize Packer configuration`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` packer init .`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`working-directory`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/images`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Validate Packer template`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` packer validate `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`var \"gh_pat_read=$`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` secrets.GH_PAT_READ `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\" .`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`working-directory`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/images`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Build and release AMI image`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`if`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` github.ref == 'refs/heads/master'`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` packer build `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`var \"gh_pat_read=$`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` secrets.GH_PAT_READ `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\" .`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`working-directory`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/images`,`\n`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Setup HashiCorp Terraform`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`uses`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/setup`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`terraform@v2`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`with`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),`\n`,`          `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`terraform_version`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` $`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`{`),` env.HASHICORP_PRODUCT_VERSION `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`}`),`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Initialize Terraform configuration`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` terraform init`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`working-directory`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/instances`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Validate Terraform template`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` terraform validate`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`working-directory`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/instances`,`\n`,`      `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),` `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`name`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` Create EC2 instance`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`if`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` github.ref == 'refs/heads/master'`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` terraform apply `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`auto`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`approve`,`\n`,`        `,mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`working-directory`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` hashicorp/instances`,`\n`)),mdx(\"p\",null,`Note that to get the aforementioned debugging private key, we would change the last step from`),mdx(\"pre\",{\"className\":\"language-yml\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-yml\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` terraform apply `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`auto`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`approve`,`\n`)),mdx(\"p\",null,`to`),mdx(\"pre\",{\"className\":\"language-yml\"},mdx(\"code\",{parentName:\"pre\",\"className\":\"language-yml\"},mdx(\"span\",{parentName:\"code\",\"className\":\"token key atrule\"},`run`),mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`:`),` terraform apply `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`auto`,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`approve `,mdx(\"span\",{parentName:\"code\",\"className\":\"token important\"},`\u0026\u0026`),` terraform output `,mdx(\"span\",{parentName:\"code\",\"className\":\"token punctuation\"},`-`),`raw private_key`,`\n`)))};MDXContent.isMDXComponent=true;","scope":{"version":"latest"}},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."},"currentRootDocsPath":{"iconName":"docs","name":"Documentation","path":"docs"}},"projectName":null,"versions":null},"__N_SSG":true},"page":"/packer/docs/[...page]","query":{"page":["aws-get-started"]},"buildId":"nncsJPkcjBBboMigFclSM","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script nomodule="">window.MSInputMethodContext && document.documentMode && document.write('<script src="/ie-warning.js"><\x2fscript>');</script></body></html>