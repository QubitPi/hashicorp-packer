{"pageProps":{"layoutProps":{"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Guides","url":"/packer/guides","isCurrentPage":false},{"title":"HCL guides","url":"/packer/guides/hcl"},{"title":"Variables","url":"/packer/guides/hcl/variables","isCurrentPage":true}],"sidebarNavDataLevels":[{"levelButtonProps":{"levelDownButtonText":"Packer Home"},"menuItems":[{"leadingIconName":"home","title":"HashiCorp Developer","href":"/"},{"leadingIconName":"guide","title":"Tutorials","href":"/tutorials"},{"divider":true},{"heading":"Products"},{"leadingIconName":"hcp","title":"HashiCorp Cloud Platform","href":"/hcp"},{"leadingIconName":"terraform","title":"Terraform","href":"/terraform"},{"leadingIconName":"packer","title":"Packer","href":"/packer"},{"leadingIconName":"consul","title":"Consul","href":"/consul"},{"leadingIconName":"vault","title":"Vault","href":"/vault"},{"leadingIconName":"boundary","title":"Boundary","href":"/boundary"},{"leadingIconName":"nomad","title":"Nomad","href":"/nomad"},{"leadingIconName":"waypoint","title":"Waypoint","href":"/waypoint"},{"leadingIconName":"vagrant","title":"Vagrant","href":"/vagrant"}],"showFilterInput":false,"title":"Main Menu"},{"levelButtonProps":{"levelUpButtonText":"Main Menu","levelDownButtonText":"Previous"},"menuItems":[{"title":"Packer","fullPath":"/packer","theme":"packer"},{"title":"Install","fullPath":"/packer/downloads"},{"title":"Tutorials","fullPath":"/packer/tutorials"},{"title":"Documentation","fullPath":"/packer/docs"},{"title":"Guides","fullPath":"/packer/guides"},{"title":"Plugins","fullPath":"/packer/plugins"},{"title":"Integrations","fullPath":"/packer/integrations"}],"showFilterInput":false,"title":"Packer","visuallyHideTitle":true},{"backToLinkProps":{"text":"Packer Home","href":"/packer"},"levelButtonProps":{"levelUpButtonText":"Packer Home"},"menuItems":[{"title":"Guides","fullPath":"/packer/guides","theme":"packer"},{"title":"Upgrade Your Plugin to use the Packer plugin sdk","path":"1.7-plugin-upgrade","filePath":"../content/guides/1.7-plugin-upgrade.mdx","fullPath":"/packer/guides/1.7-plugin-upgrade","id":"sidebar-nav-item-0"},{"title":"Upgrade Your Template to use Packer init","path":"1.7-template-upgrade","filePath":"../content/guides/1.7-template-upgrade.mdx","fullPath":"/packer/guides/1.7-template-upgrade","id":"sidebar-nav-item-1"},{"title":"HCL guides","routes":[{"title":"Overview","path":"hcl","filePath":"../content/guides/hcl/index.mdx","fullPath":"/packer/guides/hcl","id":"sidebar-nav-item-3"},{"title":"Variables","path":"hcl/variables","filePath":"../content/guides/hcl/variables.mdx","fullPath":"/packer/guides/hcl/variables","id":"sidebar-nav-item-4"},{"title":"Upgrade Packer JSON Template to HCL2","href":"https://learn.hashicorp.com/tutorials/packer/hcl2-upgrade","id":"sidebar-nav-item-5"},{"title":"Making a plugin HCL2 enabled","path":"hcl/component-object-spec","filePath":"../content/guides/hcl/component-object-spec.mdx","fullPath":"/packer/guides/hcl/component-object-spec","id":"sidebar-nav-item-6"}],"id":"sidebar-nav-item-2"},{"title":"Automatic OS Installs","routes":[{"title":"Overview","path":"automatic-operating-system-installs","filePath":"../content/guides/automatic-operating-system-installs/index.mdx","fullPath":"/packer/guides/automatic-operating-system-installs","id":"sidebar-nav-item-8"},{"title":"Unattended Installation for Windows","path":"automatic-operating-system-installs/autounattend_windows","filePath":"../content/guides/automatic-operating-system-installs/autounattend_windows.mdx","fullPath":"/packer/guides/automatic-operating-system-installs/autounattend_windows","id":"sidebar-nav-item-9"},{"title":"Unattended Installation for Debian","path":"automatic-operating-system-installs/preseed_ubuntu","filePath":"../content/guides/automatic-operating-system-installs/preseed_ubuntu.mdx","fullPath":"/packer/guides/automatic-operating-system-installs/preseed_ubuntu","id":"sidebar-nav-item-10"}],"id":"sidebar-nav-item-7"},{"title":"Build Immutable Infrastructure with Packer in CI/CD","routes":[{"title":"Overview","path":"packer-on-cicd","filePath":"../content/guides/packer-on-cicd/index.mdx","fullPath":"/packer/guides/packer-on-cicd","id":"sidebar-nav-item-12"},{"title":"Build Images in CI/CD","path":"packer-on-cicd/build-image-in-cicd","filePath":"../content/guides/packer-on-cicd/build-image-in-cicd.mdx","fullPath":"/packer/guides/packer-on-cicd/build-image-in-cicd","id":"sidebar-nav-item-13"},{"title":"Build a VirtualBox Image with Packer in TeamCity","path":"packer-on-cicd/build-virtualbox-image","filePath":"../content/guides/packer-on-cicd/build-virtualbox-image.mdx","fullPath":"/packer/guides/packer-on-cicd/build-virtualbox-image","id":"sidebar-nav-item-14"},{"title":"Pipelineing Builds","path":"packer-on-cicd/pipelineing-builds","filePath":"../content/guides/packer-on-cicd/pipelineing-builds.mdx","fullPath":"/packer/guides/packer-on-cicd/pipelineing-builds","id":"sidebar-nav-item-15"},{"title":"Trigger Terraform Enterprise runs","path":"packer-on-cicd/trigger-tfe","filePath":"../content/guides/packer-on-cicd/trigger-tfe.mdx","fullPath":"/packer/guides/packer-on-cicd/trigger-tfe","id":"sidebar-nav-item-16"},{"title":"Upload a VirtualBox Image to S3","path":"packer-on-cicd/upload-images-to-artifact","filePath":"../content/guides/packer-on-cicd/upload-images-to-artifact.mdx","fullPath":"/packer/guides/packer-on-cicd/upload-images-to-artifact","id":"sidebar-nav-item-17"}],"id":"sidebar-nav-item-11"}],"title":"Guides","visuallyHideTitle":true}],"mainWidth":"narrow","githubFileUrl":"https://github.com/hashicorp/packer/blob/main/website/../content/guides/hcl/variables.mdx"},"metadata":{"title":"Input and Local Variables guide","description":"This page introduces input variables and local variables as a way to\nparameterize a configuration.","layout":null},"outlineItems":[{"title":"Input Variables and local variables","url":"#input-variables-and-local-variables","dataHeapTrack":"toc-list-item-index-0"},{"title":"Defining Variables and locals","url":"#defining-variables-and-locals","dataHeapTrack":"toc-list-item-index-1"},{"title":"Using Variables and locals in Configuration","url":"#using-variables-and-locals-in-configuration","dataHeapTrack":"toc-list-item-index-2"},{"title":"Assigning Variables","url":"#assigning-variables","dataHeapTrack":"toc-list-item-index-3"},{"title":"Variable Type Reference","url":"#variable-type-reference","dataHeapTrack":"toc-list-item-index-4"},{"title":"Assigning Maps","url":"#assigning-maps","dataHeapTrack":"toc-list-item-index-5"}],"pageHeading":{"id":"input-variables-and-local-variables","title":"Input Variables and local variables"},"mdxSource":{"compiledSource":"var c=Object.defineProperty,N=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var t=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var r=(e,n,s)=>n in e?c(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,a=(e,n)=>{for(var s in n||(n={}))o.call(n,s)&&r(e,s,n[s]);if(t)for(var s of t(n))l.call(n,s)&&r(e,s,n[s]);return e},i=(e,n)=>N(e,d(n));var m=(e,n)=>{var s={};for(var p in e)o.call(e,p)&&n.indexOf(p)<0&&(s[p]=e[p]);if(e!=null&&t)for(var p of t(e))n.indexOf(p)<0&&l.call(e,p)&&(s[p]=e[p]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var p=s,{components:e}=p,n=m(p,[\"components\"]);return mdx(MDXLayout,i(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"div\",a({},{className:\"alert alert-info g-type-body\"}),mdx(\"p\",{parentName:\"div\"},\"\",mdx(\"strong\",{parentName:\"p\"},\"Note:\"),\" Packer version \",mdx(\"strong\",{parentName:\"p\"},\"1.5.0\"),\" introduced support for HCL2 templates as a beta feature. As of version \",mdx(\"strong\",{parentName:\"p\"},\"1.7.0\"),\", HCL2 support is no longer in beta and is the preferred way to write Packer configuration(s).\")),mdx(\"p\",null,`This page introduces input variables and local variables as a way to\nparameterize a configuration. Once defined, input variables are settable from a\ndefault value, environment, special var files, and command line arguments.\nLocal variables can be a compound of input variables and local variables.`),mdx(\"h2\",a({},{id:\"defining-variables-and-locals\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#defining-variables-and-locals\",\"aria-label\":\"defining variables and locals permalink\"}),\"\\xBB\"),\"Defining Variables and locals\"),mdx(\"p\",null,`In the legacy JSON Packer templates, any variables we hadn't already defined in\nthe \"variables\" stanza of our json template could simply be passed in via the\ncommand line or a `,mdx(\"inlineCode\",{parentName:\"p\"},\"var-file\"),`; if a variable was never defined it would generally\nbe interpolated to an empty string.`),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},`In the HCL2 Packer templates, we must always pre-define our variables in the\nHCL equivalent of the \"variables\" stanza.`)),mdx(\"p\",null,`Another difference between JSON and HCL Packer templates is that in JSON packer\ntemplates, the \"variables\" stanza, if used, was always in the same .json file\nas the builds and builders. In HCL, it can exist in its own file if you want it\nto.`),mdx(\"p\",null,\"To demonstrate, let's create a file \",mdx(\"inlineCode\",{parentName:\"p\"},\"variables.pkr.hcl\"),` with the following\ncontents.`),mdx(\"div\",a({},{className:\"alert alert-info g-type-body\"}),mdx(\"p\",{parentName:\"div\"},\"\",mdx(\"strong\",{parentName:\"p\"},\"Note\"),`: that the file can be named anything, since Packer loads all\nfiles ending in `,mdx(\"inlineCode\",{parentName:\"p\"},\".pkr.hcl\"),` in a directory. If you split your configuration\nacross multiple files, use\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"packer build <command line flags> <source directory>\"),\" to initiate a build.\")),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"//  variables.pkr.hcl\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// For those variables that you don't provide a default for, you must\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// set them from the command line, a var-file, or the environment.\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"weekday\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"sudo_password\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\"  string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"mypassword\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// Sensitive vars are hidden from output as of Packer v1.6.5\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sensitive\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"flavor\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"strawberry\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"exit_codes\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" list(number)\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"0\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"locals\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"ice_cream_flavor\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"flavor\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'-ice-cream\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"foo\"),\"             \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"bar\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,`This defines several variables within your Packer configuration, each showing\noff a different way to set them. The first variable, \"weekday\", is an empty\nblock `,mdx(\"inlineCode\",{parentName:\"p\"},\"{}\"),\", without a type or a default.\"),mdx(\"p\",null,`However, it's generally best to provide the type in your variable definition,\nas you can see in variable \"flavor\", which we have given a type of \"string\",\nand variable \"exit_codes\", which we have given a type of \"list(number)\",\nmeaning it is a list/array of numbers.`),mdx(\"p\",null,`When a variable is passed from the cli or environment and the variable's type\nis not set, Packer will expect it to be a string. But if it is passed from a\nvar-file where Packer can interpret HCL properly it can be a slice or any\nsupported type.`),mdx(\"p\",null,`In addition to setting the type, the \"flavor\" and \"exit_codes\" variables also\nprovide a default. If you set a default value, then you don't need to set the\nvariable at run time. Packer will use a provided command-line var,\nvar-file, or environment var if it exists, but if not Packer will fall back to\nthis default value.`),mdx(\"p\",null,`If you do not set a default value, Packer will fail immediately when you try to\nrun a `,mdx(\"inlineCode\",{parentName:\"p\"},\"build\"),` if you have not provided the missing variable via the\ncommand-line, a var-file, or the environment. The `,mdx(\"inlineCode\",{parentName:\"p\"},\"validate\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"inspect\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"console\"),` commands will work, but variables with unknown values will be\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"<unknown>\"),\".\"),mdx(\"p\",null,\"This also defines two locals: \",mdx(\"inlineCode\",{parentName:\"p\"},\"ice_cream_flavor\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"foo\"),\".\"),mdx(\"div\",a({},{className:\"alert alert-info g-type-body\"}),mdx(\"p\",{parentName:\"div\"},\"\",mdx(\"strong\",{parentName:\"p\"},\"Note\"),\": that it is \",mdx(\"em\",{parentName:\"p\"},\"not\"),` possible to reference a variable in the\ndefinition of another variable. But it `,mdx(\"em\",{parentName:\"p\"},\"is\"),` possible to use locals and\nvariables in the definition of a local, as shown in the ice_cream_flavor\ndefinition.`)),mdx(\"h2\",a({},{id:\"using-variables-and-locals-in-configuration\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#using-variables-and-locals-in-configuration\",\"aria-label\":\"using variables and locals in configuration permalink\"}),\"\\xBB\"),\"Using Variables and locals in Configuration\"),mdx(\"p\",null,`For simplicity's sake, we're going to put a null source in the same file as\nwe are putting the build configuration. This file demonstrates how to use the\nvariables we previously defined.`),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// null_example.pkr.hcl\"),`\n`,`\n`,\"source \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"null\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"example\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"communicator\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"none\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"source.null.example\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell-local\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// Note that for options that are documented as template engines,\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// we still have to use the Go template engine syntax rather than our\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// specialized HCL2 variable syntax. This example shows a combination of\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// an HCL2 variable and the Go template engines built into the\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"// execute_command option\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"execute_command\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"/bin/sh\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"-c\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"echo ',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"sudo_password\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'| {{.Vars}} {{.Script}}\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"environment_vars\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"HELLO_USER=packeruser\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UUID=',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),\"build\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),\"PackerRunUUID\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\"           \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"echo the Packer run uuid is $UUID\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell-local\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\"           \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"echo var.flavor is: ',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"flavor\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),\",\",`\n`,\"                        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"echo local.ice_cream_flavor is: ',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"local\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"ice_cream_flavor\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"valid_exit_codes\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" var.exit_codes\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,`As you can see in the example, you can access your variables directly by\ngiving them the `,mdx(\"inlineCode\",{parentName:\"p\"},\"var.\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"local.\"),` prefix. If you want to embed the variables\nin a string, you can do so with the `,mdx(\"inlineCode\",{parentName:\"p\"},\"${}\"),` HCL interpolation syntax. If you are\nusing an option that is a template engine, you still need to use the Go\ntemplating engine syntax `,mdx(\"inlineCode\",{parentName:\"p\"},\"{{ .OPTION }}\"),\" for those engines.\"),mdx(\"h2\",a({},{id:\"assigning-variables\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#assigning-variables\",\"aria-label\":\"assigning variables permalink\"}),\"\\xBB\"),\"Assigning Variables\"),mdx(\"p\",null,`There are multiple ways to assign variables. Below is also the order\nin which variable values are chosen. The following is the descending order\nof precedence in which variables are considered. So first defined; first used.`),mdx(\"h4\",a({},{id:\"command-line-flags\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#command-line-flags\",\"aria-label\":\"command line flags permalink\"}),\"\\xBB\"),\"Command-line flags\"),mdx(\"p\",null,`You can set variables directly on the command-line with the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"-var\"),\" flag.:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"  -var \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"weekday=Sunday\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"  -var \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"flavor=chocolate\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"  -var \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"sudo_password=hunter42\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\".\"))),`\n`)),mdx(\"p\",null,`Once again, setting variables this way will not save them, and they'll\nhave to be input repeatedly as commands are executed.`),mdx(\"p\",null,`If you plan to assign variables via the command line, we strongly recommend that\nyou at least set a default type instead of using empty blocks; this helps the\nHCL parser understand what is being set. Otherwise it will interpret all of your\ncommand line variables as strings.`),mdx(\"h4\",a({},{id:\"from-a-file\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#from-a-file\",\"aria-label\":\"from a file permalink\"}),\"\\xBB\"),\"From a file\"),mdx(\"p\",null,`To persist variable values, create a file and assign variables within\nthis file. A variable definitions file uses the same basic syntax as Packer language files,\nbut consists only of variable name assignments.`),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sudo_password\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"partyparrot\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"weekday\"),\"       \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Sunday\"'),`\n`)),mdx(\"p\",null,`When assigning values in a variable definitions file please make sure to quote any string values,\nwrap list values within brackets `,mdx(\"inlineCode\",{parentName:\"p\"},\"[...]\"),\", and wrap maps within curly-braces \",mdx(\"inlineCode\",{parentName:\"p\"},\"{...}\"),\".\"),mdx(\"p\",null,\"Given a file named \",mdx(\"inlineCode\",{parentName:\"p\"},\"variables.pkrvars.hcl\"),` Packer can be instructed to use the\nvariable definitions file by using the `,mdx(\"inlineCode\",{parentName:\"p\"},\"-var-file\"),\" command line flag.\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build -var-file\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"variables.pkrvars.hcl\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\".\"))),`\n`)),mdx(\"p\",null,`Packer will automatically load any var file that matches the name\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"*.auto.pkrvars.hcl\"),`, without the need to pass the file via the command line.\nIf we rename the above variable definitions file from `,mdx(\"inlineCode\",{parentName:\"p\"},\"variables.pkrvars.hcl\"),` to\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"variables.auto.pkrvars.hcl\"),\", then we can run our build simply by calling\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\".\"))),`\n`)),mdx(\"p\",null,\"You may provide as many -var-file flags as you would like:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"  -var-file\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"secret.pkrvars.hcl\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"  -var-file\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"production.pkrvars.hcl\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\".\"))),`\n`)),mdx(\"p\",null,\"These files can also be JSON:\"),mdx(\"p\",null,\"variables.json:\"),mdx(\"pre\",a({},{className:\"language-json\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-json\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),'\"weekday\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"sunday\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),'\"flavor\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\":\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"mint\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build -var-file\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"variables.json\")),`\n`)),mdx(\"p\",null,`We don't recommend saving sensitive information to version control, but you\ncan create a local secret variables file and use `,mdx(\"inlineCode\",{parentName:\"p\"},\"-var-file\"),\" to load it.\"),mdx(\"p\",null,\"You can use multiple \",mdx(\"inlineCode\",{parentName:\"p\"},\"-var-file\"),` arguments in a single command, with some\nchecked in to version control and others not checked in. For example:`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"  -var-file\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"secret.pkrvars.hcl\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"\\\\\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"  -var-file\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"production.pkrvars.hcl\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\".\"))),`\n`)),mdx(\"h4\",a({},{id:\"from-environment-variables\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#from-environment-variables\",\"aria-label\":\"from environment variables permalink\"}),\"\\xBB\"),\"From environment variables\"),mdx(\"p\",null,\"Packer will read environment variables in the form of \",mdx(\"inlineCode\",{parentName:\"p\"},\"PKR_VAR_name\"),` to find\nthe value for a variable. For example, the `,mdx(\"inlineCode\",{parentName:\"p\"},\"PKR_VAR_access_key\"),` variable can be\nset to set the `,mdx(\"inlineCode\",{parentName:\"p\"},\"access_key\"),\" variable.\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token assign-left variable\"}),\"PKR_VAR_weekday\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"Monday\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\".\"))),`\n`)),mdx(\"h4\",a({},{id:\"variable-defaults\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#variable-defaults\",\"aria-label\":\"variable defaults permalink\"}),\"\\xBB\"),\"Variable Defaults\"),mdx(\"p\",null,`If no value is assigned to a variable via any of these methods and the\nvariable has a `,mdx(\"inlineCode\",{parentName:\"p\"},\"default\"),` key in its declaration, that value will be used\nfor the variable.`),mdx(\"p\",null,\"If all of your variables have defaults, then you can call a packer build using:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\".\"))),`\n`)),mdx(\"p\",null,`You can make this work for yourself using the variable example file above by\ncommenting out or removing the \"weekday\" variable declaration, since it is not\nactually used in the example build.`),mdx(\"p\",null,`If your variable definitions are stored in the same file as your source and\nbuild, you can call the build against that specific file:`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build self_contained_example.pkr.hcl\")),`\n`)),mdx(\"h4\",a({},{id:\"unspecified-values-fail\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#unspecified-values-fail\",\"aria-label\":\"unspecified values fail permalink\"}),\"\\xBB\"),\"Unspecified Values Fail\"),mdx(\"p\",null,\"If you call \",mdx(\"inlineCode\",{parentName:\"p\"},\"packer build\"),` with any variables defined but not set, Packer will\nerror.`),mdx(\"h2\",a({},{id:\"variable-type-reference\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#variable-type-reference\",\"aria-label\":\"variable type reference permalink\"}),\"\\xBB\"),\"Variable Type Reference\"),mdx(\"h3\",a({},{id:\"lists\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#lists\",\"aria-label\":\"lists permalink\"}),\"\\xBB\"),\"Lists\"),mdx(\"p\",null,\"Lists are defined either explicitly or implicitly\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# implicitly by using brackets [...]\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"cidrs\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# explicitly\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"cidrs\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" list \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"You can specify lists in a \",mdx(\"inlineCode\",{parentName:\"p\"},\"variables.pkrvars.hcl\"),\" file:\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"cidrs\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"10.0.0.0/16\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"10.1.0.0/16\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`)),mdx(\"h3\",a({},{id:\"maps\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#maps\",\"aria-label\":\"maps permalink\"}),\"\\xBB\"),\"Maps\"),mdx(\"p\",null,`Maps are a way to create variables that are lookup tables. An example\nwill show this best. Let's extract our AMIs into a map and add\nsupport for the `,mdx(\"inlineCode\",{parentName:\"p\"},\"us-west-2\"),\" region as well:\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"amis\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" map(string)\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),'\"us-east-1\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ami-b374d5a5\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),'\"us-west-2\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ami-4b32be2b\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"A variable can have a \",mdx(\"inlineCode\",{parentName:\"p\"},\"map\"),` type assigned explicitly, or it can be implicitly\ndeclared as a map by specifying a default value that is a map. The above\ndemonstrates both.`),mdx(\"p\",null,\"Then we can \",mdx(\"inlineCode\",{parentName:\"p\"},\"lookup\"),\" in maps like in the following:\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),\"source \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"amazon-ebs\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"example\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source_ami\"),\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"lookup\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"amis\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"region\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"instance_type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"t2.micro\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,`This introduces a new type of interpolation: a function call. The\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"lookup\"),` function does a dynamic lookup in a map for a key. The\nkey is `,mdx(\"inlineCode\",{parentName:\"p\"},\"var.region\"),`, which specifies that the value of the region\nvariables is the key.`),mdx(\"p\",null,`You can also do a static lookup of a map directly with\n`,mdx(\"inlineCode\",{parentName:\"p\"},'${var.amis[\"us-east-1\"]}'),\".\"),mdx(\"h2\",a({},{id:\"assigning-maps\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#assigning-maps\",\"aria-label\":\"assigning maps permalink\"}),\"\\xBB\"),\"Assigning Maps\"),mdx(\"p\",null,\"We set defaults above, but maps can also be set using the \",mdx(\"inlineCode\",{parentName:\"p\"},\"-var\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"-var-file\"),\" values. For example:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build -var \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),`'amis={ us-east-1 = \"foo\", us-west-2 = \"bar\" }'`))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"..\"),\".\")),`\n`)),mdx(\"p\",null,`Here is an example of setting a map's keys from a file. Starting with these\nvariable definitions:`),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"region\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"amis\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" map\",`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"You can specify keys in a \",mdx(\"inlineCode\",{parentName:\"p\"},\"variables.pkrvars.hcl\"),\" file:\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"amis\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),'\"us-east-1\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ami-abc123\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),'\"us-west-2\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ami-def456\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"And access them via \",mdx(\"inlineCode\",{parentName:\"p\"},\"lookup()\"),\":\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"output\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"ami\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"value\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"lookup\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"amis\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\",\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"region\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",null,\"Like so:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"packer build -var \",mdx(\"span\",a({parentName:\"span\"},{className:\"token assign-left variable\"}),\"region\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"us-west-2\")),`\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{"version":"latest"}},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"},{"iconName":"plug","name":"Plugins","path":"plugins"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."},"currentRootDocsPath":{"iconName":"guide","name":"Guides","path":"guides"}},"projectName":null,"versions":null},"__N_SSG":true}